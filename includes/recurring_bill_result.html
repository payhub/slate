<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_recurring_bill_result">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.jpg" />
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="recurring-bill-transaction">Recurring Bill Transaction</h1>

<h2 id="introduction">Introduction</h2>

<p>This topic provides information about the Recurring Bill transaction.</p>

<p>Use the recurring billing transaction when you want to periodically charge certain amount to the customer. You can use this feature for subscriptions or for any ongoing product or service you offer. You can setup a recurring billing by calling our RESTful API through an HTTP post containing a JSON.</p>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONArray</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecurringBill</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">CreateRecurringBill</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
      <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
      <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/recurring-bill"</span><span class="o">;</span>

      <span class="n">JSONObject</span> <span class="n">merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"organization_id"</span><span class="o">,</span> <span class="s">"10005"</span><span class="o">);</span><span class="c1">//You put your org id here</span>
        <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"terminal_id"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span><span class="c1">//You put your terminal id</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"merchant"</span><span class="o">,</span> <span class="n">merchant</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">bill</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">JSONObject</span> <span class="n">base_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">base_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"1275"</span><span class="o">);</span><span class="c1">//$12.75</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"base_amount"</span><span class="o">,</span> <span class="n">base_amount</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">shipping_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">shipping_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"725"</span><span class="o">);</span><span class="c1">//$7.25</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"shipping_amount"</span><span class="o">,</span> <span class="n">shipping_amount</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">tax_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">tax_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"113"</span><span class="o">);</span><span class="c1">//$1.13</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"tax_amount"</span><span class="o">,</span> <span class="n">tax_amount</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"note"</span><span class="o">,</span> <span class="s">"Shipped as a gift"</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"invoice_number"</span><span class="o">,</span> <span class="s">"4645782"</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"po_number"</span><span class="o">,</span> <span class="s">"1234-654321"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bill"</span><span class="o">,</span> <span class="n">bill</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">card_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_number"</span><span class="o">,</span> <span class="s">"5466410004374507"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_expiry_date"</span><span class="o">,</span> <span class="s">"201809"</span><span class="o">);</span><span class="c1">// September 2018</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_1"</span><span class="o">,</span> <span class="s">"237 E 33rd Street"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_2"</span><span class="o">,</span> <span class="s">"3rd Floor"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_zip"</span><span class="o">,</span> <span class="s">"10016"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_city"</span><span class="o">,</span> <span class="s">"New York"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_state"</span><span class="o">,</span> <span class="s">"NY"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_data"</span><span class="o">,</span> <span class="n">card_data</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"company_name"</span><span class="o">,</span> <span class="s">"CBA Steakhouse"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"job_title"</span><span class="o">,</span> <span class="s">"Owner"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"email_address"</span><span class="o">,</span> <span class="s">"john@cbasteakhouse.com"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_number"</span><span class="o">,</span> <span class="s">"(917) 479 1349"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_ext"</span><span class="o">,</span> <span class="s">"5478"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_type"</span><span class="o">,</span> <span class="s">"M"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"customer"</span><span class="o">,</span> <span class="n">customer</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">schedule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">schedule</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"schedule_type"</span><span class="o">,</span> <span class="s">"S"</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">specific_dates_schedule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">JSONArray</span> <span class="n">specific_dates</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONArray</span><span class="o">();</span>
            <span class="n">specific_dates</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="s">"2016-02-01"</span><span class="o">);</span>
            <span class="n">specific_dates</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">"2016-10-31"</span><span class="o">);</span>
          <span class="n">specific_dates_schedule</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"specific_dates"</span><span class="o">,</span> <span class="n">specific_dates</span><span class="o">);</span>
        <span class="n">schedule</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"specific_dates_schedule"</span><span class="o">,</span> <span class="n">specific_dates_schedule</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"schedule"</span><span class="o">,</span> <span class="n">schedule</span><span class="o">);</span>

      <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

      <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
      <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span><span class="c1">//You return this response and work with it</span>

      <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
      <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">json</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">cnt</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'&lt;'</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span>
            <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
                <span class="o">||</span> <span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">" "</span><span class="o">)</span> <span class="o">?</span> <span class="s">"{\"MESSAGE\":\"NO RESPONSE...\"}"</span>
                <span class="o">:</span> <span class="n">json</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getReasonPhrase</span><span class="o">();</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Created"</span><span class="o">)){</span>
        <span class="n">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Header</span> <span class="n">header</span> <span class="o">:</span> <span class="n">headers</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)){</span>
            <span class="n">URL</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
            <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getPath</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">lastSlash</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">transactionId</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastSlash</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Recurring Bill Id: "</span> <span class="o">+</span> <span class="n">transactionId</span> <span class="o">);</span> <span class="c1">//Last resource of the path</span>
          <span class="o">}</span>

        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonResponseObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>


    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>
<pre><code class="highlight php">
<span class="cp">&lt;?php</span>
  <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
  <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="c1">//Defining the Web Service URL
</span>  <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/</span><span class="nv">$trans_type</span><span class="s2">"</span><span class="p">;</span>

  <span class="c1">//Defining data for the RECURRING BILL transaction
</span>  <span class="c1">// Merchant data (obtained from the payHub Virtual Terminal (3rd party integration)
</span>  <span class="nv">$organization_id</span> <span class="o">=</span> <span class="mi">10002</span><span class="p">;</span>
  <span class="nv">$terminal_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="nv">$oauth_token</span> <span class="o">=</span> <span class="s2">"22fe3c69-db70-4a8c-9aed-9a33ebb1e9b4"</span><span class="p">;</span>
  <span class="c1">// bill data
</span>  <span class="nv">$base_amount</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
  <span class="nv">$shipping_amount</span> <span class="o">=</span> <span class="mf">1.23</span><span class="p">;</span>
  <span class="nv">$tax_amount</span> <span class="o">=</span> <span class="mf">1.00</span><span class="p">;</span>
  <span class="nv">$note</span> <span class="o">=</span> <span class="s2">"this a sample note"</span><span class="p">;</span>
  <span class="nv">$invoice_number</span> <span class="o">=</span> <span class="s2">"a-00240"</span><span class="p">;</span>
  <span class="nv">$po_number</span> <span class="o">=</span> <span class="s2">"56"</span><span class="p">;</span>
  <span class="c1">//Credit card data
</span>  <span class="nv">$card_number</span> <span class="o">=</span> <span class="s2">"5466410004374507"</span><span class="p">;</span>
  <span class="nv">$card_expiry_date</span> <span class="o">=</span> <span class="s2">"202011"</span><span class="p">;</span>
  <span class="nv">$cvv_data</span> <span class="o">=</span> <span class="s2">"998"</span><span class="p">;</span>
  <span class="nv">$billing_address_1</span> <span class="o">=</span> <span class="s2">"2350 Kerner Blvd"</span><span class="p">;</span>
  <span class="nv">$billing_address_2</span> <span class="o">=</span> <span class="s2">"On the corner"</span><span class="p">;</span>
  <span class="nv">$billing_city</span> <span class="o">=</span> <span class="s2">"San Rafael"</span><span class="p">;</span>
  <span class="nv">$billing_state</span> <span class="o">=</span> <span class="s2">"CA"</span><span class="p">;</span>
  <span class="nv">$billing_zip</span> <span class="o">=</span> <span class="s2">"94901"</span><span class="p">;</span>
  <span class="c1">// Customer data
</span>  <span class="nv">$first_name</span> <span class="o">=</span> <span class="s2">"First"</span><span class="p">;</span>
  <span class="nv">$last_name</span> <span class="o">=</span> <span class="s2">"Contact"</span><span class="p">;</span>
  <span class="nv">$company_name</span> <span class="o">=</span> <span class="s2">"Payhub Inc"</span><span class="p">;</span>
  <span class="nv">$job_title</span> <span class="o">=</span> <span class="s2">"Software Engineer"</span><span class="p">;</span>
  <span class="nv">$email_address</span> <span class="o">=</span> <span class="s2">"jhon@company.com"</span><span class="p">;</span>
  <span class="nv">$web_address</span> <span class="o">=</span> <span class="s2">"http://payhub.com"</span><span class="p">;</span>
  <span class="nv">$phone_number</span> <span class="o">=</span> <span class="s2">"(415) 479 1349"</span><span class="p">;</span>
  <span class="nv">$phone_ext</span> <span class="o">=</span> <span class="s2">"123"</span><span class="p">;</span>
  <span class="nv">$phone_type</span> <span class="o">=</span> <span class="s2">"M"</span><span class="p">;</span>
  <span class="c1">// Schedule data
</span>  <span class="nv">$schedule_type</span> <span class="o">=</span> <span class="s2">"M"</span><span class="p">;</span>
  <span class="nv">$bill_generation_interval</span><span class="o">=</span><span class="s2">"1"</span><span class="p">;</span>
  <span class="c1">//Schedule - schedule_start_and_end (object)
</span>  <span class="nv">$start_date</span><span class="o">=</span><span class="s2">"2015-06-01"</span><span class="p">;</span>
  <span class="nv">$end_date_type</span><span class="o">=</span><span class="s2">"A"</span><span class="p">;</span>
  <span class="nv">$end_after_bill_count</span><span class="o">=</span><span class="s2">"6"</span><span class="p">;</span>
  <span class="c1">//Schedule - monthly_schedule (object)
</span>  <span class="nv">$monthly_type</span><span class="o">=</span><span class="s2">"E"</span><span class="p">;</span>
  <span class="c1">//This is an array, put the elements separated by ","
</span>  <span class="nv">$monthly_each_days</span><span class="o">=</span><span class="s2">"1"</span><span class="p">;</span>

  <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>  <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"merchant"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"organization_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$organization_id</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"terminal_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$terminal_id</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"bill"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"base_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$base_amount</span><span class="p">),</span>
    <span class="s2">"shipping_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$shipping_amount</span><span class="p">),</span>
    <span class="s2">"tax_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$tax_amount</span><span class="p">));</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"card_data"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"card_expiry_date"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_expiry_date</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"cvv_data"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$cvv_data</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_address_1"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_1</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"billing_address_2"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_2</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_city"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_city</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"billing_state"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_state</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_zip"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_zip</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"customer"</span><span class="p">]</span><span class="o">=</span>  <span class="k">array</span><span class="p">(</span><span class="s2">"first_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$first_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"last_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$last_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"company_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$company_name</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"job_title"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$job_title</span><span class="s2">"</span><span class="p">,</span><span class="s2">"email_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$email_address</span><span class="s2">"</span><span class="p">,</span><span class="s2">"web_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$web_address</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"phone_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_ext"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_ext</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_type"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_type</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"schedule"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"schedule_type"</span> <span class="o">=&gt;</span> <span class="nv">$schedule_type</span><span class="p">,</span> <span class="s2">"bill_generation_interval"</span> <span class="o">=&gt;</span> <span class="nv">$bill_generation_interval</span><span class="p">,</span>
    <span class="s2">"schedule_start_and_end"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"start_date"</span> <span class="o">=&gt;</span> <span class="nv">$start_date</span><span class="p">,</span> <span class="s2">"end_date_type"</span> <span class="o">=&gt;</span> <span class="nv">$end_date_type</span><span class="p">,</span> <span class="s2">"end_after_bill_count"</span> <span class="o">=&gt;</span> <span class="nv">$end_after_bill_count</span><span class="p">),</span>
    <span class="s2">"monthly_schedule"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"monthly_type"</span> <span class="o">=&gt;</span> <span class="nv">$monthly_type</span><span class="p">));</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"schedule"</span><span class="p">][</span><span class="s2">"monthly_schedule"</span><span class="p">][</span><span class="s2">"monthly_each_days"</span><span class="p">]</span><span class="o">=</span><span class="nb">explode</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span><span class="nv">$monthly_each_days</span><span class="p">);</span>

  <span class="c1">//Convert data from Array to JSON
</span>  <span class="k">echo</span> <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

  <span class="c1">//Creating a CURL object to access the WS
</span>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
  <span class="c1">//Setting the address to connect to
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
  <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
  <span class="c1">//Setting data in JSON format
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
  <span class="c1">//Setting the proper header.
</span>  <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

  <span class="c1">//execute connection to the Web Service
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="c1">// get some data from the response
</span>  <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
  <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
  <span class="c1">//Get the header as string.
</span>  <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
  <span class="c1">//close connection to the Web Service
</span>  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

  <span class="c1">//Obtain the data from the recurring bill recently created
</span>  <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
    <span class="c1">//find the url of the recurring bill (Location header in the response)
</span>    <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
    <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
    <span class="c1">//Setting the proper header.
</span>    <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
    <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="c1">//execute connection to the Web Service
</span>    <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//close connection to the Web Service
</span>    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>    <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
    <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>    <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//There was an error with the WS
</span>  <span class="k">else</span><span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>
<pre><code class="highlight csharp"><span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PayHubSamples</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">RecurringBilling</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">CreateRecurringBilling</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/recurring-bill"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                <span class="n">var</span> <span class="n">recurringBill</span> <span class="p">=</span> <span class="k">new</span>
                <span class="p">{</span>
                    <span class="n">merchant</span> <span class="p">=</span> <span class="k">new</span>
                     <span class="p">{</span>
                         <span class="n">organization_id</span> <span class="p">=</span> <span class="s">"10005"</span><span class="p">,</span>
                         <span class="n">terminal_id</span> <span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                     <span class="p">},</span>
                    <span class="n">bill</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">base_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"1275"</span> <span class="c1">//$12.75
</span>                        <span class="p">},</span>
                        <span class="n">shipping_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"725"</span> <span class="c1">//$7.25
</span>                        <span class="p">},</span>
                        <span class="n">tax_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"113"</span> <span class="c1">//$1.13
</span>                        <span class="p">},</span>
                        <span class="n">note</span> <span class="p">=</span> <span class="s">"Shipped as a gift"</span><span class="p">,</span>
                        <span class="n">invoice_number</span> <span class="p">=</span> <span class="s">"4645782"</span><span class="p">,</span>
                        <span class="n">po_number</span> <span class="p">=</span> <span class="s">"1234-654321"</span>
                    <span class="p">},</span>
                    <span class="n">card_data</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">card_number</span> <span class="p">=</span> <span class="s">"5466410004374507"</span><span class="p">,</span>
                        <span class="n">card_expiry_date</span> <span class="p">=</span> <span class="s">"201809"</span><span class="p">,</span> <span class="c1">//September 2018
</span>                        <span class="n">billing_address_1</span> <span class="p">=</span> <span class="s">"237 E 33rd Street"</span><span class="p">,</span>
                        <span class="n">billing_address_2</span> <span class="p">=</span> <span class="s">"3rd Floor"</span><span class="p">,</span>
                        <span class="n">billing_city</span> <span class="p">=</span> <span class="s">"New York"</span><span class="p">,</span>
                        <span class="n">billing_state</span> <span class="p">=</span> <span class="s">"NY"</span><span class="p">,</span>
                        <span class="n">billing_zip</span> <span class="p">=</span> <span class="s">"10016"</span>
                    <span class="p">},</span>
                    <span class="n">customer</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">first_name</span> <span class="p">=</span> <span class="s">"John"</span><span class="p">,</span>
                        <span class="n">last_name</span> <span class="p">=</span> <span class="s">"Smith"</span><span class="p">,</span>
                        <span class="n">company_name</span> <span class="p">=</span> <span class="s">"CBA Stakehouse"</span><span class="p">,</span>
                        <span class="n">job_title</span> <span class="p">=</span> <span class="s">"Owner"</span><span class="p">,</span>
                        <span class="n">email_address</span> <span class="p">=</span> <span class="s">"john@cbastakehouse.com"</span><span class="p">,</span>
                        <span class="n">web_address</span> <span class="p">=</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="p">,</span>
                        <span class="n">phone_number</span> <span class="p">=</span> <span class="s">"(917) 479 1349"</span><span class="p">,</span>
                        <span class="n">phone_ext</span> <span class="p">=</span> <span class="s">"5478"</span><span class="p">,</span>
                        <span class="n">phone_type</span> <span class="p">=</span> <span class="s">"M"</span>
                    <span class="p">},</span>
                    <span class="n">schedule</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">schedule_type</span> <span class="p">=</span> <span class="s">"S"</span><span class="p">,</span>
                        <span class="n">specific_dates_schedule</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">specific_dates</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span>
                            <span class="p">{</span>
                                <span class="s">"2016-02-01"</span><span class="p">,</span>
                                <span class="s">"2016-10-31"</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
                <span class="p">};</span>

                <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">recurringBill</span><span class="p">);</span>

                <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                <span class="p">{</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span><span class="c1">//You return this response.
</span>                    <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span><span class="c1">//Created
</span>                        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="s">"Location"</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                                <span class="kt">int</span> <span class="n">lastSlash</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span>
                                <span class="kt">string</span> <span class="n">transactionId</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">lastSlash</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Recurring Billing Id: "</span> <span class="p">+</span> <span class="n">transactionId</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10005</span><span class="p">,</span><span class="w">
    </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"base_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">72.34</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"shipping_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.87</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.23</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gym stuff monthly delivered."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoice_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FF7845742ARG"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"po_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What is a PO number?"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"card_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"card_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4055011111111111"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"card_expiry_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201709"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"154 E 34th St"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fifth Floor"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10016"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adam"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Capital Inc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"job_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"President"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adam@smith.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"web_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://capitalinc.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(917) 479 1349"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5702"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"schedule_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"specific_dates_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"specific_dates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"2015-10-01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"2016-09-30"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/authonly"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>



    <span class="n">merchant</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"organization_id"</span><span class="o">=&gt;</span><span class="mi">10074</span><span class="p">,</span>
                <span class="s2">"terminal_id"</span><span class="o">=&gt;</span><span class="mi">134</span>
                <span class="p">}</span>

    <span class="c1"># bill data</span>
    <span class="n">bill</span><span class="o">=</span> <span class="p">{</span>
            <span class="s2">"base_amount"</span><span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">,</span>
            <span class="s2">"shipping_amount"</span><span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">,</span>
            <span class="s2">"tax_amount"</span><span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">,</span>
            <span class="s2">"note"</span><span class="o">=&gt;</span><span class="s2">"this a sample note"</span><span class="p">,</span>
            <span class="s2">"invoice_number"</span><span class="o">=&gt;</span><span class="s2">"this is an invoice"</span><span class="p">,</span>
            <span class="s2">"po_number"</span><span class="o">=&gt;</span><span class="s2">"a test po number"</span>
            <span class="p">}</span>
    <span class="c1">#Credit card data</span>
    <span class="n">card_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"card_number"</span><span class="o">=&gt;</span><span class="s2">"4055011111111111"</span><span class="p">,</span>
                <span class="s2">"card_expiry_date"</span><span class="o">=&gt;</span><span class="s2">"202012"</span><span class="p">,</span>
                <span class="s2">"cvv_data"</span><span class="o">=&gt;</span><span class="s2">"999"</span><span class="p">,</span>
                <span class="s2">"billing_address_1"</span><span class="o">=&gt;</span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span>
                <span class="s2">"billing_address_2"</span><span class="o">=&gt;</span><span class="s2">"On the corner"</span><span class="p">,</span>
                <span class="s2">"billing_city"</span><span class="o">=&gt;</span><span class="s2">"San Rafael"</span><span class="p">,</span>
                <span class="s2">"billing_state"</span><span class="o">=&gt;</span><span class="s2">"CA"</span><span class="p">,</span>
                <span class="s2">"billing_zip"</span><span class="o">=&gt;</span><span class="s2">"99997-0003"</span>
                <span class="p">}</span>
    <span class="c1"># Customer data</span>
    <span class="n">customer</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"first_name"</span><span class="o">=&gt;</span><span class="s2">"First"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="o">=&gt;</span><span class="s2">"Contact"</span><span class="p">,</span>
                <span class="s2">"company_name"</span><span class="o">=&gt;</span><span class="s2">"Payhub Inc"</span><span class="p">,</span>
                <span class="s2">"job_title"</span><span class="o">=&gt;</span><span class="s2">"Software Engineer"</span><span class="p">,</span>
                <span class="s2">"email_address"</span><span class="o">=&gt;</span><span class="s2">"jhon@company.com"</span><span class="p">,</span>
                <span class="s2">"web_address"</span><span class="o">=&gt;</span><span class="s2">"http://payhub.com"</span><span class="p">,</span>
                <span class="s2">"phone_number"</span><span class="o">=&gt;</span><span class="s2">"(415) 479 1349"</span><span class="p">,</span>
                <span class="s2">"phone_ext"</span><span class="o">=&gt;</span><span class="s2">"123"</span><span class="p">,</span>
                <span class="s2">"phone_type"</span><span class="o">=&gt;</span><span class="s2">"M"</span>
                <span class="p">}</span>


    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"merchant"</span><span class="o">=&gt;</span><span class="n">merchant</span><span class="p">,</span><span class="s2">"bill"</span><span class="o">=&gt;</span><span class="n">bill</span><span class="p">,</span><span class="s2">"customer"</span><span class="o">=&gt;</span><span class="n">customer</span><span class="p">,</span><span class="s2">"card_data"</span><span class="o">=&gt;</span><span class="n">card_data</span><span class="p">}</span>

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">POST</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">https://api.payhub.com/api/v2/recurring-bill</code></p>

<h2 id="elements">Elements</h2>

<h3 id="recurringbillinput">RecurringBillInput
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>customer</td>
<td>CustomerInput</td>
<td>Customer detail.</td>
</tr>
<tr>
<td>card_data</td>
<td>CardDataInput</td>
<td>Card data to use in the bill.</td>
</tr>
<tr>
<td>merchant</td>
<td>MerchantInput</td>
<td>Merchant detail.</td>
</tr>
<tr>
<td>bill</td>
<td>BillInput</td>
<td>Bill-related data to use in the recurring bill.</td>
</tr>
<tr>
<td>schedule</td>
<td>ScheduleInput</td>
<td>Schedule detail.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>
<pre><code class="highlight java"><span class="o">{</span><span class="err">'</span><span class="n">order</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="err">'</span><span class="n">invoice</span><span class="sc">':'</span><span class="n">a123</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">lines</span><span class="err">'</span><span class="o">:</span> <span class="o">[{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">1</span><span class="err">'</span><span class="o">},</span> <span class="o">{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">2</span><span class="err">'</span><span class="o">}]}}</span>
</code></pre>

<h3 id="customerinput">CustomerInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>The first name of the customer.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The last name of the customer.</td>
</tr>
<tr>
<td>company_name</td>
<td>string, optional</td>
<td>The company name of the customer.</td>
</tr>
<tr>
<td>job_title</td>
<td>string, optional</td>
<td>The job title of the customer.</td>
</tr>
<tr>
<td>email_address</td>
<td>string, optional</td>
<td>The email address of the customer. <br>The email address must be syntactically correct. If email address is not specified, you must provide a phone_number to identify the customer.</td>
</tr>
<tr>
<td>web_address</td>
<td>string, optional</td>
<td>The web address of the customer. <br>The web address if specified, must be a syntactically valid web address.</td>
</tr>
<tr>
<td>phone_number</td>
<td>string, optional</td>
<td>The phone number of the customer. <br>The phone number must be syntactically correct. For example: (415) 234 5678, or 4152345678, or (415) 234-5678. <br>If phone number is not specified, you must provide an email_address to identify the customer.</td>
</tr>
<tr>
<td>phone_ext</td>
<td>string, optional</td>
<td>The phone extension number of the customer.</td>
</tr>
<tr>
<td>phone_type</td>
<td>string, optional</td>
<td>The type of the phone number: [&lsquo;H&rsquo; or &#39;W&rsquo; or &rsquo;M&rsquo;]: H (Home), W (Work), M (Mobile).</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>
<pre><code class="highlight java"><span class="o">{</span><span class="err">'</span><span class="n">order</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="err">'</span><span class="n">invoice</span><span class="sc">':'</span><span class="n">a123</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">lines</span><span class="err">'</span><span class="o">:</span> <span class="o">[{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">1</span><span class="err">'</span><span class="o">},</span> <span class="o">{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">2</span><span class="err">'</span><span class="o">}]}}</span>
</code></pre>

<h3 id="metadata">MetaData</h3>

<p>No parameters</p>

<h3 id="carddatainput">CardDataInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>card_expiry_date</td>
<td>string</td>
<td>The card expiry date in YYYYMM format.</td>
</tr>
<tr>
<td>tokenized_card</td>
<td>string, optional</td>
<td>This is a 16 character PayHub-specific tokenized string representing the card number. <br>The value for the given customer and credit card can be obtained by examining the lastRecurringBillResponse.billingReferences.tokenizedCard by accessing the link to the bill that was successfully created. It is safer (and recommended) for the third party client to store and use this string in any future requests for the same customer. <br>This value is required if the &#39;card_number&rsquo; property is not present in the request.</td>
</tr>
<tr>
<td>card_number</td>
<td>string, optional</td>
<td>This is a 16 character card number. <br>This value is required if the &#39;tokenized_card&rsquo; property is not present in the request. <br> <strong>Note:</strong> The card number is not stored by the API in plain text - the response will contain a tokenized card number that should always be used in future requests, (for the same Customer) in place of this property.</td>
</tr>
<tr>
<td>billing_address_1</td>
<td>string, optional</td>
<td>The billing street address of the customer.</td>
</tr>
<tr>
<td>billing_address_2</td>
<td>string, optional</td>
<td>The additional billing street address of the customer.</td>
</tr>
<tr>
<td>billing_city</td>
<td>string, optional</td>
<td>The billing city of the customer.</td>
</tr>
<tr>
<td>billing_state</td>
<td>string, optional</td>
<td>The billing state Code of the customer. The codes are for the states in the USA. For example, CA, WI, NY, etc.</td>
</tr>
<tr>
<td>billing_zip</td>
<td>string, optional</td>
<td>The billing zip code of the customer. The codes are for the states in the USA. <br>The code must be either 5 digits or 5 plus four separated by a &rsquo;-&rsquo;. <br>This value is required if the Merchant has the AVS flag turned on.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent the data in the client&rsquo;s domain, which can be associated with this entity.</td>
</tr>
</tbody></table>
<pre><code class="highlight java"><span class="o">{</span><span class="err">'</span><span class="n">order</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="err">'</span><span class="n">invoice</span><span class="sc">':'</span><span class="n">a123</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">lines</span><span class="err">'</span><span class="o">:</span> <span class="o">[{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">1</span><span class="err">'</span><span class="o">},</span> <span class="o">{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">2</span><span class="err">'</span><span class="o">}]}}</span>
</code></pre>

<h3 id="merchantinput">MerchantInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>The organization Id ([&#39;range[0-]&rsquo;]) of the merchant. <br>This Id must match the organization Id of the merchant that the passed Oauth Token is associated with.</td>
</tr>
<tr>
<td>terminal_id</td>
<td>integer</td>
<td>The Virtual Terminal Id ([&#39;range[0-]&rsquo;]) for 3rd Party API of the merchant.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>
<pre><code class="highlight java"><span class="o">{</span><span class="err">'</span><span class="n">order</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="err">'</span><span class="n">invoice</span><span class="sc">':'</span><span class="n">a123</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">lines</span><span class="err">'</span><span class="o">:</span> <span class="o">[{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">1</span><span class="err">'</span><span class="o">},</span> <span class="o">{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">2</span><span class="err">'</span><span class="o">}]}}</span>
</code></pre>

<h3 id="billinput">BillInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tax_amount</td>
<td>TransactionAmount, optional</td>
<td>The tax amount for the transaction. <br>This value will be included in the total amount charged.</td>
</tr>
<tr>
<td>po_number</td>
<td>string, optional</td>
<td>The purchase order number for the transaction.</td>
</tr>
<tr>
<td>base_amount</td>
<td>TransactionAmount</td>
<td>The Base amount of the recurring bill. <br> The total amount charged will be the sum of this amount and (any) &#39;shipping_amount&rsquo; and &#39;tax_amount&rsquo;.</td>
</tr>
<tr>
<td>shipping_amount</td>
<td>TransactionAmount, optional</td>
<td>The shipping amount for the transaction. <br>This will be included in the total amount charged.</td>
</tr>
<tr>
<td>invoice_number</td>
<td>string, optional</td>
<td>The invoice number for the transaction.</td>
</tr>
<tr>
<td>note</td>
<td>string, optional</td>
<td>A free format note for the transaction. <br>The note will be read by the Merchant.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain, which can be associated with this entity.</td>
</tr>
</tbody></table>
<pre><code class="highlight java"><span class="o">{</span><span class="err">'</span><span class="n">order</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="err">'</span><span class="n">invoice</span><span class="sc">':'</span><span class="n">a123</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">lines</span><span class="err">'</span><span class="o">:</span> <span class="o">[{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">1</span><span class="err">'</span><span class="o">},</span> <span class="o">{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">2</span><span class="err">'</span><span class="o">}]}}</span>
</code></pre>

<h3 id="transactionamount">TransactionAmount</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>Number</td>
<td>The amount expressed as a decimal number with at most two decimal places (example: 1.23),</td>
</tr>
<tr>
<td>currency</td>
<td>string, optional</td>
<td>The ISO 4217 currency code for this amount. <br>[&#39;USD&rsquo;]: Currently only &#39;USD&rsquo; is accepted.</td>
</tr>
</tbody></table>
<pre><code class="highlight java"><span class="o">{</span><span class="err">'</span><span class="n">order</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="err">'</span><span class="n">invoice</span><span class="sc">':'</span><span class="n">a123</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">lines</span><span class="err">'</span><span class="o">:</span> <span class="o">[{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">1</span><span class="err">'</span><span class="o">},</span> <span class="o">{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">2</span><span class="err">'</span><span class="o">}]}}</span>
</code></pre>

<h3 id="scheduleinput">ScheduleInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>specific_dates_schedule</td>
<td>SpecificDatesSchedule, optional</td>
<td>Required if the schedule_type is &rsquo;S&rsquo; (=&#39;Specific Dates&rsquo;).</td>
</tr>
<tr>
<td>weekly_schedule</td>
<td>WeeklySchedule, optional</td>
<td>Required if the schedule_type is &#39;W&rsquo; (=&#39;Weekly&rsquo;).</td>
</tr>
<tr>
<td>schedule_type</td>
<td>string</td>
<td>The type of schedule being set up, [&rsquo;M&rsquo; or &rsquo;D&rsquo; or &#39;Y&rsquo; or &#39;W&rsquo; or &rsquo;S&rsquo;]: &rsquo;M&rsquo; (=&#39;Monthly&rsquo;), &rsquo;D&rsquo; (=&#39;Daily&rsquo;), &#39;Y&rsquo; (=&#39;Yearly&rsquo;), &#39;W&rsquo; (=&#39;Weekly&rsquo;), S=Specific Dates.</td>
</tr>
<tr>
<td>bill_generation_interval</td>
<td>integer, optional</td>
<td>The interval between bills where the unit is dependent on the value of the schedule_type (example: if the schedule_type is &#39;W&rsquo; and this field is 3, the bill will recur every three weeks). <br>Applicable to schedule_typeof &rsquo;M&rsquo; (=&#39;Monthly&rsquo;), &rsquo;D&rsquo; (=&#39;Daily&rsquo;), &#39;Y&rsquo; (=&#39;Yearly&rsquo;), and &#39;W&rsquo; (=&#39;Weekly&rsquo;).</td>
</tr>
<tr>
<td>monthly_schedule</td>
<td>MonthlySchedule, optional</td>
<td>Required if the schedule_type is &rsquo;M&rsquo; (=&#39;Monthly&rsquo;).</td>
</tr>
<tr>
<td>schedule_start_and_end</td>
<td>ScheduleStartAndEnd, optional</td>
<td>Required if the schedule_type is not &rsquo;S&rsquo; ( not &#39;Specific Dates&rsquo;).</td>
</tr>
<tr>
<td>yearly_schedule</td>
<td>YearlySchedule, optional</td>
<td>Required if the schedule_type is &#39;Y&rsquo; (=&#39;Yearly&rsquo;).</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>
<pre><code class="highlight java"><span class="o">{</span><span class="err">'</span><span class="n">order</span><span class="err">'</span><span class="o">:</span> <span class="o">{</span><span class="err">'</span><span class="n">id</span><span class="err">'</span><span class="o">:</span> <span class="mi">1</span><span class="o">,</span> <span class="err">'</span><span class="n">invoice</span><span class="sc">':'</span><span class="n">a123</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">lines</span><span class="err">'</span><span class="o">:</span> <span class="o">[{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">1</span><span class="err">'</span><span class="o">},</span> <span class="o">{</span><span class="err">'</span><span class="n">item</span><span class="err">'</span><span class="o">:</span> <span class="err">'</span><span class="n">part</span> <span class="mi">2</span><span class="err">'</span><span class="o">}]}}</span>
</code></pre>

<h3 id="specificdatesschedule">SpecificDatesSchedule</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>specific_dates</td>
<td>array[string]</td>
<td>An array of specific dates on which the bill should recur. The dates should be in the YYYY-MM-DD format. There must be at least one date specified and all dates must be later than today&rsquo;s date.</td>
</tr>
</tbody></table>

<h3 id="weeklyschedule">WeeklySchedule</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>weekly_bill_days</td>
<td>array[string]</td>
<td>The day(s) of week on which the weekly bill recurs. The array must have at least one entry and each entry must be the first three characters of the day name, as in &#39;SUN&rsquo;, and &#39;SAT&rsquo;.</td>
</tr>
</tbody></table>

MonthlySchedule
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>monthly_type</td>
<td>string</td>
<td>[&#39;O&rsquo; or &#39;E&rsquo;]: Determines the day(s) of the month on which the bill will recur. <br>Valid values are &#39;O&rsquo; (=&#39;On the&rsquo; - also specify monthly_on_the_day_of_week_in_month and the monthly_day_of_week) and &#39;E&rsquo; (=&#39;Each&rsquo; - also specify monthly_each_days).</td>
</tr>
<tr>
<td>monthly_each_days</td>
<td>array[integer], optional</td>
<td>An array of integers that must have at least one entry and each entry must be in the range between 1 and 32 where a &#39;1&rsquo; means &#39;first day of month&rsquo;, a &#39;2&rsquo; means &#39;second day of month and so on. An entry of &#39;32&rsquo; means &#39;last day of month&rsquo;. <br>This value is applicable to monthly_type of &#39;E&rsquo; (=&#39;Each&rsquo;).</td>
</tr>
<tr>
<td>monthly_on_the_day_of_week_in_month</td>
<td>integer, optional</td>
<td>A value ([&#39;range[1-5]&rsquo;]) of 1 means &#39;first of month&rsquo;, 2 means &#39;second of month&rsquo; and so on, with a value of 5 meaning &#39;last of month&rsquo;. Must be specified in combination with monthly_day_of_week which supplies the day of week (Monday, Tuesday, etc.) that this applies to. <br>This value is applicable to monthly_type of &#39;O&rsquo; (=&#39;On the&rsquo;).</td>
</tr>
<tr>
<td>monthly_day_of_week</td>
<td>integer, optional</td>
<td>The day of week ([&#39;range[1-7]&rsquo;]) on which the bill recurs, where 1 is Sunday and 7 is Saturday. <br>The value must be specified in combination with monthly_on_the_day_of_week_in_month which supplies the &#39;position&rsquo; (First, Second, etc.) of the day in the month (First Monday, Second Friday, Last Saturday, etc.). <br>This value is applicable to monthly_type of &#39;O&rsquo; (=&#39;On the&rsquo;).</td>
</tr>
</tbody></table>

<h3 id="schedulestartandend">ScheduleStartAndEnd</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>string, optional</td>
<td>The date to start the schedule in YYYY-MM-DD format. <br>The value is required if the schedule_type is &rsquo;M&rsquo; (=&#39;Monthly&rsquo;), &rsquo;D&rsquo; (=&#39;Daily&rsquo;), or &#39;W&rsquo; (=&#39;Weekly&rsquo;).</td>
</tr>
<tr>
<td>end_date</td>
<td>string, optional</td>
<td>The date to end the schedule in YYYY-MM-DD format. <br>The value is applicable to end_date_type equal to &#39;O&rsquo; (=&#39;End On date&rsquo;).</td>
</tr>
<tr>
<td>end_date_type</td>
<td>string, optional</td>
<td>Determines the date on which the schedule ends. <br>The values ([&#39;N&rsquo; or &rsquo; A&rsquo; or &rsquo; O&rsquo;]:) can be &#39;N&rsquo; (=&#39;Never&rsquo;), &#39;A&rsquo; (=&#39;After a number of bills&rsquo; - you must also specify a end_after_bill_count), or &#39;O&rsquo; (=&#39;On or no later than a specific date&rsquo; - you must also specify a end_date). If not present, then &#39;N&rsquo; (=&#39;Never&rsquo;) is assumed.</td>
</tr>
<tr>
<td>end_after_bill_count</td>
<td>integer, optional</td>
<td>The number of bills before ending the schedule. Applicable to end_date_type equal to &#39;A&rsquo; (=&#39;After a number of bills&rsquo;).</td>
</tr>
</tbody></table>

YearlySchedule
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>year_to_start</td>
<td>string</td>
<td>The year (in YYYY format) in which the schedule starts. <br>You must also specify yearly_bill_on_month_number and yearly_bill_on_day_of_month.</td>
</tr>
<tr>
<td>yearly_bill_on_day_of_month</td>
<td>integer</td>
<td>The month number ( [&#39;range[1-12]&rsquo;]) on which the bill will recur, where 1 is January and 12 is December. Must be specified in combination with year_to_start and yearly_bill_on_day_of_month.</td>
</tr>
<tr>
<td>yearly_bill_on_day_of_month</td>
<td>string</td>
<td>The day of the month ([&#39;range[1-31]&rsquo;]) on which the yearly bill will recur, where 1 is the 1st, 2 is the 2nd, etc. <br>If you specify a day of month that is invalid for the month specified by yearly_bill_on_month_number, then the last day of the month is used. Must be specified in combination with year_to_start and yearly_bill_on_month_number.</td>
</tr>
</tbody></table>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
</span><span class="s2">"merchant"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="s2">"organization_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10005</span><span class="p">,</span><span class="w">
 </span><span class="s2">"terminal_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">  
 </span><span class="p">},</span><span class="w">

</span><span class="s2">"bill"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="s2">"base_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

 </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">72.34</span><span class="w">
 </span><span class="p">},</span><span class="w">
</span><span class="s2">"shipping_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

 </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3.87</span><span class="w">
 </span><span class="p">},</span><span class="w">
</span><span class="s2">"tax_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

 </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7.23</span><span class="w">
 </span><span class="p">},</span><span class="w">
</span><span class="s2">"note"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Gym stuff monthly delivered."</span><span class="p">,</span><span class="w">

 </span><span class="s2">"invoice_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FF7845742ARG"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"po_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"What is a PO number?"</span><span class="w">
</span><span class="p">},</span><span class="w">

</span><span class="s2">"card_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="s2">"card_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4055011111111111"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"card_expiry_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"201709"</span><span class="p">,</span><span class="w">

 </span><span class="s2">"billing_address_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"154 E 34th St"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"billing_address_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Fifth Floor"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"billing_city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"billing_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"billing_zip"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"10016"</span><span class="w">

 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="s2">"first_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Adam"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"last_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"company_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Capital Inc"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"job_title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"President"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"email_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"adam@smith.com"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"web_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://capitalinc.com"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"phone_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"(917) 479 1349"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"phone_ext"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"5702"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"phone_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"W"</span><span class="w">

 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"schedule"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="s2">"schedule_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w">

 </span><span class="s2">"specific_dates_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
 </span><span class="s2">"specific_dates"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"2015-10-01"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2016-09-30"</span><span class="w"> </span><span class="p">]</span><span class="w">
 </span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="response-messages">Response Messages</h3>

<table><thead>
<tr>
<th>Code</th>
<th>Meaning</th>
<th>Sample code</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>(not returned)</td>
<td><code class="prettyprint">ResourceSupport { links (array[Link], optional) } Link { templated (boolean, optional), rel (string, optional), href (string, optional) }</code></td>
</tr>
<tr>
<td>201</td>
<td>The recurring bill was created - use the link in the response&rsquo;s &#39;Location&rsquo; Header to view the Recurring Bill.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>400</td>
<td>Bad request due to incorrect or invalid data passed.</td>
<td><code class="prettyprint">RestErrorStructure { errors ( array[RestError], optional)} RestError {   status ( string, optional) = [&#39;100&#39; or &#39;101&#39; or &#39;102&#39; or &#39;103&#39; or &#39;200&#39; or &#39;201&#39; or &#39;202&#39; or &#39;203&#39; or &#39;204&#39; or &#39;205&#39; or &#39;206&#39; or &#39;207&#39; or &#39;208&#39; or &#39;226&#39; or &#39;300&#39; or &#39;301&#39; or &#39;302&#39; or &#39;302&#39; or &#39;303&#39; or &#39;304&#39; or &#39;305&#39; or &#39;307&#39; or &#39;308&#39; or &#39;400&#39; or &#39;401&#39; or &#39;402&#39; or &#39;403&#39; or &#39;404&#39; or &#39;405&#39; or &#39;406&#39; or &#39;407&#39; or &#39;408&#39; or &#39;409&#39; or &#39;410&#39; or &#39;411&#39; or &#39;412&#39; or &#39;413&#39; or &#39;414&#39; or &#39;415&#39; or &#39;416&#39; or &#39;417&#39; or &#39;418&#39; or &#39;419&#39; or &#39;420&#39; or &#39;421&#39; or &#39;422&#39; or &#39;423&#39; or &#39;424&#39; or &#39;426&#39; or &#39;428&#39; or &#39;429&#39; or &#39;431&#39; or &#39;500&#39; or &#39;501&#39; or &#39;502&#39; or &#39;503&#39; or &#39;504&#39; or &#39;505&#39; or &#39;506&#39; or &#39;507&#39; or &#39;508&#39; or &#39;509&#39; or &#39;510&#39; or &#39;511&#39;]: The Http Status Code, code ( string, optional), location ( string, optional), reason ( string, optional), severity ( string, optional) }</code></td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized. You do not have permission to perform this operation. Make sure you entered a valid API Key at the top of the page.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden. The server does not permit you to use this URI.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>500</td>
<td>Internal server error due to encoding the data, or to a PayHub server failure. Contact PayHub.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
</tbody></table>

<h2 id="get">Get</h2>

<p>You can also send a GET  to https://api.payhub.com/api/v2/recurring-bill to list all recurring bills and associated operations in compact form.</p>

<p>The response will look like:</p>
<pre><code class="highlight csharp"><span class="n">Resources</span><span class="err">«</span><span class="kt">object</span><span class="err">»</span> <span class="p">{</span>
<span class="nf">content</span> <span class="p">(</span><span class="n">Collection</span><span class="err">«</span><span class="kt">object</span><span class="err">»</span><span class="p">,</span> <span class="n">optional</span><span class="p">),</span>
<span class="nf">links</span> <span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">Link</span><span class="p">],</span> <span class="n">optional</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">Collection</span><span class="err">«</span><span class="kt">object</span><span class="err">»</span> <span class="p">{</span>
<span class="nf">empty</span> <span class="p">(</span><span class="n">boolean</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">Link</span> <span class="p">{</span>
<span class="nf">templated</span> <span class="p">(</span><span class="n">boolean</span><span class="p">,</span> <span class="n">optional</span><span class="p">),</span>
<span class="nf">rel</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="n">optional</span><span class="p">),</span>
<span class="nf">href</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

        <!--
        -->



      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
