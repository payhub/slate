<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PayHub API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["java","php","csharp","ruby","json"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.jpg" />
        <div class="lang-selector">
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="csharp">CSharp</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="json">Json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/payhub/payhubws-public-sdk'>SDK Download</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="payhub-gateway">PayHub Gateway</h1>

          <h1 id="authentication">Authentication</h1>

<h2 id="introduction">Introduction</h2>

<p>The purpose of this document is to provide you with information on how you can get started using PayHub RESTful Web Services to access certain resources associated with a Merchant&rsquo;s PayHUb account. PayHub&rsquo;s RESTfulWeb Services allow you and your applications to act on a Merchant&rsquo;s behalf to do useful things like:</p>

<ul>
<li>Create a Sale transaction (POST a sale resource).</li>
<li>Create a Void transaction (POST a void resource).</li>
<li>Create a Refund transaction (POST a refund resource).</li>
<li>Create a Recurring Bill (POST a recurring-bill resource).</li>
<li>Update the status of a Recurring Bill, (PATCH the recurring-bill-status property of a RecurringBill resource).</li>
<li>Retrieve the schedule(s) you used to create a Recurring Bill (GET one or more schedule
resources).</li>
<li>Retrieve your Merchants&rsquo; Customer information (GET one or more customer resources), for those
Customers that you have historically created through using the service when you posted a Sale or a Recurring Bill.</li>
<li>Retrieve information about the Merchants whose resources you have historically managed (GET one or more merchant resources).</li>
<li>Retrieve your Merchants&rsquo; tokenized Card Data (GET one or more carddata resources), for the Sales or a Recurring Bills you have historically created.</li>
<li>Retrieve the bill-related data, such as transaction amount, (GET one or more bill resources), for the Sales or a Recurring Bills you have historically created.</li>
<li>Attach your own arbitrary JSON data to most of the resources you have created (PUT
metadata &lsquo;forResource&rsquo;)</li>
<li>Perform certain specialized search queries on the resources you have created.</li>
<li>Supply parameters to control paging and sorting (ascending or descending on a top level
property) on GETs that return multiple resources.</li>
<li>Query the endpoint we provide and use the hypermedia-linked feature to discover resources from within your client application.</li>
<li>Obtain, store, and use PayHub&rsquo;s unique numeric identifiers for certain resources such as Customer Id and Recurring Bill Id.</li>
</ul>

<h2 id="how-we-use-oauth-2.0-to-assure-security">How we Use OAuth 2.0 to Assure Security</h2>

<p>Oauth 2.0 is an industry-standard, and widely accepted, authentication and authorization mechanism for providing third party applications and clients secure access to a user&rsquo;s resources hosted service providers.</p>

<p>Typically, the third party (or client) is granted access to a user&rsquo;s resources hosted by a service provider, using a unique token generated by the service provider at the time the user authorizes the client access to their resources. Think of the situation where you authorize a web site to register you using your identity hosted on Facebook (you click the &#39;log in with Facebook&rsquo; button on the web site and authorize the site to access your information on Facebook).</p>

<p>The PayHub RESTful Web Services currently uses OAuth 2.0 with:</p>

<ul>
<li>You as the Client</li>
<li>Merchants as the Users (who has an account at PayHub)</li>
<li>And PayHub as the Service Provider</li>
</ul>

<p>You can think of the OAuth 2.0 token as linking the Client to the Merchant via the PayHub Service.</p>

<p>As a new third party integrator, you will be assigned a unique &#39;Client Id&rsquo; that you will use when requesting access to a Merchant&rsquo;s resources.</p>

<p>We are current working on a way for you to automatically obtain an OAuth 2.0 Token for a Merchant without the need for the Merchant or PayHub Support to first visit the PayHub Virtual Terminal to generate the token for your Client Id.</p>

<p>Once you have your token, it is very important that you treat this as you would a user and password: never reveal it to anyone other than authorized developers, and never reference it in publicly available source code such as publicly exposed JavaScript or HTML pages.</p>

<h2 id="using-your-oauth-2.0-token-in-calls-to-payhub-restful-web-services">Using Your OAuth 2.0 Token in calls to PayHub RESTful Web Services</h2>

<p>Once you have the token, you can use it to authenticate your application to the PayHub RESTful Web Service by using the OAuth 2.0 standard HTTP Authorization Header structured as in this example:</p>

<p><code>
Header Field Name: Authorization<br>
Header Value: Bearer [your-token-here]
</code></p>

<p>It is important to note that, although this token authorizes you to invoke the PayHub Restful Web Services on behalf of a particular Merchant:</p>

<ol>
<li>You will also need to know the Merchant&rsquo;s unique Organization Id and 3rd Party Terminal Id when you POST a Recurring Bill and a Sale. You should have been supplied with this information when you received the token.</li>
<li>You can use any of your valid OAuth 2.0 Tokens when performing GETs to your Merchants&rsquo; PayHub resources. A GET will retrieve all resources of the requested type (for example Customer) regardless of Merchant. You can filter by Merchant by using the
supplied findByMerchantOrganizationId search functions.
￼
￼</li>
</ol>

          <h1 id="sale-transaction">Sale Transaction</h1>

<pre><code class="highlight java"><span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sale</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">RunSale</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
      <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
      <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/sale"</span><span class="o">;</span>

      <span class="n">JSONObject</span> <span class="n">merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"organization_id"</span><span class="o">,</span> <span class="s">"10005"</span><span class="o">);</span><span class="c1">//You put your org id here</span>
        <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"terminal_id"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span><span class="c1">//You put your terminal id</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"merchant"</span><span class="o">,</span> <span class="n">merchant</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">bill</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">JSONObject</span> <span class="n">base_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">base_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"1275"</span><span class="o">);</span><span class="c1">//$12.75</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"base_amount"</span><span class="o">,</span> <span class="n">base_amount</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">shipping_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">shipping_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"725"</span><span class="o">);</span><span class="c1">//$7.25</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"shipping_amount"</span><span class="o">,</span> <span class="n">shipping_amount</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">tax_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">tax_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"113"</span><span class="o">);</span><span class="c1">//$1.13</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"tax_amount"</span><span class="o">,</span> <span class="n">tax_amount</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"note"</span><span class="o">,</span> <span class="s">"Shipped as a gift"</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"invoice_number"</span><span class="o">,</span> <span class="s">"4645782"</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"po_number"</span><span class="o">,</span> <span class="s">"1234-654321"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bill"</span><span class="o">,</span> <span class="n">bill</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">card_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_number"</span><span class="o">,</span> <span class="s">"5466410004374507"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_expiry_date"</span><span class="o">,</span> <span class="s">"201809"</span><span class="o">);</span><span class="c1">// September 2018</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_1"</span><span class="o">,</span> <span class="s">"237 E 33rd Street"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_2"</span><span class="o">,</span> <span class="s">"3rd Floor"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_city"</span><span class="o">,</span> <span class="s">"New York"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_zip"</span><span class="o">,</span> <span class="s">"10016"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_state"</span><span class="o">,</span> <span class="s">"NY"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cvv_data"</span><span class="o">,</span> <span class="s">"998"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cvv_code"</span><span class="o">,</span> <span class="s">"Y"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_data"</span><span class="o">,</span> <span class="n">card_data</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"company_name"</span><span class="o">,</span> <span class="s">"CBA Steakhouse"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"job_title"</span><span class="o">,</span> <span class="s">"Owner"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"email_address"</span><span class="o">,</span> <span class="s">"john@cbasteakhouse.com"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"web_address"</span><span class="o">,</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_number"</span><span class="o">,</span> <span class="s">"(917) 479 1349"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_ext"</span><span class="o">,</span> <span class="s">"5478"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_type"</span><span class="o">,</span> <span class="s">"M"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"customer"</span><span class="o">,</span> <span class="n">customer</span><span class="o">);</span>

      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"record_format"</span><span class="o">,</span> <span class="s">"CC"</span><span class="o">);</span>

      <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

      <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
      <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span> <span class="c1">//You return this response and work with it</span>

      <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
      <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">json</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">cnt</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'&lt;'</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span>
            <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
                <span class="o">||</span> <span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">" "</span><span class="o">)</span> <span class="o">?</span> <span class="s">"{\"MESSAGE\":\"NO RESPONSE...\"}"</span>
                <span class="o">:</span> <span class="n">json</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getReasonPhrase</span><span class="o">();</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Created"</span><span class="o">)){</span>
        <span class="n">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Header</span> <span class="n">header</span> <span class="o">:</span> <span class="n">headers</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)){</span>
            <span class="n">URL</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
            <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getPath</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">lastSlash</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">transactionId</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastSlash</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Transaction Id: "</span> <span class="o">+</span> <span class="n">transactionId</span> <span class="o">);</span> <span class="c1">//Last resource of the path</span>
          <span class="o">}</span>

        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonResponseObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>


    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
  <span class="nv">$trans_type</span> <span class="o">=</span> <span class="s2">"sale"</span><span class="p">;</span>
  <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
  <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="c1">//Defining the Web Service URL
</span>  <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/</span><span class="nv">$trans_type</span><span class="s2">"</span><span class="p">;</span>


  <span class="c1">//Defining data for the SALE transaction
</span>  <span class="c1">// Merchant data (obtained from the payHub Virtual Terminal (3rd party integration)
</span>  <span class="nv">$organization_id</span> <span class="o">=</span> <span class="mi">10002</span><span class="p">;</span>
  <span class="nv">$terminal_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="nv">$oauth_token</span> <span class="o">=</span> <span class="s2">"22fe3c69-db70-4a8c-9aed-9a33ebb1e9b4"</span><span class="p">;</span>
  <span class="c1">// bill data
</span>  <span class="nv">$base_amount</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
  <span class="nv">$shipping_amount</span> <span class="o">=</span> <span class="mf">1.23</span><span class="p">;</span>
  <span class="nv">$tax_amount</span> <span class="o">=</span> <span class="mf">1.00</span><span class="p">;</span>
  <span class="nv">$note</span> <span class="o">=</span> <span class="s2">"this a sample note"</span><span class="p">;</span>
  <span class="nv">$invoice_number</span> <span class="o">=</span> <span class="s2">"a-00240"</span><span class="p">;</span>
  <span class="nv">$po_number</span> <span class="o">=</span> <span class="s2">"56"</span><span class="p">;</span>
  <span class="c1">//Credit card data
</span>  <span class="nv">$card_number</span> <span class="o">=</span> <span class="s2">"5466410004374507"</span><span class="p">;</span>
  <span class="nv">$card_expiry_date</span> <span class="o">=</span> <span class="s2">"202011"</span><span class="p">;</span>
  <span class="nv">$cvv_data</span> <span class="o">=</span> <span class="s2">"998"</span><span class="p">;</span>
  <span class="nv">$billing_address_1</span> <span class="o">=</span> <span class="s2">"2350 Kerner Blvd"</span><span class="p">;</span>
  <span class="nv">$billing_address_2</span> <span class="o">=</span> <span class="s2">"On the corner"</span><span class="p">;</span>
  <span class="nv">$billing_city</span> <span class="o">=</span> <span class="s2">"San Rafael"</span><span class="p">;</span>
  <span class="nv">$billing_state</span> <span class="o">=</span> <span class="s2">"CA"</span><span class="p">;</span>
  <span class="nv">$billing_zip</span> <span class="o">=</span> <span class="s2">"94901"</span><span class="p">;</span>
  <span class="c1">// Customer data
</span>  <span class="nv">$first_name</span> <span class="o">=</span> <span class="s2">"First"</span><span class="p">;</span>
  <span class="nv">$last_name</span> <span class="o">=</span> <span class="s2">"Contact"</span><span class="p">;</span>
  <span class="nv">$company_name</span> <span class="o">=</span> <span class="s2">"Payhub Inc"</span><span class="p">;</span>
  <span class="nv">$job_title</span> <span class="o">=</span> <span class="s2">"Software Engineer"</span><span class="p">;</span>
  <span class="nv">$email_address</span> <span class="o">=</span> <span class="s2">"jhon@company.com"</span><span class="p">;</span>
  <span class="nv">$web_address</span> <span class="o">=</span> <span class="s2">"http://payhub.com"</span><span class="p">;</span>
  <span class="nv">$phone_number</span> <span class="o">=</span> <span class="s2">"(415) 479 1349"</span><span class="p">;</span>
  <span class="nv">$phone_ext</span> <span class="o">=</span> <span class="s2">"123"</span><span class="p">;</span>
  <span class="nv">$phone_type</span> <span class="o">=</span> <span class="s2">"M"</span><span class="p">;</span>


  <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>  <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"merchant"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"organization_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$organization_id</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"terminal_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$terminal_id</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"bill"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"base_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$base_amount</span><span class="p">),</span>
    <span class="s2">"shipping_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$shipping_amount</span><span class="p">),</span>
    <span class="s2">"tax_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$tax_amount</span><span class="p">));</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"card_data"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"card_expiry_date"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_expiry_date</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"cvv_data"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$cvv_data</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_address_1"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_1</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"billing_address_2"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_2</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_city"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_city</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"billing_state"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_state</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_zip"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_zip</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span> <span class="p">[</span><span class="s2">"customer"</span><span class="p">]</span><span class="o">=</span>  <span class="k">array</span><span class="p">(</span><span class="s2">"first_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$first_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"last_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$last_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"company_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$company_name</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"job_title"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$job_title</span><span class="s2">"</span><span class="p">,</span><span class="s2">"email_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$email_address</span><span class="s2">"</span><span class="p">,</span><span class="s2">"web_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$web_address</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"phone_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_ext"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_ext</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_type"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_type</span><span class="s2">"</span><span class="p">);</span>

  <span class="c1">//Convert data from Array to JSON
</span>  <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

  <span class="c1">//Creating a CURL object to access the WS
</span>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
  <span class="c1">//Setting the address to connect to
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
  <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
  <span class="c1">//Setting data in JSON format
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
  <span class="c1">//Setting the proper header.
</span>  <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

  <span class="c1">//execute connection to the Web Service
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="c1">// get some data from the response
</span>  <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
  <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
  <span class="c1">//Get the header as string.
</span>  <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
  <span class="c1">//close connection to the Web Service
</span>  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

  <span class="c1">//Obtain the data from the sale recently created
</span>  <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
    <span class="c1">//find the url of the sale (Location header in the response)
</span>    <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
    <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
    <span class="c1">//Setting the proper header.
</span>    <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
    <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="c1">//execute connection to the Web Service
</span>    <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//close connection to the Web Service
</span>    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>    <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
    <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>    <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//There was an error with the WS
</span>  <span class="k">else</span><span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>

<pre><code class="highlight csharp"><span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PayHubSamples</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Sale</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RunSale</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/sale"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                <span class="n">var</span> <span class="n">sale</span> <span class="p">=</span> <span class="k">new</span>
                <span class="p">{</span>
                    <span class="n">merchant</span> <span class="p">=</span> <span class="k">new</span>
                     <span class="p">{</span>
                         <span class="n">organization_id</span> <span class="p">=</span> <span class="s">"10005"</span><span class="p">,</span>
                         <span class="n">terminal_id</span> <span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                     <span class="p">},</span>
                    <span class="n">bill</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">base_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"1275"</span> <span class="c1">//$12.75
</span>                        <span class="p">},</span>
                        <span class="n">shipping_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"725"</span> <span class="c1">//$7.25
</span>                        <span class="p">},</span>
                        <span class="n">tax_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"113"</span> <span class="c1">//$1.13
</span>                        <span class="p">},</span>
                        <span class="n">note</span> <span class="p">=</span> <span class="s">"Shipped as a gift"</span><span class="p">,</span>
                        <span class="n">invoice_number</span> <span class="p">=</span> <span class="s">"4645782"</span><span class="p">,</span>
                        <span class="n">po_number</span> <span class="p">=</span> <span class="s">"1234-654321"</span>
                    <span class="p">},</span>
                    <span class="n">card_data</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">card_number</span> <span class="p">=</span> <span class="s">"5466410004374507"</span><span class="p">,</span>
                        <span class="n">card_expiry_date</span> <span class="p">=</span> <span class="s">"201809"</span><span class="p">,</span> <span class="c1">//September 2018
</span>                        <span class="n">billing_address_1</span> <span class="p">=</span> <span class="s">"237 E 33rd Street"</span><span class="p">,</span>
                        <span class="n">billing_address_2</span> <span class="p">=</span> <span class="s">"3rd Floor"</span><span class="p">,</span>
                        <span class="n">billing_city</span> <span class="p">=</span> <span class="s">"New York"</span><span class="p">,</span>
                        <span class="n">billing_state</span> <span class="p">=</span> <span class="s">"NY"</span><span class="p">,</span>
                        <span class="n">billing_zip</span> <span class="p">=</span> <span class="s">"10016"</span><span class="p">,</span>
                        <span class="n">cvv_data</span> <span class="p">=</span> <span class="s">"998"</span><span class="p">,</span>
                        <span class="n">cvv_code</span> <span class="p">=</span> <span class="s">"Y"</span>
                    <span class="p">},</span>
                    <span class="n">customer</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">first_name</span> <span class="p">=</span> <span class="s">"John"</span><span class="p">,</span>
                        <span class="n">last_name</span> <span class="p">=</span> <span class="s">"Smith"</span><span class="p">,</span>
                        <span class="n">company_name</span> <span class="p">=</span> <span class="s">"CBA Stakehouse"</span><span class="p">,</span>
                        <span class="n">job_title</span> <span class="p">=</span> <span class="s">"Owner"</span><span class="p">,</span>
                        <span class="n">email_address</span> <span class="p">=</span> <span class="s">"john@cbastakehouse.com"</span><span class="p">,</span>
                        <span class="n">web_address</span> <span class="p">=</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="p">,</span>
                        <span class="n">phone_number</span> <span class="p">=</span> <span class="s">"(917) 479 1349"</span><span class="p">,</span>
                        <span class="n">phone_ext</span> <span class="p">=</span> <span class="s">"5478"</span><span class="p">,</span>
                        <span class="n">phone_type</span> <span class="p">=</span> <span class="s">"M"</span>
                    <span class="p">},</span>
                    <span class="n">record_format</span> <span class="p">=</span> <span class="s">"CC"</span>
                <span class="p">};</span>

                <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">sale</span><span class="p">);</span>

                <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                <span class="p">{</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span><span class="c1">//You return this response.
</span>                    <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                    <span class="p">{</span>
                        <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span><span class="c1">//Created
</span>                        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="s">"Location"</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                                <span class="kt">int</span> <span class="n">lastSlash</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span>
                                <span class="kt">string</span> <span class="n">transactionId</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">lastSlash</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Transaction Id: "</span> <span class="p">+</span> <span class="n">transactionId</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/sale"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>



    <span class="n">merchant</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"organization_id"</span><span class="o">=&gt;</span><span class="mi">10074</span><span class="p">,</span>
                <span class="s2">"terminal_id"</span><span class="o">=&gt;</span><span class="mi">134</span>
                <span class="p">}</span>

    <span class="c1"># bill data</span>
    <span class="n">bill</span><span class="o">=</span> <span class="p">{</span>
            <span class="s2">"base_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"shipping_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"tax_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"note"</span><span class="o">=&gt;</span><span class="s2">"this a sample note"</span><span class="p">,</span>
            <span class="s2">"invoice_number"</span><span class="o">=&gt;</span><span class="s2">"this is an invoice"</span><span class="p">,</span>
            <span class="s2">"po_number"</span><span class="o">=&gt;</span><span class="s2">"a test po number"</span>
    <span class="p">}</span>
    <span class="c1">#Credit card data</span>
    <span class="n">card_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"card_number"</span><span class="o">=&gt;</span><span class="s2">"4055011111111111"</span><span class="p">,</span>
                <span class="s2">"card_expiry_date"</span><span class="o">=&gt;</span><span class="s2">"202012"</span><span class="p">,</span>
                <span class="s2">"cvv_data"</span><span class="o">=&gt;</span><span class="s2">"999"</span><span class="p">,</span>
                <span class="s2">"billing_address_1"</span><span class="o">=&gt;</span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span>
                <span class="s2">"billing_address_2"</span><span class="o">=&gt;</span><span class="s2">"On the corner"</span><span class="p">,</span>
                <span class="s2">"billing_city"</span><span class="o">=&gt;</span><span class="s2">"San Rafael"</span><span class="p">,</span>
                <span class="s2">"billing_state"</span><span class="o">=&gt;</span><span class="s2">"CA"</span><span class="p">,</span>
                <span class="s2">"billing_zip"</span><span class="o">=&gt;</span><span class="s2">"99997-0003"</span>
                <span class="p">}</span>
    <span class="c1"># Customer data</span>
    <span class="n">customer</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"first_name"</span><span class="o">=&gt;</span><span class="s2">"First"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="o">=&gt;</span><span class="s2">"Contact"</span><span class="p">,</span>
                <span class="s2">"company_name"</span><span class="o">=&gt;</span><span class="s2">"Payhub Inc"</span><span class="p">,</span>
                <span class="s2">"job_title"</span><span class="o">=&gt;</span><span class="s2">"Software Engineer"</span><span class="p">,</span>
                <span class="s2">"email_address"</span><span class="o">=&gt;</span><span class="s2">"jhon@company.com"</span><span class="p">,</span>
                <span class="s2">"web_address"</span><span class="o">=&gt;</span><span class="s2">"http://payhub.com"</span><span class="p">,</span>
                <span class="s2">"phone_number"</span><span class="o">=&gt;</span><span class="s2">"(415) 479 1349"</span><span class="p">,</span>
                <span class="s2">"phone_ext"</span><span class="o">=&gt;</span><span class="s2">"123"</span><span class="p">,</span>
                <span class="s2">"phone_type"</span><span class="o">=&gt;</span><span class="s2">"M"</span>
    <span class="p">}</span>


    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"merchant"</span><span class="o">=&gt;</span><span class="n">merchant</span><span class="p">,</span><span class="s2">"bill"</span><span class="o">=&gt;</span><span class="n">bill</span><span class="p">,</span><span class="s2">"customer"</span><span class="o">=&gt;</span><span class="n">customer</span><span class="p">,</span><span class="s2">"card_data"</span><span class="o">=&gt;</span><span class="n">card_data</span><span class="p">}</span>

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre>

<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10002</span><span class="p">,</span><span class="w">
    </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"base_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"shipping_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.23</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.00</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoice_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"328"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"po_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample po number"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"card_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"card_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5466410004374507"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"card_expiry_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"202011"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 floor"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"San Rafael"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"94901"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cvv_data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"998"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Miguel"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payhub Inc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"job_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Software Engineer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msmith14567@payhub.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"web_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://payhub.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(415) 479 1349"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="introduction">Introduction</h2>

<p>This topic provides the information about the Sale transaction. Use a Sale transaction to charge a credit card.</p>

<p>Upon successful sale, you will receive an approval code. Once a sale transaction is settled, the money will be taken from the card holder&rsquo;s account and deposited to the merchant&rsquo;s account. This is the most common transaction type.</p>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">POST</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">POST https://api.payhub.com/api/v2/sale</code></p>

<h2 id="elements">Elements</h2>

<h3 id="merchant">merchant</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>The Organization Id of the Merchant. This must match the Organization Id of the Merchant that the passed Oauth Token is associated with.</td>
</tr>
<tr>
<td>terminal_id</td>
<td>integer</td>
<td>The Merchant&rsquo;s Virtual Terminal Id for 3rd Party API.</td>
</tr>
<tr>
<td>record_format</td>
<td>string, optional</td>
<td>To specify if the sale has to be made over a credit card, debit card or cash payment. If it´s not present, default value &ldquo;CREDIT_CARD&rdquo; is assumed. <br>Accepted values are: <ul><li>CASH_PAYMENT</li><li>CREDIT_CARD</li><li>DEBIT_CARD</li></ul></td>
</tr>
</tbody></table>

<h3 id="customer">customer</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>The first name of the customer.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The last name of the customer.</td>
</tr>
<tr>
<td>company_name</td>
<td>string, optional</td>
<td>The company name of the customer.</td>
</tr>
<tr>
<td>job_title</td>
<td>string, optional</td>
<td>The job title of the customer.</td>
</tr>
<tr>
<td>email_address</td>
<td>string, optional</td>
<td>The valid email address of the customer. The email address must be syntactically correct. If you do not specify the email address, you must provide a phone_number to identify the customer.</td>
</tr>
<tr>
<td>web_address</td>
<td>string, optional</td>
<td>The web address of the customer. The web address, if you specify, must be syntactically valid web address.</td>
</tr>
<tr>
<td>phone_number</td>
<td>string, optional</td>
<td>The phone number of the customer. The phone number must be syntactically correct. <br>For example, (415) 234 5678, or 4152345678, or (415) 234-5678. <br>If you do not specify the phone number, you must provide an email_address to identify the customer.</td>
</tr>
<tr>
<td>phone_ext</td>
<td>string, optional</td>
<td>The phone extension number of the customer.</td>
</tr>
<tr>
<td>phone_type</td>
<td>string, optional</td>
<td>The type ([&lsquo;H&rsquo; or &#39;W&rsquo; or &rsquo;M&rsquo;]) of the phone number: H (Home), W (Work), M (Mobile).</td>
</tr>
</tbody></table>

<h3 id="card_data">card_data</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tokenized_card</td>
<td>string, optional</td>
<td>This is the 16 character PayHub-specific tokenized string representing the card number. <br>The value for the given customer and credit card can be obtained by examining the last Sale by accessing the link to the card data that was successfully created. It is safer (and recommended) for the third party client to store and use this string in any future requests for the same customer.</td>
</tr>
<tr>
<td>card_number</td>
<td>string, optional</td>
<td>This is the 16 character card number. <br> The card number is not stored by the API in plain text. The response will contain a tokenized card number that should always be used in future requests, (for the same Customer) in place of this property.</td>
</tr>
<tr>
<td>track1_data</td>
<td>string, optional</td>
<td>This is the string read by the swiper (It contents track 1 data without sentinels).</td>
</tr>
<tr>
<td>track2_data</td>
<td>string, optional</td>
<td>This is the string read by the swiper (It contents track 2 data without sentinels).</td>
</tr>
<tr>
<td>encrypted_track _data</td>
<td>Optional</td>
<td><ul><li><strong>encrypted_track</strong> (string, optional): This is the string read by the swiper. This string contains the encrypted track data. </li><li><strong>swiper_brand</strong> (string, optional): The swiper brand&rsquo;s name with capital letters. Default value is <strong>IDTECH</strong>.</li><li><strong>swiper_model</strong> (string, optional): The swiper model with capital letters. Default value is <strong>UNIMAGII</strong>.</li></ul></td>
</tr>
<tr>
<td>billing_address_1</td>
<td>string, optional</td>
<td>The billing street address of the customer.</td>
</tr>
<tr>
<td>billing_address_2</td>
<td>string, optional</td>
<td>The additional billing street address of the customer.</td>
</tr>
<tr>
<td>billing_city</td>
<td>string, optional</td>
<td>The billing city of the customer.</td>
</tr>
<tr>
<td>billing_state</td>
<td>string, optional</td>
<td>The billing state Code of the customer. <br>For example, CA, WI, NY, etc. <br>The sate codes should be for the states in the USA.</td>
</tr>
<tr>
<td>billing_zip</td>
<td>string, optional</td>
<td>The billing Zip Code of the customer. <br>The zip code must be either 5 digits or 5 plus four separated by a &rsquo;-&rsquo;. <br>The zip code is required if the merchant has turned ON the AVS flag.</td>
</tr>
<tr>
<td>card_expiry_date</td>
<td>string</td>
<td>The card expiry date in the <em>YYYYMM</em> format.</td>
</tr>
<tr>
<td>cvv_data</td>
<td>string</td>
<td>This is the three or four digit CVV code at the back side of the credit and debit card.</td>
</tr>
</tbody></table>

<h3 id="bill">bill</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>base_amount</td>
<td>TransactionAmount</td>
<td>The base amount of the recurring bill. <br>The total amount charged will be the sum of this amount and (any) &#39;shipping_amount&rsquo; and &#39;tax_amount&rsquo;.</td>
</tr>
<tr>
<td>shipping_amount</td>
<td>TransactionAmount, optional</td>
<td>The shipping amount for the transaction. <br>This value will be included in the total amount charged.</td>
</tr>
<tr>
<td>tax_amount</td>
<td>TransactionAmount, optional</td>
<td>The tax amount for the transaction. <br>This value will be included in the total amount charged.</td>
</tr>
<tr>
<td>invoice_number</td>
<td>string, optional</td>
<td>The invoice number for the transaction.</td>
</tr>
<tr>
<td>po_number</td>
<td>string, optional</td>
<td>The purchase order number for the transaction.</td>
</tr>
<tr>
<td>note</td>
<td>string, optional</td>
<td>A free format note for the transaction. The note will be read by the merchant.</td>
</tr>
</tbody></table>

<p><strong>Note:</strong> One of the following fields must be present: <ul><li>tokenized_card</li><li>card_number</li><li>track1_data</li><li>track2_data</li><li>encrypted_track_data</li></ul></p>

<pre><code class="highlight shell">
      <span class="o">{</span>
          <span class="s2">"version"</span>: 0,
          <span class="s2">"createdAt"</span>: <span class="s2">"2015-05-19T12:58:09.863-03:00"</span>,
          <span class="s2">"lastModified"</span>: <span class="s2">"2015-05-19T12:58:09.863-03:00"</span>,
          <span class="s2">"createdBy"</span>: <span class="s2">"10002"</span>,
          <span class="s2">"lastModifiedBy"</span>: <span class="s2">"10002"</span>,
          <span class="s2">"metaData"</span>: null,
          <span class="s2">"record_format"</span>: null,
          <span class="s2">"settlementStatus"</span>: <span class="s2">"Not settled"</span>,
          <span class="s2">"saleResponse"</span>: <span class="o">{</span>
              <span class="s2">"saleId"</span>: <span class="s2">"478"</span>,
              <span class="s2">"approvalCode"</span>: <span class="s2">"VTLMC1"</span>,
              <span class="s2">"processedDateTime"</span>: null,
              <span class="s2">"avsResultCode"</span>: <span class="s2">"N"</span>,
              <span class="s2">"verificationResultCode"</span>: <span class="s2">"M"</span>,
              <span class="s2">"batchId"</span>: <span class="s2">"38"</span>,
              <span class="s2">"responseCode"</span>: <span class="s2">"00"</span>,
              <span class="s2">"responseText"</span>: <span class="s2">""</span>,
              <span class="s2">"cisNote"</span>: <span class="s2">""</span>,
              <span class="s2">"riskStatusResponseText"</span>: <span class="s2">""</span>,
              <span class="s2">"riskStatusRespondeCode"</span>: <span class="s2">""</span>,
              <span class="s2">"saleDateTime"</span>: <span class="s2">"2015-05-19 12:58:09"</span>,
              <span class="s2">"tokenizedCard"</span>: null,
              <span class="s2">"customerReference"</span>: <span class="o">{</span>
                  <span class="s2">"customerId"</span>: 1,
                  <span class="s2">"customerEmail"</span>: <span class="s2">"msmith14567@payhub.com"</span>,
                  <span class="s2">"customerPhones"</span>: <span class="o">[]</span>
              <span class="o">}</span>,
              <span class="s2">"billingReferences"</span>: <span class="o">{</span>
                  <span class="s2">"cardObscured"</span>: null,
                  <span class="s2">"tokenizedCard"</span>: <span class="s2">"9999000000001804"</span>,
                  <span class="s2">"customerId"</span>: 1,
                  <span class="s2">"customerCardId"</span>: null,
                  <span class="s2">"customerBillId"</span>: 1
              <span class="o">}</span>
          <span class="o">}</span>,
          <span class="s2">"_links"</span>: <span class="o">{</span>
              <span class="s2">"self"</span>: <span class="o">{</span>
                  <span class="s2">"href"</span>: <span class="s2">"https://payhub.com/api/v2/sale/478"</span>
              <span class="o">}</span>,
              <span class="s2">"merchant"</span>: <span class="o">{</span>
                  <span class="s2">"href"</span>: <span class="s2">"https://payhub.com/api/v2/sale/478/merchant"</span>
              <span class="o">}</span>,
              <span class="s2">"customer"</span>: <span class="o">{</span>
                  <span class="s2">"href"</span>: <span class="s2">"https://payhub.com/api/v2/sale/478/customer"</span>
              <span class="o">}</span>,
              <span class="s2">"card_data"</span>: <span class="o">{</span>
                  <span class="s2">"href"</span>: <span class="s2">"https://payhub.com/api/v2/sale/478/card_data"</span>
              <span class="o">}</span>,
              <span class="s2">"bill"</span>: <span class="o">{</span>
                  <span class="s2">"href"</span>: <span class="s2">"https://payhub.com/api/v2/sale/478/bill"</span>
              <span class="o">}</span>
          <span class="o">}</span>
      <span class="o">}</span>

</code></pre>

<h2 id="result">Result</h2>

<ul>
<li>A 201 code (created)</li>
<li>The Id of the Sale in the Location header.
<br>Sample header in the response: <code class="prettyprint">Location → https:// [payhub-api-server]:8251/payhubws/api/sale/5501b651da06a879ce520d4d</code>.
<br>If you do a GET request to this URL, you will get all the transaction information in JSON format.</li>
</ul>

<p>On the same way you  can query about merchant, customer, bill and card data details using the given URLs.</p>

<p><strong>Note:</strong> You will need to use the Oauth token in the header request for sales or any other transaction. For more information, see the OAUTH section.</p>

          <h1 id="authonly-transaction">AuthOnly Transaction</h1>

<pre><code class="highlight java">
    <span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>

    <span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthOnly</span> <span class="o">{</span>

      <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">RunAuthOnly</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
          <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
          <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
          <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

          <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/authOnly"</span><span class="o">;</span>

          <span class="n">JSONObject</span> <span class="n">merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
            <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"organization_id"</span><span class="o">,</span> <span class="s">"10005"</span><span class="o">);</span><span class="c1">//You put your org id here</span>
            <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"terminal_id"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span><span class="c1">//You put your terminal id</span>
          <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"merchant"</span><span class="o">,</span> <span class="n">merchant</span><span class="o">);</span>

          <span class="n">JSONObject</span> <span class="n">bill</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
            <span class="n">JSONObject</span> <span class="n">base_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
              <span class="n">base_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"1275"</span><span class="o">);</span><span class="c1">//$12.75</span>
            <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"base_amount"</span><span class="o">,</span> <span class="n">base_amount</span><span class="o">);</span>
            <span class="n">JSONObject</span> <span class="n">shipping_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
              <span class="n">shipping_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"725"</span><span class="o">);</span><span class="c1">//$7.25</span>
            <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"shipping_amount"</span><span class="o">,</span> <span class="n">shipping_amount</span><span class="o">);</span>
            <span class="n">JSONObject</span> <span class="n">tax_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
              <span class="n">tax_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"113"</span><span class="o">);</span><span class="c1">//$1.13</span>
            <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"tax_amount"</span><span class="o">,</span> <span class="n">tax_amount</span><span class="o">);</span>
            <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"note"</span><span class="o">,</span> <span class="s">"Shipped as a gift"</span><span class="o">);</span>
            <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"invoice_number"</span><span class="o">,</span> <span class="s">"4645782"</span><span class="o">);</span>
            <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"po_number"</span><span class="o">,</span> <span class="s">"1234-654321"</span><span class="o">);</span>
          <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bill"</span><span class="o">,</span> <span class="n">bill</span><span class="o">);</span>

          <span class="n">JSONObject</span> <span class="n">card_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_number"</span><span class="o">,</span> <span class="s">"5466410004374507"</span><span class="o">);</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_expiry_date"</span><span class="o">,</span> <span class="s">"201809"</span><span class="o">);</span><span class="c1">// September 2018</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_1"</span><span class="o">,</span> <span class="s">"237 E 33rd Street"</span><span class="o">);</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_2"</span><span class="o">,</span> <span class="s">"3rd Floor"</span><span class="o">);</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_city"</span><span class="o">,</span> <span class="s">"New York"</span><span class="o">);</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_zip"</span><span class="o">,</span> <span class="s">"10016"</span><span class="o">);</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_state"</span><span class="o">,</span> <span class="s">"NY"</span><span class="o">);</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cvv_data"</span><span class="o">,</span> <span class="s">"998"</span><span class="o">);</span>
            <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cvv_code"</span><span class="o">,</span> <span class="s">"Y"</span><span class="o">);</span>
          <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_data"</span><span class="o">,</span> <span class="n">card_data</span><span class="o">);</span>

          <span class="n">JSONObject</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"company_name"</span><span class="o">,</span> <span class="s">"CBA Steakhouse"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"job_title"</span><span class="o">,</span> <span class="s">"Owner"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"email_address"</span><span class="o">,</span> <span class="s">"john@cbasteakhouse.com"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"web_address"</span><span class="o">,</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_number"</span><span class="o">,</span> <span class="s">"(917) 479 1349"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_ext"</span><span class="o">,</span> <span class="s">"5478"</span><span class="o">);</span>
            <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_type"</span><span class="o">,</span> <span class="s">"M"</span><span class="o">);</span>
          <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"customer"</span><span class="o">,</span> <span class="n">customer</span><span class="o">);</span>

          <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"record_format"</span><span class="o">,</span> <span class="s">"CC"</span><span class="o">);</span>

          <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
          <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
          <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
          <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

          <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
          <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
          <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span> <span class="c1">//You return this response and work with it</span>

          <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
          <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

          <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
          <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
          <span class="k">while</span> <span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">json</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">cnt</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'&lt;'</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span>
                <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
                    <span class="o">||</span> <span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">" "</span><span class="o">)</span> <span class="o">?</span> <span class="s">"{\"MESSAGE\":\"NO RESPONSE...\"}"</span>
                    <span class="o">:</span> <span class="n">json</span><span class="o">));</span>
          <span class="o">}</span>
          <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getReasonPhrase</span><span class="o">();</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Created"</span><span class="o">)){</span>
            <span class="n">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">Header</span> <span class="n">header</span> <span class="o">:</span> <span class="n">headers</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)){</span>
                <span class="n">URL</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
                <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getPath</span><span class="o">();</span>
                <span class="kt">int</span> <span class="n">lastSlash</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
                <span class="n">String</span> <span class="n">transactionId</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastSlash</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Transaction Id: "</span> <span class="o">+</span> <span class="n">transactionId</span> <span class="o">);</span> <span class="c1">//Last resource of the path</span>
              <span class="o">}</span>

            <span class="o">}</span>
          <span class="o">}</span>
          <span class="k">else</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonResponseObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
          <span class="o">}</span>


        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
      <span class="o">}</span>

    <span class="o">}</span>
</code></pre>

<pre><code class="highlight php">
    <span class="cp">&lt;?php</span>
      <span class="nv">$trans_type</span> <span class="o">=</span> <span class="s2">"authOnly"</span><span class="p">;</span>
      <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
      <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

      <span class="c1">//Defining the Web Service URL
</span>      <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/</span><span class="nv">$trans_type</span><span class="s2">"</span><span class="p">;</span>


      <span class="c1">//Defining data for the AuthOnly transaction
</span>      <span class="c1">// Merchant data (obtained from the payHub Virtual Terminal (3rd party integration)
</span>      <span class="nv">$organization_id</span> <span class="o">=</span> <span class="mi">10002</span><span class="p">;</span>
      <span class="nv">$terminal_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nv">$oauth_token</span> <span class="o">=</span> <span class="s2">"22fe3c69-db70-4a8c-9aed-9a33ebb1e9b4"</span><span class="p">;</span>
      <span class="c1">// bill data
</span>      <span class="nv">$base_amount</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
      <span class="nv">$shipping_amount</span> <span class="o">=</span> <span class="mf">1.23</span><span class="p">;</span>
      <span class="nv">$tax_amount</span> <span class="o">=</span> <span class="mf">1.00</span><span class="p">;</span>
      <span class="nv">$note</span> <span class="o">=</span> <span class="s2">"this a sample note"</span><span class="p">;</span>
      <span class="nv">$invoice_number</span> <span class="o">=</span> <span class="s2">"a-00240"</span><span class="p">;</span>
      <span class="nv">$po_number</span> <span class="o">=</span> <span class="s2">"56"</span><span class="p">;</span>
      <span class="c1">//Credit card data
</span>      <span class="nv">$card_number</span> <span class="o">=</span> <span class="s2">"5466410004374507"</span><span class="p">;</span>
      <span class="nv">$card_expiry_date</span> <span class="o">=</span> <span class="s2">"202011"</span><span class="p">;</span>
      <span class="nv">$cvv_data</span> <span class="o">=</span> <span class="s2">"998"</span><span class="p">;</span>
      <span class="nv">$billing_address_1</span> <span class="o">=</span> <span class="s2">"2350 Kerner Blvd"</span><span class="p">;</span>
      <span class="nv">$billing_address_2</span> <span class="o">=</span> <span class="s2">"On the corner"</span><span class="p">;</span>
      <span class="nv">$billing_city</span> <span class="o">=</span> <span class="s2">"San Rafael"</span><span class="p">;</span>
      <span class="nv">$billing_state</span> <span class="o">=</span> <span class="s2">"CA"</span><span class="p">;</span>
      <span class="nv">$billing_zip</span> <span class="o">=</span> <span class="s2">"94901"</span><span class="p">;</span>
      <span class="c1">// Customer data
</span>      <span class="nv">$first_name</span> <span class="o">=</span> <span class="s2">"First"</span><span class="p">;</span>
      <span class="nv">$last_name</span> <span class="o">=</span> <span class="s2">"Contact"</span><span class="p">;</span>
      <span class="nv">$company_name</span> <span class="o">=</span> <span class="s2">"Payhub Inc"</span><span class="p">;</span>
      <span class="nv">$job_title</span> <span class="o">=</span> <span class="s2">"Software Engineer"</span><span class="p">;</span>
      <span class="nv">$email_address</span> <span class="o">=</span> <span class="s2">"jhon@company.com"</span><span class="p">;</span>
      <span class="nv">$web_address</span> <span class="o">=</span> <span class="s2">"http://payhub.com"</span><span class="p">;</span>
      <span class="nv">$phone_number</span> <span class="o">=</span> <span class="s2">"(415) 479 1349"</span><span class="p">;</span>
      <span class="nv">$phone_ext</span> <span class="o">=</span> <span class="s2">"123"</span><span class="p">;</span>
      <span class="nv">$phone_type</span> <span class="o">=</span> <span class="s2">"M"</span><span class="p">;</span>


      <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>      <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
      <span class="nv">$data</span><span class="p">[</span><span class="s2">"merchant"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"organization_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$organization_id</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"terminal_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$terminal_id</span><span class="s2">"</span><span class="p">);</span>
      <span class="nv">$data</span><span class="p">[</span><span class="s2">"bill"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"base_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$base_amount</span><span class="p">),</span>
        <span class="s2">"shipping_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$shipping_amount</span><span class="p">),</span>
        <span class="s2">"tax_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$tax_amount</span><span class="p">));</span>
      <span class="nv">$data</span><span class="p">[</span><span class="s2">"card_data"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"card_expiry_date"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_expiry_date</span><span class="s2">"</span><span class="p">,</span>
        <span class="s2">"cvv_data"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$cvv_data</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_address_1"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_1</span><span class="s2">"</span><span class="p">,</span>
        <span class="s2">"billing_address_2"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_2</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_city"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_city</span><span class="s2">"</span><span class="p">,</span>
        <span class="s2">"billing_state"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_state</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_zip"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_zip</span><span class="s2">"</span><span class="p">);</span>
      <span class="nv">$data</span> <span class="p">[</span><span class="s2">"customer"</span><span class="p">]</span><span class="o">=</span>  <span class="k">array</span><span class="p">(</span><span class="s2">"first_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$first_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"last_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$last_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"company_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$company_name</span><span class="s2">"</span><span class="p">,</span>
        <span class="s2">"job_title"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$job_title</span><span class="s2">"</span><span class="p">,</span><span class="s2">"email_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$email_address</span><span class="s2">"</span><span class="p">,</span><span class="s2">"web_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$web_address</span><span class="s2">"</span><span class="p">,</span>
        <span class="s2">"phone_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_ext"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_ext</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_type"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_type</span><span class="s2">"</span><span class="p">);</span>

      <span class="c1">//Convert data from Array to JSON
</span>      <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

      <span class="c1">//Creating a CURL object to access the WS
</span>      <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
      <span class="c1">//Setting the address to connect to
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
      <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
      <span class="c1">//Setting data in JSON format
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
      <span class="c1">//Setting the proper header.
</span>      <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'Accept: application/json'</span><span class="p">,</span>
        <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
        <span class="p">);</span>
      <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

      <span class="c1">//execute connection to the Web Service
</span>      <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
      <span class="c1">// get some data from the response
</span>      <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
      <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
      <span class="c1">//Get the header as string.
</span>      <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
      <span class="c1">//close connection to the Web Service
</span>      <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

      <span class="c1">//Obtain the data from the sale recently created
</span>      <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
        <span class="c1">//find the url of the sale (Location header in the response)
</span>        <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
        <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>        <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>        <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
        <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
        <span class="c1">//Setting the proper header.
</span>        <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
        <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="c1">//execute connection to the Web Service
</span>        <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
        <span class="c1">//close connection to the Web Service
</span>        <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
        <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>        <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
        <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>        <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//There was an error with the WS
</span>      <span class="k">else</span><span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="cp">?&gt;</span>
</code></pre>

<pre><code class="highlight csharp">
    <span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>

    <span class="k">namespace</span> <span class="nn">PayHubSamples</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">class</span> <span class="nc">AuthOnly</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RunAuthOnly</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/authonly"</span><span class="p">);</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                    <span class="n">var</span> <span class="n">authOnly</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">merchant</span> <span class="p">=</span> <span class="k">new</span>
                         <span class="p">{</span>
                             <span class="n">organization_id</span> <span class="p">=</span> <span class="s">"10005"</span><span class="p">,</span>
                             <span class="n">terminal_id</span> <span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                         <span class="p">},</span>
                        <span class="n">bill</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">base_amount</span> <span class="p">=</span> <span class="k">new</span>
                            <span class="p">{</span>
                                <span class="n">amount</span> <span class="p">=</span> <span class="s">"1275"</span> <span class="c1">//$12.75
</span>                            <span class="p">},</span>
                            <span class="n">shipping_amount</span> <span class="p">=</span> <span class="k">new</span>
                            <span class="p">{</span>
                                <span class="n">amount</span> <span class="p">=</span> <span class="s">"725"</span> <span class="c1">//$7.25
</span>                            <span class="p">},</span>
                            <span class="n">tax_amount</span> <span class="p">=</span> <span class="k">new</span>
                            <span class="p">{</span>
                                <span class="n">amount</span> <span class="p">=</span> <span class="s">"113"</span> <span class="c1">//$1.13
</span>                            <span class="p">},</span>
                            <span class="n">note</span> <span class="p">=</span> <span class="s">"Shipped as a gift"</span><span class="p">,</span>
                            <span class="n">invoice_number</span> <span class="p">=</span> <span class="s">"4645782"</span><span class="p">,</span>
                            <span class="n">po_number</span> <span class="p">=</span> <span class="s">"1234-654321"</span>
                        <span class="p">},</span>
                        <span class="n">card_data</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">card_number</span> <span class="p">=</span> <span class="s">"5466410004374507"</span><span class="p">,</span>
                            <span class="n">card_expiry_date</span> <span class="p">=</span> <span class="s">"201809"</span><span class="p">,</span> <span class="c1">//September 2018
</span>                            <span class="n">billing_address_1</span> <span class="p">=</span> <span class="s">"237 E 33rd Street"</span><span class="p">,</span>
                            <span class="n">billing_address_2</span> <span class="p">=</span> <span class="s">"3rd Floor"</span><span class="p">,</span>
                            <span class="n">billing_city</span> <span class="p">=</span> <span class="s">"New York"</span><span class="p">,</span>
                            <span class="n">billing_state</span> <span class="p">=</span> <span class="s">"NY"</span><span class="p">,</span>
                            <span class="n">billing_zip</span> <span class="p">=</span> <span class="s">"10016"</span><span class="p">,</span>
                            <span class="n">cvv_data</span> <span class="p">=</span> <span class="s">"998"</span><span class="p">,</span>
                            <span class="n">cvv_code</span> <span class="p">=</span> <span class="s">"Y"</span>
                        <span class="p">},</span>
                        <span class="n">customer</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">first_name</span> <span class="p">=</span> <span class="s">"John"</span><span class="p">,</span>
                            <span class="n">last_name</span> <span class="p">=</span> <span class="s">"Smith"</span><span class="p">,</span>
                            <span class="n">company_name</span> <span class="p">=</span> <span class="s">"CBA Stakehouse"</span><span class="p">,</span>
                            <span class="n">job_title</span> <span class="p">=</span> <span class="s">"Owner"</span><span class="p">,</span>
                            <span class="n">email_address</span> <span class="p">=</span> <span class="s">"john@cbastakehouse.com"</span><span class="p">,</span>
                            <span class="n">web_address</span> <span class="p">=</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="p">,</span>
                            <span class="n">phone_number</span> <span class="p">=</span> <span class="s">"(917) 479 1349"</span><span class="p">,</span>
                            <span class="n">phone_ext</span> <span class="p">=</span> <span class="s">"5478"</span><span class="p">,</span>
                            <span class="n">phone_type</span> <span class="p">=</span> <span class="s">"M"</span>
                        <span class="p">},</span>
                        <span class="n">record_format</span> <span class="p">=</span> <span class="s">"CC"</span>
                    <span class="p">};</span>

                    <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">authOnly</span><span class="p">);</span>

                    <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                    <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                    <span class="p">{</span>
                        <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                        <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                        <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                    <span class="p">}</span>

                    <span class="k">try</span>
                    <span class="p">{</span>
                        <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span><span class="c1">//You return this response.
</span>                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                        <span class="p">{</span>
                            <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span><span class="c1">//Created
</span>                            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="s">"Location"</span><span class="p">)</span>
                                <span class="p">{</span>
                                    <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                                    <span class="kt">int</span> <span class="n">lastSlash</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span>
                                    <span class="kt">string</span> <span class="n">transactionId</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">lastSlash</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Transaction Id: "</span> <span class="p">+</span> <span class="n">transactionId</span><span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                            <span class="p">{</span>
                                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                                <span class="p">{</span>
                                    <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

</code></pre>

<pre><code class="highlight json"><span class="w">
    </span><span class="p">{</span><span class="w">
    </span><span class="s2">"merchant"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"organization_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10002</span><span class="p">,</span><span class="w">
         </span><span class="s2">"terminal_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">

    </span><span class="s2">"bill"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"base_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="s2">"shipping_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.23</span><span class="w">
          </span><span class="p">},</span><span class="w">
         </span><span class="s2">"tax_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.00</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="s2">"note"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Send as a gift."</span><span class="p">,</span><span class="w">
         </span><span class="s2">"invoice_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"328742"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"po_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2474-6975"</span><span class="w">
    </span><span class="p">},</span><span class="w">

    </span><span class="s2">"card_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"card_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"5466410004374507"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"card_expiry_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"202011"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billing_address_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billing_address_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2 floor"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billing_city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"San Rafael"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billing_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billing_zip"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"94901"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cvv_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"998"</span><span class="w">
    </span><span class="p">},</span><span class="w">

    </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Miguel"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"company_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payhub Inc"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"job_title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Software Engineer"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"email_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"msmith14567@payhub.com"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"web_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://payhub.com"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"phone_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"(415) 479 1349"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"phone_ext"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phone_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"record_format"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT_CARD"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/authonly"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>



    <span class="n">merchant</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"organization_id"</span><span class="o">=&gt;</span><span class="mi">10074</span><span class="p">,</span>
                <span class="s2">"terminal_id"</span><span class="o">=&gt;</span><span class="mi">134</span>
                <span class="p">}</span>

    <span class="c1"># bill data</span>
    <span class="n">bill</span><span class="o">=</span> <span class="p">{</span>
            <span class="s2">"base_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"shipping_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"tax_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"note"</span><span class="o">=&gt;</span><span class="s2">"this a sample note"</span><span class="p">,</span>
            <span class="s2">"invoice_number"</span><span class="o">=&gt;</span><span class="s2">"this is an invoice"</span><span class="p">,</span>
            <span class="s2">"po_number"</span><span class="o">=&gt;</span><span class="s2">"a test po number"</span>
    <span class="p">}</span>
    <span class="c1">#Credit card data</span>
    <span class="n">card_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"card_number"</span><span class="o">=&gt;</span><span class="s2">"4055011111111111"</span><span class="p">,</span>
                <span class="s2">"card_expiry_date"</span><span class="o">=&gt;</span><span class="s2">"202012"</span><span class="p">,</span>
                <span class="s2">"cvv_data"</span><span class="o">=&gt;</span><span class="s2">"999"</span><span class="p">,</span>
                <span class="s2">"billing_address_1"</span><span class="o">=&gt;</span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span>
                <span class="s2">"billing_address_2"</span><span class="o">=&gt;</span><span class="s2">"On the corner"</span><span class="p">,</span>
                <span class="s2">"billing_city"</span><span class="o">=&gt;</span><span class="s2">"San Rafael"</span><span class="p">,</span>
                <span class="s2">"billing_state"</span><span class="o">=&gt;</span><span class="s2">"CA"</span><span class="p">,</span>
                <span class="s2">"billing_zip"</span><span class="o">=&gt;</span><span class="s2">"99997-0003"</span>
                <span class="p">}</span>
    <span class="c1"># Customer data</span>
    <span class="n">customer</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"first_name"</span><span class="o">=&gt;</span><span class="s2">"First"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="o">=&gt;</span><span class="s2">"Contact"</span><span class="p">,</span>
                <span class="s2">"company_name"</span><span class="o">=&gt;</span><span class="s2">"Payhub Inc"</span><span class="p">,</span>
                <span class="s2">"job_title"</span><span class="o">=&gt;</span><span class="s2">"Software Engineer"</span><span class="p">,</span>
                <span class="s2">"email_address"</span><span class="o">=&gt;</span><span class="s2">"jhon@company.com"</span><span class="p">,</span>
                <span class="s2">"web_address"</span><span class="o">=&gt;</span><span class="s2">"http://payhub.com"</span><span class="p">,</span>
                <span class="s2">"phone_number"</span><span class="o">=&gt;</span><span class="s2">"(415) 479 1349"</span><span class="p">,</span>
                <span class="s2">"phone_ext"</span><span class="o">=&gt;</span><span class="s2">"123"</span><span class="p">,</span>
                <span class="s2">"phone_type"</span><span class="o">=&gt;</span><span class="s2">"M"</span>
    <span class="p">}</span>


    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"merchant"</span><span class="o">=&gt;</span><span class="n">merchant</span><span class="p">,</span><span class="s2">"bill"</span><span class="o">=&gt;</span><span class="n">bill</span><span class="p">,</span><span class="s2">"customer"</span><span class="o">=&gt;</span><span class="n">customer</span><span class="p">,</span><span class="s2">"card_data"</span><span class="o">=&gt;</span><span class="n">card_data</span><span class="p">}</span>

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre>

<h2 id="introduction">Introduction</h2>

<p>This topic provides the information about the <strong>AuthOnly</strong> transaction.</p>

<p>You can use the AuthOnly transaction to authorize an amount on your customer&rsquo;s credit card without making the actual settlement of that amount. With the AuthOnly transaction, you actually reserve an amount for a certain period against the credit limit of the card holder.</p>

<p>Usually, you use the AutOnly transaction type when you are selling an item, which is currently out of stock. So, you run the AuthOnly transaction when the item is not available and when the item becomes available in the stock, you run the Capture transaction to actually make the settlement for the reserved amount. To simply say, the AuthOnly and Capture transactions are essentially a sale process in two steps.</p>

<p>The sale is considered complete when you successfully complete both the Capture and AuthOnly transactions. The money will be debited from the card holder’s account and credited to your account after the sale is complete.</p>

<p>When the AuthOnly transaction is successfully executed, you will receive a 201 Created code on a successful AuthOnly. This code also includes the transaction ID. You can use this transaction ID to run the Capture transaction.</p>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">POST</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">POST https://api.payhub.com/api/v2/authOnly</code></p>

<h2 id="elements">Elements</h2>

<h3 id="merchant">merchant</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>The Organization Id of the Merchant. <br>This value must match with the Organization Id of the Merchant with which the passed Oauth Token is associated.</td>
</tr>
<tr>
<td>terminal_id</td>
<td>integer</td>
<td>The virtual Terminal Id of the merchant for the 3rd Party API.</td>
</tr>
</tbody></table>

<h3 id="bill">bill</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>base_amount</td>
<td>TransactionAmount</td>
<td>The Base amount of the recurring bill. <br>The total amount charged will be the sum of this amount and (any) &lsquo;shipping_amount&rsquo; and &#39;tax_amount&rsquo;.</td>
</tr>
<tr>
<td>shipping_amount</td>
<td>TransactionAmount, optional</td>
<td>The shipping amount for the transaction. <br>The value will be included in the total amount charged.</td>
</tr>
<tr>
<td>tax_amount</td>
<td>TransactionAmount, optional</td>
<td>The tax amount for the transaction. <br>The value will be included in the total amount charged.</td>
</tr>
<tr>
<td>invoice_number</td>
<td>string, optional</td>
<td>The invoice number for the transaction.</td>
</tr>
<tr>
<td>po_number</td>
<td>string, optional</td>
<td>The purchase order number for the transaction.</td>
</tr>
<tr>
<td>note</td>
<td>string, optional</td>
<td>A free format note for the transaction. The note will be read by the merchant.</td>
</tr>
</tbody></table>

<h3 id="card_data">card_data</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tokenized_card</td>
<td>string, optional</td>
<td>This is the 16 character PayHub-specific tokenized string that represents the card number.<br>You can obtain the value for the given customer and credit card by examining the last sale, by accessing the link to the card data that was successfully created. It is safer (and recommended) method for the third party client to store and use this string in any future requests for the same customer. <br>This value is required if the &#39;card_number&rsquo; property is not present in the request.</td>
</tr>
<tr>
<td>card_number</td>
<td>string, optional</td>
<td>This is the 16 character card number. <br>The card number is not stored by the API in plain text. The response will contain a tokenized card number that should always be used in future requests, (for the same Customer) in place of this property. <br>This value is required if the &#39;tokenized_card&rsquo; property is not present in the request.</td>
</tr>
<tr>
<td>billing_address_1</td>
<td>string, optional</td>
<td>The billing street address of the customer.</td>
</tr>
<tr>
<td>billing_address_2</td>
<td>string, optional</td>
<td>The additional billing street address of the customer.</td>
</tr>
<tr>
<td>billing_city</td>
<td>string, optional</td>
<td>The billing city of the customer.</td>
</tr>
<tr>
<td>billing_state</td>
<td>string, optional</td>
<td>The billing (US) State Code (CA, WI, NY, etc.) of the customer.</td>
</tr>
<tr>
<td>billing_zip</td>
<td>string, optional</td>
<td>The billing (US) Zip Code of the customer. <br> The zip code must be either 5 digits or 5 plus four separated by a dash (&rsquo;-&rsquo;).<br> This value is required if the Merchant has turned on the AVS flag.</td>
</tr>
<tr>
<td>card_expiry_date</td>
<td>string</td>
<td>The card expiry date in the <em>YYYYMM</em> format.</td>
</tr>
<tr>
<td>cvv_data</td>
<td>string</td>
<td>A three or four digit CVV code on the card.</td>
</tr>
</tbody></table>

<h3 id="customer">customer</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>The first name of the customer.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The last name of the customer.</td>
</tr>
<tr>
<td>company_name</td>
<td>string, optional</td>
<td>The company name of the customer.</td>
</tr>
<tr>
<td>job_title</td>
<td>string, optional</td>
<td>The job title of the customer.</td>
</tr>
<tr>
<td>email_address</td>
<td>string</td>
<td>The email address of the customer. <br>The email address must be syntactically correct and valid. If email address is not specified, you must provide a phone_number to identify the customer.</td>
</tr>
<tr>
<td>web_address</td>
<td>string, optional</td>
<td>The web site address of the customer. <br>The website address, if specified, must be syntactically correct and valid.</td>
</tr>
<tr>
<td>phone_number</td>
<td>string, optional</td>
<td>The phone number of the customer. <br>The phone number must be syntactically correct. For example, (415) 234 5678, or 4152345678, or (415) 234-5678. <br>If phone number is not specified, you must provide an email_address to identify the customer.</td>
</tr>
<tr>
<td>phone_ext</td>
<td>string, optional</td>
<td>The phone extension number of the customer.</td>
</tr>
<tr>
<td>phone_type</td>
<td>string, optional</td>
<td>The type of the phone the customer is using. <br>The phone type can be [&#39;H&rsquo; or &#39;W&rsquo; or &rsquo;M&rsquo;]: H (Home), W (Work), M (Mobile).</td>
</tr>
<tr>
<td>record_format</td>
<td>string, optional</td>
<td>The value that indicates whether the sale has to be made over a credit card, debit card or cash payment. <br>The default value is &ldquo;CREDIT_CARD&rdquo;. <br>Following are the accepted values:<ul><li>CASH_PAYMENT</li><li>CREDIT_CARD</li><li>DEBIT_CARD</li></ul></td>
</tr>
</tbody></table>

<pre><code class="highlight shell">    <span class="o">{</span>
      <span class="s2">"version"</span>: 1,
      <span class="s2">"createdAt"</span>: <span class="s2">"2015-07-06T19:41:02.984-07:00"</span>,
      <span class="s2">"lastModified"</span>: <span class="s2">"2015-07-06T19:41:02.984-07:00"</span>,
      <span class="s2">"createdBy"</span>: <span class="s2">"10127"</span>,
      <span class="s2">"lastModifiedBy"</span>: <span class="s2">"10127"</span>,
      <span class="s2">"metaData"</span>: null,
      <span class="s2">"record_format"</span>: null,
      <span class="s2">"settlementStatus"</span>: <span class="s2">"Settled"</span>,
      <span class="s2">"authOnlyResponse"</span>: <span class="o">{</span>
        <span class="s2">"transactionId"</span>: <span class="s2">"182349"</span>,
        <span class="s2">"approvalCode"</span>: <span class="s2">"VTLMC1"</span>,
        <span class="s2">"processedDateTime"</span>: null,
        <span class="s2">"avsResultCode"</span>: <span class="s2">"N"</span>,
        <span class="s2">"verificationResultCode"</span>: <span class="s2">"M"</span>,
        <span class="s2">"batchId"</span>: <span class="s2">"1395"</span>,
        <span class="s2">"responseCode"</span>: <span class="s2">"00"</span>,
        <span class="s2">"responseText"</span>: <span class="s2">"NO  MATCH"</span>,
        <span class="s2">"cisNote"</span>: <span class="s2">""</span>,
        <span class="s2">"riskStatusResponseText"</span>: <span class="s2">""</span>,
        <span class="s2">"riskStatusRespondeCode"</span>: <span class="s2">""</span>,
        <span class="s2">"dateTime"</span>: <span class="s2">"2015-07-06 19:41:02"</span>,
        <span class="s2">"customerReference"</span>: <span class="o">{</span>
          <span class="s2">"customerId"</span>: 2972,
          <span class="s2">"customerEmail"</span>: <span class="s2">"msmith14567@payhub.com"</span>,
          <span class="s2">"customerPhones"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="s2">"billingReferences"</span>: <span class="o">{</span>
          <span class="s2">"tokenizedCard"</span>: <span class="s2">"9999000000001853"</span>,
          <span class="s2">"customerId"</span>: 2972,
          <span class="s2">"customerCardId"</span>: null,
          <span class="s2">"customerBillId"</span>: 1,
          <span class="s2">"cardObscured"</span>: null,
          <span class="s2">"cardType"</span>: null
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"_links"</span>: <span class="o">{</span>
        <span class="s2">"self"</span>: <span class="o">{</span>
          <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/authonly/182349"</span>
        <span class="o">}</span>,
        <span class="s2">"merchant"</span>: <span class="o">{</span>
          <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/authonly/182349/merchant"</span>
        <span class="o">}</span>,
        <span class="s2">"customer"</span>: <span class="o">{</span>
          <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/authonly/182349/customer"</span>
        <span class="o">}</span>,
        <span class="s2">"card_data"</span>: <span class="o">{</span>
          <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/authonly/182349/card_data"</span>
        <span class="o">}</span>,
        <span class="s2">"bill"</span>: <span class="o">{</span>
          <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/authonly/182349/bill"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
</code></pre>

<h2 id="result">Result</h2>

<ul>
<li>201 code (created)</li>
<li>The Id of the AuthOnly in the Location header <br>Sample header in the response:Location: https://api.payhub.com/api/v2/authOnly/234</li>
</ul>

<p><strong>Note:</strong> You will need to use Oauth token in the header request for sales or any other transaction. For more information, see the <br> <a href="https://payhub.atlassian.net/wiki/display/MM/OAuth+2.0+Access+Tokens">OAuth 2.0 Access Tokens</a> section.</p>

          <h1 id="capture-transaction">Capture Transaction</h1>

<pre><code class="highlight java"><span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Void</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">RunCapture</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
      <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
      <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/capture"</span><span class="o">;</span>

      <span class="n">JSONObject</span> <span class="n">merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"organization_id"</span><span class="o">,</span> <span class="s">"10005"</span><span class="o">);</span> <span class="c1">//You put your org id here</span>
      <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"terminal_id"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span><span class="c1">//You put your terminal id</span>

      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"merchant"</span><span class="o">,</span> <span class="n">merchant</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"transaction_id"</span><span class="o">,</span> <span class="s">"223"</span><span class="o">);</span> <span class="c1">//You put the transaction id of the sale or refund you want to void</span>

      <span class="n">JSONObject</span> <span class="n">bill</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">JSONObject</span> <span class="n">base_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">base_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"1275"</span><span class="o">);</span><span class="c1">//$12.75</span>
      <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"base_amount"</span><span class="o">,</span> <span class="n">base_amount</span><span class="o">);</span>
      <span class="n">JSONObject</span> <span class="n">shipping_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">shipping_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"725"</span><span class="o">);</span><span class="c1">//$7.25</span>
      <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"shipping_amount"</span><span class="o">,</span> <span class="n">shipping_amount</span><span class="o">);</span>
      <span class="n">JSONObject</span> <span class="n">tax_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">tax_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"113"</span><span class="o">);</span><span class="c1">//$1.13</span>
      <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"tax_amount"</span><span class="o">,</span> <span class="n">tax_amount</span><span class="o">);</span>
      <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"note"</span><span class="o">,</span> <span class="s">"Shipped as a gift"</span><span class="o">);</span>
      <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"invoice_number"</span><span class="o">,</span> <span class="s">"4645782"</span><span class="o">);</span>
      <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"po_number"</span><span class="o">,</span> <span class="s">"1234-654321"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bill"</span><span class="o">,</span> <span class="n">bill</span><span class="o">);</span>

      <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

      <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
      <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span> <span class="c1">//You return this response and work with it</span>

      <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
      <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">json</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">cnt</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'&lt;'</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span>
            <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
                <span class="o">||</span> <span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">" "</span><span class="o">)</span> <span class="o">?</span> <span class="s">"{\"MESSAGE\":\"NO RESPONSE...\"}"</span>
                <span class="o">:</span> <span class="n">json</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getReasonPhrase</span><span class="o">();</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Created"</span><span class="o">)){</span>
        <span class="n">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Header</span> <span class="n">header</span> <span class="o">:</span> <span class="n">headers</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)){</span>
            <span class="n">URL</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
            <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getPath</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">lastSlash</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">transactionId</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastSlash</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Transaction Id: "</span> <span class="o">+</span> <span class="n">transactionId</span> <span class="o">);</span>
          <span class="o">}</span>

        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonResponseObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>


    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>


<span class="o">}</span>
</code></pre>

<pre><code class="highlight php">
    <span class="cp">&lt;?php</span>
      <span class="nv">$trans_type</span> <span class="o">=</span> <span class="s2">"capture"</span><span class="p">;</span>
      <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
      <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

      <span class="c1">//Defining the Web Service URL
</span>      <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/</span><span class="nv">$trans_type</span><span class="s2">"</span><span class="p">;</span>


      <span class="c1">//Defining data for the VOID transaction
</span>      <span class="c1">// Merchant data (obtained from the payHub Virtual Terminal (3rd party integration)
</span>      <span class="nv">$organization_id</span> <span class="o">=</span> <span class="mi">10002</span><span class="p">;</span>
      <span class="nv">$terminal_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nv">$oauth_token</span> <span class="o">=</span> <span class="s2">"22fe3c69-db70-4a8c-9aed-9a33ebb1e9b4"</span><span class="p">;</span>
      <span class="nv">$transaction_id</span><span class="o">=</span><span class="s2">"83"</span><span class="p">;</span>

      <span class="c1">// bill data
</span>        <span class="nv">$base_amount</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
        <span class="nv">$shipping_amount</span> <span class="o">=</span> <span class="mf">1.23</span><span class="p">;</span>
        <span class="nv">$tax_amount</span> <span class="o">=</span> <span class="mf">1.00</span><span class="p">;</span>
        <span class="nv">$note</span> <span class="o">=</span> <span class="s2">"this a sample note"</span><span class="p">;</span>
        <span class="nv">$invoice_number</span> <span class="o">=</span> <span class="s2">"a-00240"</span><span class="p">;</span>
        <span class="nv">$po_number</span> <span class="o">=</span> <span class="s2">"56"</span><span class="p">;</span>


      <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>      <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
      <span class="nv">$data</span><span class="p">[</span><span class="s2">"merchant"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"organization_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$organization_id</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"terminal_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$terminal_id</span><span class="s2">"</span><span class="p">);</span>
      <span class="nv">$data</span><span class="p">[</span><span class="s2">"transaction_id"</span><span class="p">]</span><span class="o">=</span><span class="nv">$transaction_id</span><span class="p">;</span>
      <span class="nv">$data</span><span class="p">[</span><span class="s2">"bill"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"base_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$base_amount</span><span class="p">),</span>
            <span class="s2">"shipping_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$shipping_amount</span><span class="p">),</span>
            <span class="s2">"tax_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$tax_amount</span><span class="p">));</span>

      <span class="c1">//Convert data from Array to JSON
</span>      <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

      <span class="c1">//Creating a CURL object to access the WS
</span>      <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
      <span class="c1">//Setting the address to connect to
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
      <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
      <span class="c1">//Setting data in JSON format
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
      <span class="c1">//Setting the proper header.
</span>      <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'Accept: application/json'</span><span class="p">,</span>
        <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
        <span class="p">);</span>
      <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>      <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

      <span class="c1">//execute connection to the Web Service
</span>      <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
      <span class="c1">// get some data from the response
</span>      <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
      <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
      <span class="c1">//Get the header as string.
</span>      <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
      <span class="c1">//close connection to the Web Service
</span>      <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

      <span class="c1">//Obtain the data from the void recently created
</span>      <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
        <span class="c1">//find the url of the void (Location header in the response)
</span>        <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
        <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>        <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>        <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
        <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
        <span class="c1">//Setting the proper header.
</span>        <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
        <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="c1">//execute connection to the Web Service
</span>        <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
        <span class="c1">//close connection to the Web Service
</span>        <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
        <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>        <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
        <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>        <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//There was an error with the WS
</span>      <span class="k">else</span><span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
      <span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>

<pre><code class="highlight csharp">
    <span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>

    <span class="k">namespace</span> <span class="nn">PayHubSamples</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">class</span> <span class="nc">Void</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RunCapture</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/capture"</span><span class="p">);</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                    <span class="n">var</span> <span class="n">capture</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">merchant</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">organization_id</span> <span class="p">=</span> <span class="s">"10005"</span><span class="p">,</span>
                            <span class="n">terminal_id</span> <span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                        <span class="p">},</span>
                        <span class="n">transaction_id</span> <span class="p">=</span> <span class="s">"238"</span><span class="p">,</span>
                        <span class="n">bill</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">base_amount</span> <span class="p">=</span> <span class="k">new</span>
                            <span class="p">{</span>
                                <span class="n">amount</span> <span class="p">=</span> <span class="s">"1275"</span> <span class="c1">//$12.75
</span>                            <span class="p">},</span>
                            <span class="n">shipping_amount</span> <span class="p">=</span> <span class="k">new</span>
                            <span class="p">{</span>
                                <span class="n">amount</span> <span class="p">=</span> <span class="s">"725"</span> <span class="c1">//$7.25
</span>                            <span class="p">},</span>
                            <span class="n">tax_amount</span> <span class="p">=</span> <span class="k">new</span>
                            <span class="p">{</span>
                                <span class="n">amount</span> <span class="p">=</span> <span class="s">"113"</span> <span class="c1">//$1.13
</span>                            <span class="p">},</span>
                            <span class="n">note</span> <span class="p">=</span> <span class="s">"Shipped as a gift"</span><span class="p">,</span>
                            <span class="n">invoice_number</span> <span class="p">=</span> <span class="s">"4645782"</span><span class="p">,</span>
                            <span class="n">po_number</span> <span class="p">=</span> <span class="s">"1234-654321"</span>
                        <span class="p">}</span>
                    <span class="p">};</span>

                    <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">capture</span><span class="p">);</span>

                    <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                    <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                    <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                    <span class="p">{</span>
                        <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                        <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                        <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                    <span class="p">}</span>

                    <span class="k">try</span>
                    <span class="p">{</span>
                        <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span><span class="c1">//You return this response.
</span>                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                        <span class="p">{</span>
                            <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span><span class="c1">//Created
</span>                            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="s">"Location"</span><span class="p">)</span>
                                <span class="p">{</span>
                                    <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                                    <span class="kt">int</span> <span class="n">lastSlash</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span>
                                    <span class="kt">string</span> <span class="n">transactionId</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">lastSlash</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Transaction Id: "</span> <span class="p">+</span> <span class="n">transactionId</span><span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                            <span class="p">{</span>
                                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                                <span class="p">{</span>
                                    <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<pre><code class="highlight json"><span class="w">
    </span><span class="p">{</span><span class="w">
         </span><span class="s2">"merchant"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="s2">"organization_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10005</span><span class="p">,</span><span class="w">
             </span><span class="s2">"terminal_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">

         </span><span class="p">},</span><span class="w">

         </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="s2">"365"</span><span class="p">,</span><span class="w">

         </span><span class="s2">"bill"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

             </span><span class="s2">"base_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                 </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">6.00</span><span class="w">
             </span><span class="p">},</span><span class="w">
             </span><span class="s2">"shipping_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                 </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="w">
             </span><span class="p">},</span><span class="w">
             </span><span class="s2">"tax_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                 </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="w">
             </span><span class="p">},</span><span class="w">
             </span><span class="s2">"note"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Nice guest, giving him 20% discount."</span><span class="p">,</span><span class="w">
             </span><span class="s2">"invoice_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"789468"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"po_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"789468-CAP"</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/capture"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>



    <span class="n">merchant</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"organization_id"</span><span class="o">=&gt;</span><span class="mi">10074</span><span class="p">,</span>
                <span class="s2">"terminal_id"</span><span class="o">=&gt;</span><span class="mi">134</span>
                <span class="p">}</span>

    <span class="c1"># bill data</span>
    <span class="n">bill</span><span class="o">=</span> <span class="p">{</span>
            <span class="s2">"base_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"shipping_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"tax_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"note"</span><span class="o">=&gt;</span><span class="s2">"this a sample note"</span><span class="p">,</span>
            <span class="s2">"invoice_number"</span><span class="o">=&gt;</span><span class="s2">"this is an invoice"</span><span class="p">,</span>
            <span class="s2">"po_number"</span><span class="o">=&gt;</span><span class="s2">"a test po number"</span>
    <span class="p">}</span>
    <span class="c1">#transaction Id</span>
    <span class="n">transaction_id</span><span class="o">=</span><span class="s2">"114"</span>

    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"merchant"</span><span class="o">=&gt;</span><span class="n">merchant</span><span class="p">,</span><span class="s2">"bill"</span><span class="o">=&gt;</span><span class="n">bill</span><span class="p">,</span><span class="s2">"transaction_id"</span><span class="o">=&gt;</span><span class="n">transaction_id</span><span class="p">}</span>

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre>

<h2 id="introduction">Introduction</h2>

<p>This topic provides information about the <strong>Capture</strong> transaction.</p>

<p>Use the Capture transaction as the final step to collect the funds that you had asked for authorization through the AuthOnly transaction. You need to provide the transaction ID that you receive when you run the <strong>AuthOnly</strong> transaction.</p>

<p>In case the order fulfilment process, such as <em>shipping goods some days after they were ordered</em>, is delayed you might want to first run the AuthOnly transaction and then capture the respective funds. You might also need to change the amount that you got an authorization for. In that case, you need to provide a new bill section, including base amount and, if required, shipping amount, tax amount, invoice number, PO number, and note.</p>

<p>If the Capture transaction executes successfully, you will receive a 201 Created code. This code will include the transaction id. This transaction ID should be the same ID that you provided, which means, the same transaction id of the AuthOnly transaction that you just captured.</p>

<p>After capturing the amount for the AuthOnly transaction, the transaction will become a sale. The money will be taken from the card holder’s account and credited to your account during the settlement of the sale.</p>

<h3 id="request-method">Request Method</h3>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">https://api.payhub.com/api/v2/capture</code></p>

<h2 id="elements">Elements</h2>

<h3 id="merchant-(required)">merchant (required)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>The organization id of the merchant who did the AuthOnly that you are trying to capture.</td>
</tr>
<tr>
<td>terminal_id</td>
<td>integer</td>
<td>The terminal&rsquo;s id of the merchant where the AuthOnly was done.</td>
</tr>
</tbody></table>

<h3 id="transaction_id-(integer,-required)">transaction_id (integer, required)</h3>

<p>The transaction id of the AuthOnly that you want to capture.</p>

<h3 id="bill-(optional)">bill (optional)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>base_amount</td>
<td>TransactionAmount</td>
<td>The base amount of the recurring bill. The total amount charged will be the sum of this amount and the &lsquo;shipping_amount&rsquo;, &#39;tax_amount&rsquo; if any.</td>
</tr>
<tr>
<td>shipping_amount</td>
<td>TransactionAmount, optional</td>
<td>The shipping amount for the transaction. This amount will be included in the total amount charged.</td>
</tr>
<tr>
<td>tax_amount</td>
<td>TransactionAmount, optional</td>
<td>The tax amount for the transaction. This amount will be included in the total amount charged.</td>
</tr>
<tr>
<td>invoice_number</td>
<td>string, optional</td>
<td>The invoice number of the transaction.</td>
</tr>
<tr>
<td>po_number</td>
<td>string, optional</td>
<td>The purchase order number of the transaction.</td>
</tr>
<tr>
<td>note</td>
<td>string, optional</td>
<td>A free format note for the transaction. The note will be read by the Merchant.</td>
</tr>
</tbody></table>

<h2 id="response" style="clear: right;">Response</h2>

<pre><code class="highlight shell">    <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"777"</span>,
        <span class="s2">"version"</span>: 0,
        <span class="s2">"createdAt"</span>: <span class="s2">"2015-05-14T11:19:43.583-07:00"</span>,
        <span class="s2">"lastModified"</span>: <span class="s2">"2015-05-14T11:19:43.583-07:00"</span>,
        <span class="s2">"createdBy"</span>: <span class="s2">"10127"</span>,
        <span class="s2">"lastModifiedBy"</span>: <span class="s2">"10127"</span>,
        <span class="s2">"metaData"</span>: null,
        <span class="s2">"merchant"</span>: <span class="o">{</span>
            <span class="s2">"id"</span>: <span class="s2">"10127215"</span>,
            <span class="s2">"version"</span>: 1,
            <span class="s2">"createdAt"</span>: <span class="s2">"2015-04-02T11:46:16.676-07:00"</span>,
            <span class="s2">"lastModified"</span>: <span class="s2">"2015-04-28T13:28:21.427-07:00"</span>,
            <span class="s2">"createdBy"</span>: <span class="s2">"10127"</span>,
            <span class="s2">"lastModifiedBy"</span>: <span class="s2">"10127"</span>,
            <span class="s2">"metaData"</span>: null,
            <span class="s2">"organization_id"</span>: 10127,
            <span class="s2">"terminal_id"</span>: 215
        <span class="o">}</span>,
        <span class="s2">"bill"</span>: null,
        <span class="s2">"transaction_id"</span>: 114,
        <span class="s2">"lastCaptureResponse"</span>: <span class="o">{</span>
            <span class="s2">"batchId"</span>: <span class="s2">"702"</span>,
            <span class="s2">"transactionId"</span>: <span class="s2">"114"</span>,
            <span class="s2">"billingReferences"</span>: null
        <span class="o">}</span>,
        <span class="s2">"_links"</span>: <span class="o">{</span>
            <span class="s2">"self"</span>: <span class="o">{</span>
                <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/capture/777"</span>
            <span class="o">}</span>,
            <span class="s2">"merchant"</span>: <span class="o">{</span>
                <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/capture/777/merchant"</span>
            <span class="o">}</span>,
            <span class="s2">"bill"</span>: <span class="o">{</span>
                <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/capture/777/bill"</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>

<h3 id="result">Result</h3>

<ul>
<li>201 code (created)</li>
<li>The Id of the Capture in the Location header. This ID should be the same that you provided. 
<br>Sample header in the response:Location: https://api.payhub.com/api/v2/authOnly/234</li>
</ul>

          <h1 id="void-transaction">Void Transaction</h1>

<pre><code class="highlight java"><span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Void</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">RunVoid</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
      <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
      <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/void"</span><span class="o">;</span>

      <span class="n">JSONObject</span> <span class="n">merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"organization_id"</span><span class="o">,</span> <span class="s">"10005"</span><span class="o">);</span> <span class="c1">//You put your org id here</span>
      <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"terminal_id"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span><span class="c1">//You put your terminal id</span>

      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"merchant"</span><span class="o">,</span> <span class="n">merchant</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"transaction_id"</span><span class="o">,</span> <span class="s">"223"</span><span class="o">);</span> <span class="c1">//You put the transaction id of the sale or refund you want to void</span>

      <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

      <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
      <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span> <span class="c1">//You return this response and work with it</span>

      <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
      <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">json</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">cnt</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'&lt;'</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span>
            <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
                <span class="o">||</span> <span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">" "</span><span class="o">)</span> <span class="o">?</span> <span class="s">"{\"MESSAGE\":\"NO RESPONSE...\"}"</span>
                <span class="o">:</span> <span class="n">json</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getReasonPhrase</span><span class="o">();</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Created"</span><span class="o">)){</span>
        <span class="n">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Header</span> <span class="n">header</span> <span class="o">:</span> <span class="n">headers</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)){</span>
            <span class="n">URL</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
            <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getPath</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">lastSlash</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">transactionId</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastSlash</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Transaction Id: "</span> <span class="o">+</span> <span class="n">transactionId</span> <span class="o">);</span>
          <span class="o">}</span>

        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonResponseObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>


    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>


<span class="o">}</span>
</code></pre>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
  <span class="nv">$trans_type</span> <span class="o">=</span> <span class="s2">"void"</span><span class="p">;</span>
  <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
  <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="c1">//Defining the Web Service URL
</span>  <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/</span><span class="nv">$trans_type</span><span class="s2">"</span><span class="p">;</span>


  <span class="c1">//Defining data for the VOID transaction
</span>  <span class="c1">// Merchant data (obtained from the payHub Virtual Terminal (3rd party integration)
</span>  <span class="nv">$organization_id</span> <span class="o">=</span> <span class="mi">10002</span><span class="p">;</span>
  <span class="nv">$terminal_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="nv">$oauth_token</span> <span class="o">=</span> <span class="s2">"22fe3c69-db70-4a8c-9aed-9a33ebb1e9b4"</span><span class="p">;</span>
  <span class="nv">$transaction_id</span><span class="o">=</span><span class="s2">"83"</span><span class="p">;</span>



  <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>  <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"merchant"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"organization_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$organization_id</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"terminal_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$terminal_id</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"transaction_id"</span><span class="p">]</span><span class="o">=</span><span class="nv">$transaction_id</span><span class="p">;</span>

  <span class="c1">//Convert data from Array to JSON
</span>  <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

  <span class="c1">//Creating a CURL object to access the WS
</span>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
  <span class="c1">//Setting the address to connect to
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
  <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
  <span class="c1">//Setting data in JSON format
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
  <span class="c1">//Setting the proper header.
</span>  <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

  <span class="c1">//execute connection to the Web Service
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="c1">// get some data from the response
</span>  <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
  <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
  <span class="c1">//Get the header as string.
</span>  <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
  <span class="c1">//close connection to the Web Service
</span>  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

  <span class="c1">//Obtain the data from the void recently created
</span>  <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
    <span class="c1">//find the url of the void (Location header in the response)
</span>    <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
    <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
    <span class="c1">//Setting the proper header.
</span>    <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
    <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="c1">//execute connection to the Web Service
</span>    <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//close connection to the Web Service
</span>    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>    <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
    <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>    <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//There was an error with the WS
</span>  <span class="k">else</span><span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>

<pre><code class="highlight csharp"><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PayHubSamples</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Void</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RunVoid</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/void"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                <span class="n">var</span> <span class="n">refund</span> <span class="p">=</span> <span class="k">new</span>
                <span class="p">{</span>
                    <span class="n">merchant</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">organization_id</span> <span class="p">=</span> <span class="s">"10005"</span><span class="p">,</span>
                        <span class="n">terminal_id</span> <span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="n">transaction_id</span> <span class="p">=</span> <span class="s">"238"</span>
                <span class="p">};</span>

                <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">refund</span><span class="p">);</span>

                <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                <span class="p">{</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span><span class="c1">//You return this response.
</span>                    <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                    <span class="p">{</span>
                        <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span><span class="c1">//Created
</span>                        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="s">"Location"</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                                <span class="kt">int</span> <span class="n">lastSlash</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span>
                                <span class="kt">string</span> <span class="n">transactionId</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">lastSlash</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Transaction Id: "</span> <span class="p">+</span> <span class="n">transactionId</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/void"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>



    <span class="n">merchant</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"organization_id"</span><span class="o">=&gt;</span><span class="mi">10074</span><span class="p">,</span>
                <span class="s2">"terminal_id"</span><span class="o">=&gt;</span><span class="mi">134</span>
                <span class="p">}</span>

    <span class="c1">#transaction Id</span>
    <span class="n">transaction_id</span><span class="o">=</span><span class="s2">"114"</span>


    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"merchant"</span><span class="o">=&gt;</span><span class="n">merchant</span><span class="p">,</span><span class="s2">"transaction_id"</span><span class="o">=&gt;</span><span class="n">transaction_id</span><span class="p">}</span>

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre>

<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10005</span><span class="p">,</span><span class="w">
    </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"114"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="introduction">Introduction</h2>

<p>Run a Void when you need to cancel a transaction (either a sale or a refund) that has not yet been settled and that has not already been voided. This will avoid the customer being charged any amount at all and will release the pending funds, given the issuer supports doing so.</p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">POST https://api.payhub.com/v2/api/void</code></p>

<h2 id="elements">Elements</h2>

<h3 id="merchant">merchant</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>The Organization Id of the Merchant. This must match the Organization Id of the Merchant that the passed Oauth Token is associated with.</td>
</tr>
<tr>
<td>terminal_id</td>
<td>integer</td>
<td>The Merchant&rsquo;s Virtual Terminal Id for 3rd Party API.</td>
</tr>
</tbody></table>

<h3 id="transaction">Transaction</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>string</td>
<td>The Transaction Id to be voided.</td>
</tr>
</tbody></table>

<h2 id="response" style="clear: right;">Response</h2>

<pre><code class="highlight shell"><span class="o">{</span>
        <span class="s2">"version"</span>: 0,
        <span class="s2">"createdAt"</span>: <span class="s2">"2015-05-14T07:34:16.552-07:00"</span>,
        <span class="s2">"lastModified"</span>: <span class="s2">"2015-05-14T07:34:16.552-07:00"</span>,
        <span class="s2">"createdBy"</span>: <span class="s2">"10127"</span>,
        <span class="s2">"lastModifiedBy"</span>: <span class="s2">"10127"</span>,
        <span class="s2">"metaData"</span>: null,
        <span class="s2">"transaction_id"</span>: <span class="s2">"181257"</span>,
        <span class="s2">"lastVoidResponse"</span>: <span class="o">{</span>
          <span class="s2">"saleTransactionId"</span>: <span class="s2">"181257"</span>,
          <span class="s2">"voidTransactionId"</span>: <span class="s2">"181258"</span>,
          <span class="s2">"token"</span>: <span class="s2">"9999000000001853"</span>
        <span class="o">}</span>,
        <span class="s2">"merchantOrganizationId"</span>: 10127,
        <span class="s2">"_links"</span>: <span class="o">{</span>
          <span class="s2">"self"</span>: <span class="o">{</span>
            <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/void/181258"</span>
          <span class="o">}</span>,
          <span class="s2">"merchant"</span>: <span class="o">{</span>
            <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/void/181258/merchant"</span>
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>
</code></pre>

<h3 id="result">Result</h3>

<ul>
<li>A 201 code (created)</li>
<li>The Id of the Void in the Location header.
<br>Sample header in the response: <code class="prettyprint">Location ? https:// [payhub-api-server]:8251/payhubws/api/verify/5501b651da06a879ce520d4d</code>.
<br>If you do a GET request to this URL, you will get all the transaction information in JSON format.</li>
</ul>

<p>On the same way you  can query about merchant, customer, bill and card data details using the given URLs.</p>

<p><strong>Note:</strong> You will need to use the Oauth token in the header request for sales or any other transaction. For more information, see the OAUTH section.</p>

          <h1 id="refund-transaction">Refund Transaction</h1>

<pre><code class="highlight java"><span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Refund</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">RunRefund</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
      <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
      <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/refund"</span><span class="o">;</span>

      <span class="n">JSONObject</span> <span class="n">merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"organization_id"</span><span class="o">,</span> <span class="s">"10005"</span><span class="o">);</span><span class="c1">//You put your org id here</span>
      <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"terminal_id"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span><span class="c1">//You put your terminal id</span>

      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"merchant"</span><span class="o">,</span> <span class="n">merchant</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"record_format"</span><span class="o">,</span> <span class="s">"CREDIT_CARD"</span><span class="o">);</span>
      <span class="c1">//optional</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"transaction_id"</span><span class="o">,</span> <span class="s">"226"</span><span class="o">);</span>
      <span class="c1">//optional</span>
      <span class="n">JSONObject</span> <span class="n">bill</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
              <span class="n">JSONObject</span> <span class="n">base_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
                <span class="n">base_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"1275"</span><span class="o">);</span><span class="c1">//$12.75</span>
              <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"base_amount"</span><span class="o">,</span> <span class="n">base_amount</span><span class="o">);</span>
              <span class="n">JSONObject</span> <span class="n">shipping_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
                <span class="n">shipping_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"725"</span><span class="o">);</span><span class="c1">//$7.25</span>
              <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"shipping_amount"</span><span class="o">,</span> <span class="n">shipping_amount</span><span class="o">);</span>
              <span class="n">JSONObject</span> <span class="n">tax_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
                <span class="n">tax_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"113"</span><span class="o">);</span><span class="c1">//$1.13</span>
              <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"tax_amount"</span><span class="o">,</span> <span class="n">tax_amount</span><span class="o">);</span>
              <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"note"</span><span class="o">,</span> <span class="s">"Shipped as a gift"</span><span class="o">);</span>
              <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"invoice_number"</span><span class="o">,</span> <span class="s">"4645782"</span><span class="o">);</span>
              <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"po_number"</span><span class="o">,</span> <span class="s">"1234-654321"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bill"</span><span class="o">,</span> <span class="n">bill</span><span class="o">);</span>
      <span class="c1">//optional</span>
      <span class="n">JSONObject</span> <span class="n">card_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_number"</span><span class="o">,</span> <span class="s">"5466410004374507"</span><span class="o">);</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_expiry_date"</span><span class="o">,</span> <span class="s">"201809"</span><span class="o">);</span><span class="c1">// September 2018</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_1"</span><span class="o">,</span> <span class="s">"237 E 33rd Street"</span><span class="o">);</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_2"</span><span class="o">,</span> <span class="s">"3rd Floor"</span><span class="o">);</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_city"</span><span class="o">,</span> <span class="s">"New York"</span><span class="o">);</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_zip"</span><span class="o">,</span> <span class="s">"10016"</span><span class="o">);</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_state"</span><span class="o">,</span> <span class="s">"NY"</span><span class="o">);</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cvv_data"</span><span class="o">,</span> <span class="s">"998"</span><span class="o">);</span>
              <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cvv_code"</span><span class="o">,</span> <span class="s">"Y"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_data"</span><span class="o">,</span> <span class="n">card_data</span><span class="o">);</span>
      <span class="c1">//optional</span>
      <span class="n">JSONObject</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"company_name"</span><span class="o">,</span> <span class="s">"CBA Steakhouse"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"job_title"</span><span class="o">,</span> <span class="s">"Owner"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"email_address"</span><span class="o">,</span> <span class="s">"john@cbasteakhouse.com"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"web_address"</span><span class="o">,</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_number"</span><span class="o">,</span> <span class="s">"(917) 479 1349"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_ext"</span><span class="o">,</span> <span class="s">"5478"</span><span class="o">);</span>
              <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_type"</span><span class="o">,</span> <span class="s">"M"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"customer"</span><span class="o">,</span> <span class="n">customer</span><span class="o">);</span>

      <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

      <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
      <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span><span class="c1">//You return this response and work with it</span>

      <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
      <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">json</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">cnt</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'&lt;'</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span>
            <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
                <span class="o">||</span> <span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">" "</span><span class="o">)</span> <span class="o">?</span> <span class="s">"{\"MESSAGE\":\"NO RESPONSE...\"}"</span>
                <span class="o">:</span> <span class="n">json</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getReasonPhrase</span><span class="o">();</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Created"</span><span class="o">)){</span>
        <span class="n">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Header</span> <span class="n">header</span> <span class="o">:</span> <span class="n">headers</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)){</span>
            <span class="n">URL</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
            <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getPath</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">lastSlash</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">transactionId</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastSlash</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Transaction Id: "</span> <span class="o">+</span> <span class="n">transactionId</span> <span class="o">);</span>
          <span class="o">}</span>

        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonResponseObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>


    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
  <span class="nv">$trans_type</span> <span class="o">=</span> <span class="s2">"refund"</span><span class="p">;</span>
  <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
  <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="c1">//Defining the Web Service URL
</span>  <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/</span><span class="nv">$trans_type</span><span class="s2">"</span><span class="p">;</span>


  <span class="c1">//Defining data for the REFUND transaction
</span>  <span class="c1">// Merchant data (obtained from the payHub Virtual Terminal (3rd party integration)
</span>  <span class="nv">$organization_id</span> <span class="o">=</span> <span class="mi">10002</span><span class="p">;</span>
  <span class="nv">$terminal_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="nv">$oauth_token</span> <span class="o">=</span> <span class="s2">"22fe3c69-db70-4a8c-9aed-9a33ebb1e9b4"</span><span class="p">;</span>

  <span class="c1">//The rest of the data needed
</span>  <span class="nv">$record_format</span><span class="o">=</span><span class="s2">"CREDIT_CARD"</span><span class="p">;</span>
  <span class="nv">$transaction_id</span><span class="o">=</span><span class="s2">"82"</span><span class="p">;</span>



  <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>  <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"merchant"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"organization_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$organization_id</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"terminal_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$terminal_id</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"record_format"</span><span class="p">]</span><span class="o">=</span><span class="nv">$record_format</span><span class="p">;</span>
  <span class="c1">//optional
</span>  <span class="nv">$data</span><span class="p">[</span><span class="s2">"transaction_id"</span><span class="p">]</span><span class="o">=</span><span class="nv">$transaction_id</span><span class="p">;</span>
  <span class="c1">//optional
</span>  <span class="nv">$data</span><span class="p">[</span><span class="s2">"bill"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"base_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$base_amount</span><span class="p">),</span>
      <span class="s2">"shipping_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$shipping_amount</span><span class="p">),</span>
      <span class="s2">"tax_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$tax_amount</span><span class="p">));</span>
  <span class="c1">//optional
</span>  <span class="nv">$data</span><span class="p">[</span><span class="s2">"card_data"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"card_expiry_date"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_expiry_date</span><span class="s2">"</span><span class="p">,</span>
      <span class="s2">"cvv_data"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$cvv_data</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_address_1"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_1</span><span class="s2">"</span><span class="p">,</span>
      <span class="s2">"billing_address_2"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_2</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_city"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_city</span><span class="s2">"</span><span class="p">,</span>
      <span class="s2">"billing_state"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_state</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_zip"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_zip</span><span class="s2">"</span><span class="p">);</span>
  <span class="c1">//optional
</span>  <span class="nv">$data</span> <span class="p">[</span><span class="s2">"customer"</span><span class="p">]</span><span class="o">=</span>  <span class="k">array</span><span class="p">(</span><span class="s2">"first_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$first_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"last_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$last_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"company_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$company_name</span><span class="s2">"</span><span class="p">,</span>
      <span class="s2">"job_title"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$job_title</span><span class="s2">"</span><span class="p">,</span><span class="s2">"email_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$email_address</span><span class="s2">"</span><span class="p">,</span><span class="s2">"web_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$web_address</span><span class="s2">"</span><span class="p">,</span>
      <span class="s2">"phone_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_ext"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_ext</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_type"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_type</span><span class="s2">"</span><span class="p">);</span>

  <span class="c1">//Convert data from Array to JSON
</span>  <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

  <span class="c1">//Creating a CURL object to access the WS
</span>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
  <span class="c1">//Setting the address to connect to
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
  <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
  <span class="c1">//Setting data in JSON format
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
  <span class="c1">//Setting the proper header.
</span>  <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

  <span class="c1">//execute connection to the Web Service
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="c1">// get some data from the response
</span>  <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
  <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
  <span class="c1">//Get the header as string.
</span>  <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
  <span class="c1">//close connection to the Web Service
</span>  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

  <span class="c1">//Obtain the data from the refund recently created
</span>  <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
    <span class="c1">//find the url of the refund (Location header in the response)
</span>    <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
    <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
    <span class="c1">//Setting the proper header.
</span>    <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
    <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="c1">//execute connection to the Web Service
</span>    <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//close connection to the Web Service
</span>    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>    <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
    <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>    <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//There was an error with the WS
</span>  <span class="k">else</span><span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>

<pre><code class="highlight csharp"><span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PayHubSamples</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Refund</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RunRefund</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/refund"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                <span class="n">var</span> <span class="n">refund</span> <span class="p">=</span> <span class="k">new</span>
                <span class="p">{</span>
                    <span class="n">merchant</span> <span class="p">=</span> <span class="k">new</span>
                     <span class="p">{</span>
                         <span class="n">organization_id</span> <span class="p">=</span> <span class="s">"10005"</span><span class="p">,</span>
                         <span class="n">terminal_id</span> <span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                     <span class="p">},</span>
                    <span class="n">record_format</span> <span class="p">=</span> <span class="s">"CREDIT_CARD"</span><span class="p">,</span>
                    <span class="n">transaction_id</span> <span class="p">=</span> <span class="s">"228"</span><span class="p">,</span><span class="c1">//optional
</span>                    <span class="n">bill</span> <span class="p">=</span> <span class="k">new</span> <span class="c1">//optional 
</span>                    <span class="p">{</span>
                        <span class="n">base_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"1275"</span> <span class="c1">//$12.75
</span>                        <span class="p">},</span>
                        <span class="n">shipping_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"725"</span> <span class="c1">//$7.25
</span>                        <span class="p">},</span>
                        <span class="n">tax_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"113"</span> <span class="c1">//$1.13
</span>                        <span class="p">},</span>
                        <span class="n">note</span> <span class="p">=</span> <span class="s">"Shipped as a gift"</span><span class="p">,</span>
                        <span class="n">invoice_number</span> <span class="p">=</span> <span class="s">"4645782"</span><span class="p">,</span>
                        <span class="n">po_number</span> <span class="p">=</span> <span class="s">"1234-654321"</span>
                    <span class="p">},</span>
                    <span class="n">card_data</span> <span class="p">=</span> <span class="k">new</span> <span class="c1">//optional
</span>                    <span class="p">{</span>
                        <span class="n">card_number</span> <span class="p">=</span> <span class="s">"5466410004374507"</span><span class="p">,</span>
                        <span class="n">card_expiry_date</span> <span class="p">=</span> <span class="s">"201809"</span><span class="p">,</span> <span class="c1">//September 2018
</span>                        <span class="n">billing_address_1</span> <span class="p">=</span> <span class="s">"237 E 33rd Street"</span><span class="p">,</span>
                        <span class="n">billing_address_2</span> <span class="p">=</span> <span class="s">"3rd Floor"</span><span class="p">,</span>
                        <span class="n">billing_city</span> <span class="p">=</span> <span class="s">"New York"</span><span class="p">,</span>
                        <span class="n">billing_state</span> <span class="p">=</span> <span class="s">"NY"</span><span class="p">,</span>
                        <span class="n">billing_zip</span> <span class="p">=</span> <span class="s">"10016"</span><span class="p">,</span>
                        <span class="n">cvv_data</span> <span class="p">=</span> <span class="s">"998"</span><span class="p">,</span>
                        <span class="n">cvv_code</span> <span class="p">=</span> <span class="s">"Y"</span>
                    <span class="p">},</span>
                    <span class="n">customer</span> <span class="p">=</span> <span class="k">new</span> <span class="c1">//optional
</span>                    <span class="p">{</span>
                        <span class="n">first_name</span> <span class="p">=</span> <span class="s">"John"</span><span class="p">,</span>
                        <span class="n">last_name</span> <span class="p">=</span> <span class="s">"Smith"</span><span class="p">,</span>
                        <span class="n">company_name</span> <span class="p">=</span> <span class="s">"CBA Stakehouse"</span><span class="p">,</span>
                        <span class="n">job_title</span> <span class="p">=</span> <span class="s">"Owner"</span><span class="p">,</span>
                        <span class="n">email_address</span> <span class="p">=</span> <span class="s">"john@cbastakehouse.com"</span><span class="p">,</span>
                        <span class="n">web_address</span> <span class="p">=</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="p">,</span>
                        <span class="n">phone_number</span> <span class="p">=</span> <span class="s">"(917) 479 1349"</span><span class="p">,</span>
                        <span class="n">phone_ext</span> <span class="p">=</span> <span class="s">"5478"</span><span class="p">,</span>
                        <span class="n">phone_type</span> <span class="p">=</span> <span class="s">"M"</span>
                    <span class="p">},</span>
                    <span class="n">record_format</span> <span class="p">=</span> <span class="s">"CC"</span>
                <span class="p">};</span>

                <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">refund</span><span class="p">);</span>

                <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                <span class="p">{</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span><span class="c1">//You return this response.
</span>                    <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                    <span class="p">{</span>
                        <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span><span class="c1">//Created
</span>                        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="s">"Location"</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                                <span class="kt">int</span> <span class="n">lastSlash</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span>
                                <span class="kt">string</span> <span class="n">transactionId</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">lastSlash</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Transaction Id: "</span> <span class="p">+</span> <span class="n">transactionId</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<pre><code class="highlight json"><span class="w">    </span><span class="p">{</span><span class="w">

      </span><span class="s2">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10005</span><span class="p">,</span><span class="w">
        </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">},</span><span class="w">

      </span><span class="s2">"record_format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT_CARD"</span><span class="p">,</span><span class="w">

      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"114"</span><span class="p">,</span><span class="w">

      </span><span class="s2">"bill"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"base_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

                </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.30</span><span class="w">
            </span><span class="p">},</span><span class="w">

            </span><span class="s2">"shipping_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

                </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.20</span><span class="w">
            </span><span class="p">},</span><span class="w">

            </span><span class="s2">"tax_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

                </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.10</span><span class="w">
            </span><span class="p">},</span><span class="w">

            </span><span class="s2">"note"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note."</span><span class="p">,</span><span class="w">

            </span><span class="s2">"invoice_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"This is an Invoice number.XXX"</span><span class="p">,</span><span class="w">
             </span><span class="s2">"po_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"a test po number"</span><span class="w">

        </span><span class="p">},</span><span class="w">

        </span><span class="s2">"card_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">


            </span><span class="s2">"card_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"5466410004374507"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"card_expiry_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"202011"</span><span class="p">,</span><span class="w">

            </span><span class="s2">"billing_address_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billing_address_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billing_city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"San Rafael"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billing_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billing_zip"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"99997-0003"</span><span class="w">



        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"first_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"First"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Contact"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"company_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payhub Inc"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"job_title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Software Engineer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"test@payhub.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"web_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://payhub.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phone_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"(415) 479 1349"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phone_ext"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phone_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="w">


        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/refund"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>



    <span class="n">merchant</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"organization_id"</span><span class="o">=&gt;</span><span class="mi">10074</span><span class="p">,</span>
            <span class="s2">"terminal_id"</span><span class="o">=&gt;</span><span class="mi">134</span>
    <span class="p">}</span>
    <span class="c1">#Record Format </span>
    <span class="n">record_format</span><span class="o">=</span><span class="s2">"CREDIT_CARD"</span>

    <span class="c1">#transaction Id (optional)</span>
    <span class="n">transaction_id</span><span class="o">=</span><span class="s2">"114"</span>

    <span class="c1"># bill data (optional)</span>
        <span class="n">bill</span><span class="o">=</span> <span class="p">{</span>
                <span class="s2">"base_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
                <span class="s2">"shipping_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
                <span class="s2">"tax_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
                <span class="s2">"note"</span><span class="o">=&gt;</span><span class="s2">"this a sample note"</span><span class="p">,</span>
                <span class="s2">"invoice_number"</span><span class="o">=&gt;</span><span class="s2">"this is an invoice"</span><span class="p">,</span>
                <span class="s2">"po_number"</span><span class="o">=&gt;</span><span class="s2">"a test po number"</span>
        <span class="p">}</span>
        <span class="c1">#Credit card data (optional)</span>
        <span class="n">card_data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">"card_number"</span><span class="o">=&gt;</span><span class="s2">"4055011111111111"</span><span class="p">,</span>
                    <span class="s2">"card_expiry_date"</span><span class="o">=&gt;</span><span class="s2">"202012"</span><span class="p">,</span>
                    <span class="s2">"billing_address_1"</span><span class="o">=&gt;</span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span>
                    <span class="s2">"billing_address_2"</span><span class="o">=&gt;</span><span class="s2">"On the corner"</span><span class="p">,</span>
                    <span class="s2">"billing_city"</span><span class="o">=&gt;</span><span class="s2">"San Rafael"</span><span class="p">,</span>
                    <span class="s2">"billing_state"</span><span class="o">=&gt;</span><span class="s2">"CA"</span><span class="p">,</span>
                    <span class="s2">"billing_zip"</span><span class="o">=&gt;</span><span class="s2">"99997-0003"</span>
                    <span class="p">}</span>
        <span class="c1"># Customer data (optional)</span>
        <span class="n">customer</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"first_name"</span><span class="o">=&gt;</span><span class="s2">"First"</span><span class="p">,</span>
                    <span class="s2">"last_name"</span><span class="o">=&gt;</span><span class="s2">"Contact"</span><span class="p">,</span>
                    <span class="s2">"company_name"</span><span class="o">=&gt;</span><span class="s2">"Payhub Inc"</span><span class="p">,</span>
                    <span class="s2">"job_title"</span><span class="o">=&gt;</span><span class="s2">"Software Engineer"</span><span class="p">,</span>
                    <span class="s2">"email_address"</span><span class="o">=&gt;</span><span class="s2">"jhon@company.com"</span><span class="p">,</span>
                    <span class="s2">"web_address"</span><span class="o">=&gt;</span><span class="s2">"http://payhub.com"</span><span class="p">,</span>
                    <span class="s2">"phone_number"</span><span class="o">=&gt;</span><span class="s2">"(415) 479 1349"</span><span class="p">,</span>
                    <span class="s2">"phone_ext"</span><span class="o">=&gt;</span><span class="s2">"123"</span><span class="p">,</span>
                    <span class="s2">"phone_type"</span><span class="o">=&gt;</span><span class="s2">"M"</span>
        <span class="p">}</span>

    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"merchant"</span><span class="o">=&gt;</span><span class="n">merchant</span><span class="p">,</span><span class="s2">"record_format"</span><span class="o">=&gt;</span><span class="n">record_format</span><span class="p">,</span><span class="s2">"transaction_id"</span><span class="o">=&gt;</span><span class="n">transaction_id</span><span class="p">,</span><span class="s2">"bill"</span><span class="o">=&gt;</span><span class="n">bill</span><span class="p">,</span><span class="s2">"customer"</span><span class="o">=&gt;</span><span class="n">customer</span><span class="p">,</span><span class="s2">"card_data"</span><span class="o">=&gt;</span><span class="n">card_data</span><span class="p">}</span>

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>

</code></pre>

<h2 id="introduction">Introduction</h2>

<p>This topic provides the information the Refund transaction.</p>

<p>Run the Refund transaction when you want to refund either the full amount or a partial amount of a sale. 
The refund amount it doesn&rsquo;t needs to be the same as the total amount that was originally charged in the sale. 
The amount is refunded to the credit or debit card that was originally charged.
Also, you can Refund amounts to your credit or debit card without enter the transaction id.</p>

<h3 id="request-method">Request Method</h3>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">https://api.payhub.com/api/v2/refund</code></p>

<h2 id="elements">Elements</h2>

<h3 id="merchant-(required)">merchant (required)</h3>

<table><thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>The organization id of the merchant who did the sale that you are trying to refund.</td>
</tr>
<tr>
<td>terminal_id</td>
<td>integer</td>
<td>The terminal id of the merchant from where the sale is done.</td>
</tr>
<tr>
<td>record_format</td>
<td>string</td>
<td>To specify if the sale has to be made over a credit card, debit card or cash payment. <br>The accepted values are: <ul><li>CASH_PAYMENT</li><li>CREDIT_CARD</li><li>DEBIT_CARD</li></ul></td>
</tr>
</tbody></table>

<h3 id="transaction-(optional)">Transaction (optional)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>integer</td>
<td>The transaction id of the sale you want to refund.</td>
</tr>
</tbody></table>

<p><strong>Note:</strong> you need the transaction_id if you want to refund a partial amount or the total ammount.If you want to refund an amount to your credit or debit card you don&rsquo;t need the transaction Id at all.</p>

<h3 id="customer-(required-to-create-refunds-that-aren&#39;t-associated-to-existent-transactions)">Customer (required to create refunds that aren&rsquo;t associated to existent transactions)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>The first name of the customer.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The last name of the customer.</td>
</tr>
<tr>
<td>company_name</td>
<td>string, optional</td>
<td>The company name of the customer.</td>
</tr>
<tr>
<td>job_title</td>
<td>string, optional</td>
<td>The job title of the customer.</td>
</tr>
<tr>
<td>email_address</td>
<td>string, optional</td>
<td>The valid email address of the customer. The email address must be syntactically correct. If you do not specify the email address, you must provide a phone_number to identify the customer.</td>
</tr>
<tr>
<td>web_address</td>
<td>string, optional</td>
<td>The web address of the customer. The web address, if you specify, must be syntactically valid web address.</td>
</tr>
<tr>
<td>phone_number</td>
<td>string, optional</td>
<td>The phone number of the customer. The phone number must be syntactically correct. <br>For example, (415) 234 5678, or 4152345678, or (415) 234-5678. <br>If you do not specify the phone number, you must provide an email_address to identify the customer.</td>
</tr>
<tr>
<td>phone_ext</td>
<td>string, optional</td>
<td>The phone extension number of the customer.</td>
</tr>
<tr>
<td>phone_type</td>
<td>string, optional</td>
<td>The type ([&lsquo;H&rsquo; or &#39;W&rsquo; or &rsquo;M&rsquo;]) of the phone number: H (Home), W (Work), M (Mobile).</td>
</tr>
</tbody></table>

<h3 id="card_data-(required-to-create-refunds-that-aren&#39;t-associated-to-existent-transactions)">card_data (required to create refunds that aren&rsquo;t associated to existent transactions)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tokenized_card</td>
<td>string, optional</td>
<td>This is the 16 character PayHub-specific tokenized string representing the card number. <br>The value for the given customer and credit card can be obtained by examining the last Sale by accessing the link to the card data that was successfully created. It is safer (and recommended) for the third party client to store and use this string in any future requests for the same customer.</td>
</tr>
<tr>
<td>card_number</td>
<td>string, optional</td>
<td>This is the 16 character card number. <br> The card number is not stored by the API in plain text. The response will contain a tokenized card number that should always be used in future requests, (for the same Customer) in place of this property.</td>
</tr>
<tr>
<td>track1_data</td>
<td>string, optional</td>
<td>This is the string read by the swiper (It contents track 1 data without sentinels).</td>
</tr>
<tr>
<td>track2_data</td>
<td>string, optional</td>
<td>This is the string read by the swiper (It contents track 2 data without sentinels).</td>
</tr>
<tr>
<td>encrypted_track _data</td>
<td>Optional</td>
<td><ul><li><strong>encrypted_track</strong> (string, optional): This is the string read by the swiper. This string contains the encrypted track data. </li><li><strong>swiper_brand</strong> (string, optional): The swiper brand&rsquo;s name with capital letters. Default value is <strong>IDTECH</strong>.</li><li><strong>swiper_model</strong> (string, optional): The swiper model with capital letters. Default value is <strong>UNIMAGII</strong>.</li></ul></td>
</tr>
<tr>
<td>billing_address_1</td>
<td>string, optional</td>
<td>The billing street address of the customer.</td>
</tr>
<tr>
<td>billing_address_2</td>
<td>string, optional</td>
<td>The additional billing street address of the customer.</td>
</tr>
<tr>
<td>billing_city</td>
<td>string, optional</td>
<td>The billing city of the customer.</td>
</tr>
<tr>
<td>billing_state</td>
<td>string, optional</td>
<td>The billing state Code of the customer. <br>For example, CA, WI, NY, etc. <br>The sate codes should be for the states in the USA.</td>
</tr>
<tr>
<td>billing_zip</td>
<td>string, optional</td>
<td>The billing Zip Code of the customer. <br>The zip code must be either 5 digits or 5 plus four separated by a &rsquo;-&rsquo;. <br>The zip code is required if the merchant has turned ON the AVS flag.</td>
</tr>
<tr>
<td>card_expiry_date</td>
<td>string</td>
<td>The card expiry date in the <em>YYYYMM</em> format.</td>
</tr>
</tbody></table>

<h3 id="bill-(required-to-create-refunds-with-different-ammounts,-or-to-create-new-refunds-that-aren&#39;t-associated-to-existent-transactions)">bill (required to create refunds with different ammounts, or to create new refunds that aren&rsquo;t associated to existent transactions)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>base_amount</td>
<td>TransactionAmount</td>
<td>The base amount of the recurring bill. <br>The total amount charged will be the sum of this amount and (any) &#39;shipping_amount&rsquo; and &#39;tax_amount&rsquo;.</td>
</tr>
<tr>
<td>shipping_amount</td>
<td>TransactionAmount, optional</td>
<td>The shipping amount for the transaction. <br>This value will be included in the total amount charged.</td>
</tr>
<tr>
<td>tax_amount</td>
<td>TransactionAmount, optional</td>
<td>The tax amount for the transaction. <br>This value will be included in the total amount charged.</td>
</tr>
<tr>
<td>invoice_number</td>
<td>string, optional</td>
<td>The invoice number for the transaction.</td>
</tr>
<tr>
<td>po_number</td>
<td>string, optional</td>
<td>The purchase order number for the transaction.</td>
</tr>
<tr>
<td>note</td>
<td>string, optional</td>
<td>A free format note for the transaction. The note will be read by the merchant.</td>
</tr>
</tbody></table>

<p><strong>Note:</strong> One of the following fields must be present: <ul><li>tokenized_card</li><li>card_number</li><li>track1_data</li><li>track2_data</li><li>encrypted_track_data</li></ul></p>

<h2 id="response" style="clear: right;">Response</h2>

<pre><code class="highlight shell"><span class="o">{</span>
        <span class="s2">"version"</span>: 0,
        <span class="s2">"createdAt"</span>: <span class="s2">"2015-05-15T13:16:27.466-07:00"</span>,
        <span class="s2">"lastModified"</span>: <span class="s2">"2015-05-15T13:16:27.466-07:00"</span>,
        <span class="s2">"createdBy"</span>: <span class="s2">"10127"</span>,
        <span class="s2">"lastModifiedBy"</span>: <span class="s2">"10127"</span>,
        <span class="s2">"metaData"</span>: null,
        <span class="s2">"transaction_id"</span>: 181293,
        <span class="s2">"record_format"</span>: <span class="s2">"CREDIT_CARD"</span>,
        <span class="s2">"lastRefundResponse"</span>: <span class="o">{</span>
            <span class="s2">"saleTransactionId"</span>: <span class="s2">"43063"</span>,//it will be empty <span class="k">if </span>the refund is not associated to one transaction.
            <span class="s2">"refundTransactionId"</span>: <span class="s2">"43064"</span>,
            <span class="s2">"token"</span>: null,
            <span class="s2">"approvalCode"</span>: <span class="s2">"      "</span>,
            <span class="s2">"processedDateTime"</span>: null,
            <span class="s2">"avsResultCode"</span>: <span class="s2">"0"</span>,
            <span class="s2">"verificationResultCode"</span>: <span class="s2">""</span>,
            <span class="s2">"batchId"</span>: <span class="s2">"133"</span>,
            <span class="s2">"responseCode"</span>: <span class="s2">"00"</span>,
            <span class="s2">"responseText"</span>: <span class="s2">"OFFLINE APPROVAL"</span>,
            <span class="s2">"cisNote"</span>: <span class="s2">""</span>,
            <span class="s2">"riskStatusResponseText"</span>: <span class="s2">""</span>,
            <span class="s2">"riskStatusResponseCode"</span>: <span class="s2">""</span>,
            <span class="s2">"refundDateTime"</span>: <span class="s2">"2016-01-20 17:46:36"</span>,
            <span class="s2">"customerReference"</span>: <span class="o">{</span>
              <span class="s2">"customerId"</span>: 0,
              <span class="s2">"customerEmail"</span>: <span class="s2">""</span>,
              <span class="s2">"customerPhones"</span>: <span class="o">[]</span>
            <span class="o">}</span>,
            <span class="s2">"billingReferences"</span>: <span class="o">{</span>
              <span class="s2">"tokenizedCard"</span>: <span class="s2">"9999000000001998"</span>,
              <span class="s2">"customerId"</span>: 0,
              <span class="s2">"customerCardId"</span>: 486,
              <span class="s2">"customerBillId"</span>: 1,
              <span class="s2">"cardObscured"</span>: <span class="s2">"XXXXXXXXXXXX4507"</span>,
              <span class="s2">"cardType"</span>: <span class="s2">"MasterCard"</span>
            <span class="o">}</span>
          <span class="o">}</span>,
        <span class="s2">"settlementStatus"</span>: <span class="s2">"Not settled"</span>,

        <span class="s2">"merchantOrganizationId"</span>: 10127,
        <span class="s2">"_links"</span>: <span class="o">{</span>
          <span class="s2">"self"</span>: <span class="o">{</span>
            <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/refund/181332"</span>
          <span class="o">}</span>,
          <span class="s2">"merchant"</span>: <span class="o">{</span>
            <span class="s2">"href"</span>: <span class="s2">"https://api.payhub.com/api/v2/refund/181332/merchant"</span>
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>
</code></pre>

<h3 id="result">Result</h3>

<ul>
<li>A 201 code (created)</li>
<li>The Id of the Refund in the Location header.
<br>Sample header in the response: <code class="prettyprint">Location ? https:// [payhub-api-server]:8251/payhubws/api/refund/5501b651da06a879ce520d4d</code>.
<br>If you do a GET request to this URL, you will get all the transaction information in JSON format.</li>
</ul>

<p>On the same way you  can query about merchant, customer, bill and card data details using the given URLs.</p>

<p><strong>Note:</strong> You will need to use the Oauth token in the header request for sales or any other transaction. For more information, see the OAUTH section.</p>

          <h1 id="recurring-bill-transaction">Recurring Bill Transaction</h1>

<pre><code class="highlight java"><span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONArray</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecurringBill</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">CreateRecurringBill</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
      <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
      <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/recurring-bill"</span><span class="o">;</span>

      <span class="n">JSONObject</span> <span class="n">merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"organization_id"</span><span class="o">,</span> <span class="s">"10005"</span><span class="o">);</span><span class="c1">//You put your org id here</span>
        <span class="n">merchant</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"terminal_id"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span><span class="c1">//You put your terminal id</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"merchant"</span><span class="o">,</span> <span class="n">merchant</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">bill</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">JSONObject</span> <span class="n">base_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">base_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"1275"</span><span class="o">);</span><span class="c1">//$12.75</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"base_amount"</span><span class="o">,</span> <span class="n">base_amount</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">shipping_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">shipping_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"725"</span><span class="o">);</span><span class="c1">//$7.25</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"shipping_amount"</span><span class="o">,</span> <span class="n">shipping_amount</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">tax_amount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">tax_amount</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"113"</span><span class="o">);</span><span class="c1">//$1.13</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"tax_amount"</span><span class="o">,</span> <span class="n">tax_amount</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"note"</span><span class="o">,</span> <span class="s">"Shipped as a gift"</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"invoice_number"</span><span class="o">,</span> <span class="s">"4645782"</span><span class="o">);</span>
        <span class="n">bill</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"po_number"</span><span class="o">,</span> <span class="s">"1234-654321"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bill"</span><span class="o">,</span> <span class="n">bill</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">card_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_number"</span><span class="o">,</span> <span class="s">"5466410004374507"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_expiry_date"</span><span class="o">,</span> <span class="s">"201809"</span><span class="o">);</span><span class="c1">// September 2018</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_1"</span><span class="o">,</span> <span class="s">"237 E 33rd Street"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_address_2"</span><span class="o">,</span> <span class="s">"3rd Floor"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_zip"</span><span class="o">,</span> <span class="s">"10016"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_city"</span><span class="o">,</span> <span class="s">"New York"</span><span class="o">);</span>
        <span class="n">card_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"billing_state"</span><span class="o">,</span> <span class="s">"NY"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"card_data"</span><span class="o">,</span> <span class="n">card_data</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"Smith"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"company_name"</span><span class="o">,</span> <span class="s">"CBA Steakhouse"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"job_title"</span><span class="o">,</span> <span class="s">"Owner"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"email_address"</span><span class="o">,</span> <span class="s">"john@cbasteakhouse.com"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_number"</span><span class="o">,</span> <span class="s">"(917) 479 1349"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_ext"</span><span class="o">,</span> <span class="s">"5478"</span><span class="o">);</span>
        <span class="n">customer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_type"</span><span class="o">,</span> <span class="s">"M"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"customer"</span><span class="o">,</span> <span class="n">customer</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">schedule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
        <span class="n">schedule</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"schedule_type"</span><span class="o">,</span> <span class="s">"S"</span><span class="o">);</span>
        <span class="n">JSONObject</span> <span class="n">specific_dates_schedule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
          <span class="n">JSONArray</span> <span class="n">specific_dates</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONArray</span><span class="o">();</span>
            <span class="n">specific_dates</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="s">"2016-02-01"</span><span class="o">);</span>
            <span class="n">specific_dates</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">"2016-10-31"</span><span class="o">);</span>
          <span class="n">specific_dates_schedule</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"specific_dates"</span><span class="o">,</span> <span class="n">specific_dates</span><span class="o">);</span>
        <span class="n">schedule</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"specific_dates_schedule"</span><span class="o">,</span> <span class="n">specific_dates_schedule</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"schedule"</span><span class="o">,</span> <span class="n">schedule</span><span class="o">);</span>

      <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

      <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
      <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span><span class="c1">//You return this response and work with it</span>

      <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
      <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">json</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">cnt</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">!=</span> <span class="sc">'&lt;'</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span>
            <span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
                <span class="o">||</span> <span class="n">json</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">" "</span><span class="o">)</span> <span class="o">?</span> <span class="s">"{\"MESSAGE\":\"NO RESPONSE...\"}"</span>
                <span class="o">:</span> <span class="n">json</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getReasonPhrase</span><span class="o">();</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Created"</span><span class="o">)){</span>
        <span class="n">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Header</span> <span class="n">header</span> <span class="o">:</span> <span class="n">headers</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Location"</span><span class="o">)){</span>
            <span class="n">URL</span> <span class="n">location</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">header</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
            <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="na">getPath</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">lastSlash</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">transactionId</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastSlash</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Recurring Bill Id: "</span> <span class="o">+</span> <span class="n">transactionId</span> <span class="o">);</span> <span class="c1">//Last resource of the path</span>
          <span class="o">}</span>

        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jsonResponseObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>


    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>

<pre><code class="highlight php">
<span class="cp">&lt;?php</span>
  <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
  <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="c1">//Defining the Web Service URL
</span>  <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/</span><span class="nv">$trans_type</span><span class="s2">"</span><span class="p">;</span>

  <span class="c1">//Defining data for the RECURRING BILL transaction
</span>  <span class="c1">// Merchant data (obtained from the payHub Virtual Terminal (3rd party integration)
</span>  <span class="nv">$organization_id</span> <span class="o">=</span> <span class="mi">10002</span><span class="p">;</span>
  <span class="nv">$terminal_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="nv">$oauth_token</span> <span class="o">=</span> <span class="s2">"22fe3c69-db70-4a8c-9aed-9a33ebb1e9b4"</span><span class="p">;</span>
  <span class="c1">// bill data
</span>  <span class="nv">$base_amount</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
  <span class="nv">$shipping_amount</span> <span class="o">=</span> <span class="mf">1.23</span><span class="p">;</span>
  <span class="nv">$tax_amount</span> <span class="o">=</span> <span class="mf">1.00</span><span class="p">;</span>
  <span class="nv">$note</span> <span class="o">=</span> <span class="s2">"this a sample note"</span><span class="p">;</span>
  <span class="nv">$invoice_number</span> <span class="o">=</span> <span class="s2">"a-00240"</span><span class="p">;</span>
  <span class="nv">$po_number</span> <span class="o">=</span> <span class="s2">"56"</span><span class="p">;</span>
  <span class="c1">//Credit card data
</span>  <span class="nv">$card_number</span> <span class="o">=</span> <span class="s2">"5466410004374507"</span><span class="p">;</span>
  <span class="nv">$card_expiry_date</span> <span class="o">=</span> <span class="s2">"202011"</span><span class="p">;</span>
  <span class="nv">$cvv_data</span> <span class="o">=</span> <span class="s2">"998"</span><span class="p">;</span>
  <span class="nv">$billing_address_1</span> <span class="o">=</span> <span class="s2">"2350 Kerner Blvd"</span><span class="p">;</span>
  <span class="nv">$billing_address_2</span> <span class="o">=</span> <span class="s2">"On the corner"</span><span class="p">;</span>
  <span class="nv">$billing_city</span> <span class="o">=</span> <span class="s2">"San Rafael"</span><span class="p">;</span>
  <span class="nv">$billing_state</span> <span class="o">=</span> <span class="s2">"CA"</span><span class="p">;</span>
  <span class="nv">$billing_zip</span> <span class="o">=</span> <span class="s2">"94901"</span><span class="p">;</span>
  <span class="c1">// Customer data
</span>  <span class="nv">$first_name</span> <span class="o">=</span> <span class="s2">"First"</span><span class="p">;</span>
  <span class="nv">$last_name</span> <span class="o">=</span> <span class="s2">"Contact"</span><span class="p">;</span>
  <span class="nv">$company_name</span> <span class="o">=</span> <span class="s2">"Payhub Inc"</span><span class="p">;</span>
  <span class="nv">$job_title</span> <span class="o">=</span> <span class="s2">"Software Engineer"</span><span class="p">;</span>
  <span class="nv">$email_address</span> <span class="o">=</span> <span class="s2">"jhon@company.com"</span><span class="p">;</span>
  <span class="nv">$web_address</span> <span class="o">=</span> <span class="s2">"https://payhub.com"</span><span class="p">;</span>
  <span class="nv">$phone_number</span> <span class="o">=</span> <span class="s2">"(415) 479 1349"</span><span class="p">;</span>
  <span class="nv">$phone_ext</span> <span class="o">=</span> <span class="s2">"123"</span><span class="p">;</span>
  <span class="nv">$phone_type</span> <span class="o">=</span> <span class="s2">"M"</span><span class="p">;</span>
  <span class="c1">// Schedule data
</span>  <span class="nv">$schedule_type</span> <span class="o">=</span> <span class="s2">"M"</span><span class="p">;</span>
  <span class="nv">$bill_generation_interval</span><span class="o">=</span><span class="s2">"1"</span><span class="p">;</span>
  <span class="c1">//Schedule - schedule_start_and_end (object)
</span>  <span class="nv">$start_date</span><span class="o">=</span><span class="s2">"2015-06-01"</span><span class="p">;</span>
  <span class="nv">$end_date_type</span><span class="o">=</span><span class="s2">"A"</span><span class="p">;</span>
  <span class="nv">$end_after_bill_count</span><span class="o">=</span><span class="s2">"6"</span><span class="p">;</span>
  <span class="c1">//Schedule - monthly_schedule (object)
</span>  <span class="nv">$monthly_type</span><span class="o">=</span><span class="s2">"E"</span><span class="p">;</span>
  <span class="c1">//This is an array, put the elements separated by ","
</span>  <span class="nv">$monthly_each_days</span><span class="o">=</span><span class="s2">"1"</span><span class="p">;</span>

  <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>  <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"merchant"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"organization_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$organization_id</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"terminal_id"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$terminal_id</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"bill"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"base_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$base_amount</span><span class="p">),</span>
    <span class="s2">"shipping_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$shipping_amount</span><span class="p">),</span>
    <span class="s2">"tax_amount"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"currency"</span> <span class="o">=&gt;</span> <span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span> <span class="o">=&gt;</span> <span class="nv">$tax_amount</span><span class="p">));</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"card_data"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"card_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"card_expiry_date"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$card_expiry_date</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"cvv_data"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$cvv_data</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_address_1"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_1</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"billing_address_2"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_address_2</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_city"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_city</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"billing_state"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_state</span><span class="s2">"</span><span class="p">,</span><span class="s2">"billing_zip"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$billing_zip</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"customer"</span><span class="p">]</span><span class="o">=</span>  <span class="k">array</span><span class="p">(</span><span class="s2">"first_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$first_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"last_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$last_name</span><span class="s2">"</span><span class="p">,</span><span class="s2">"company_name"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$company_name</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"job_title"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$job_title</span><span class="s2">"</span><span class="p">,</span><span class="s2">"email_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$email_address</span><span class="s2">"</span><span class="p">,</span><span class="s2">"web_address"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$web_address</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"phone_number"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_number</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_ext"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_ext</span><span class="s2">"</span><span class="p">,</span><span class="s2">"phone_type"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phone_type</span><span class="s2">"</span><span class="p">);</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"schedule"</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"schedule_type"</span> <span class="o">=&gt;</span> <span class="nv">$schedule_type</span><span class="p">,</span> <span class="s2">"bill_generation_interval"</span> <span class="o">=&gt;</span> <span class="nv">$bill_generation_interval</span><span class="p">,</span>
    <span class="s2">"schedule_start_and_end"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"start_date"</span> <span class="o">=&gt;</span> <span class="nv">$start_date</span><span class="p">,</span> <span class="s2">"end_date_type"</span> <span class="o">=&gt;</span> <span class="nv">$end_date_type</span><span class="p">,</span> <span class="s2">"end_after_bill_count"</span> <span class="o">=&gt;</span> <span class="nv">$end_after_bill_count</span><span class="p">),</span>
    <span class="s2">"monthly_schedule"</span> <span class="o">=&gt;</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"monthly_type"</span> <span class="o">=&gt;</span> <span class="nv">$monthly_type</span><span class="p">));</span>
  <span class="nv">$data</span><span class="p">[</span><span class="s2">"schedule"</span><span class="p">][</span><span class="s2">"monthly_schedule"</span><span class="p">][</span><span class="s2">"monthly_each_days"</span><span class="p">]</span><span class="o">=</span><span class="nb">explode</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span><span class="nv">$monthly_each_days</span><span class="p">);</span>

  <span class="c1">//Convert data from Array to JSON
</span>  <span class="k">echo</span> <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

  <span class="c1">//Creating a CURL object to access the WS
</span>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
  <span class="c1">//Setting the address to connect to
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
  <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
  <span class="c1">//Setting data in JSON format
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
  <span class="c1">//Setting the proper header.
</span>  <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

  <span class="c1">//execute connection to the Web Service
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="c1">// get some data from the response
</span>  <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
  <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
  <span class="c1">//Get the header as string.
</span>  <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
  <span class="c1">//close connection to the Web Service
</span>  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

  <span class="c1">//Obtain the data from the recurring bill recently created
</span>  <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
    <span class="c1">//find the url of the recurring bill (Location header in the response)
</span>    <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
    <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
    <span class="c1">//Setting the proper header.
</span>    <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
    <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="c1">//execute connection to the Web Service
</span>    <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//close connection to the Web Service
</span>    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>    <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
    <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>    <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//There was an error with the WS
</span>  <span class="k">else</span><span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>

<pre><code class="highlight csharp"><span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PayHubSamples</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">RecurringBilling</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">CreateRecurringBilling</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/recurring-bill"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                <span class="n">var</span> <span class="n">recurringBill</span> <span class="p">=</span> <span class="k">new</span>
                <span class="p">{</span>
                    <span class="n">merchant</span> <span class="p">=</span> <span class="k">new</span>
                     <span class="p">{</span>
                         <span class="n">organization_id</span> <span class="p">=</span> <span class="s">"10005"</span><span class="p">,</span>
                         <span class="n">terminal_id</span> <span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                     <span class="p">},</span>
                    <span class="n">bill</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">base_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"1275"</span> <span class="c1">//$12.75
</span>                        <span class="p">},</span>
                        <span class="n">shipping_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"725"</span> <span class="c1">//$7.25
</span>                        <span class="p">},</span>
                        <span class="n">tax_amount</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">amount</span> <span class="p">=</span> <span class="s">"113"</span> <span class="c1">//$1.13
</span>                        <span class="p">},</span>
                        <span class="n">note</span> <span class="p">=</span> <span class="s">"Shipped as a gift"</span><span class="p">,</span>
                        <span class="n">invoice_number</span> <span class="p">=</span> <span class="s">"4645782"</span><span class="p">,</span>
                        <span class="n">po_number</span> <span class="p">=</span> <span class="s">"1234-654321"</span>
                    <span class="p">},</span>
                    <span class="n">card_data</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">card_number</span> <span class="p">=</span> <span class="s">"5466410004374507"</span><span class="p">,</span>
                        <span class="n">card_expiry_date</span> <span class="p">=</span> <span class="s">"201809"</span><span class="p">,</span> <span class="c1">//September 2018
</span>                        <span class="n">billing_address_1</span> <span class="p">=</span> <span class="s">"237 E 33rd Street"</span><span class="p">,</span>
                        <span class="n">billing_address_2</span> <span class="p">=</span> <span class="s">"3rd Floor"</span><span class="p">,</span>
                        <span class="n">billing_city</span> <span class="p">=</span> <span class="s">"New York"</span><span class="p">,</span>
                        <span class="n">billing_state</span> <span class="p">=</span> <span class="s">"NY"</span><span class="p">,</span>
                        <span class="n">billing_zip</span> <span class="p">=</span> <span class="s">"10016"</span>
                    <span class="p">},</span>
                    <span class="n">customer</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">first_name</span> <span class="p">=</span> <span class="s">"John"</span><span class="p">,</span>
                        <span class="n">last_name</span> <span class="p">=</span> <span class="s">"Smith"</span><span class="p">,</span>
                        <span class="n">company_name</span> <span class="p">=</span> <span class="s">"CBA Stakehouse"</span><span class="p">,</span>
                        <span class="n">job_title</span> <span class="p">=</span> <span class="s">"Owner"</span><span class="p">,</span>
                        <span class="n">email_address</span> <span class="p">=</span> <span class="s">"john@cbastakehouse.com"</span><span class="p">,</span>
                        <span class="n">web_address</span> <span class="p">=</span> <span class="s">"http://www.cbasteakhouse.com"</span><span class="p">,</span>
                        <span class="n">phone_number</span> <span class="p">=</span> <span class="s">"(917) 479 1349"</span><span class="p">,</span>
                        <span class="n">phone_ext</span> <span class="p">=</span> <span class="s">"5478"</span><span class="p">,</span>
                        <span class="n">phone_type</span> <span class="p">=</span> <span class="s">"M"</span>
                    <span class="p">},</span>
                    <span class="n">schedule</span> <span class="p">=</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">schedule_type</span> <span class="p">=</span> <span class="s">"S"</span><span class="p">,</span>
                        <span class="n">specific_dates_schedule</span> <span class="p">=</span> <span class="k">new</span>
                        <span class="p">{</span>
                            <span class="n">specific_dates</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span>
                            <span class="p">{</span>
                                <span class="s">"2016-02-01"</span><span class="p">,</span>
                                <span class="s">"2016-10-31"</span>
                            <span class="p">}</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
                <span class="p">};</span>

                <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">recurringBill</span><span class="p">);</span>

                <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                <span class="p">{</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span><span class="c1">//You return this response.
</span>                    <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span><span class="c1">//Created
</span>                        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">==</span> <span class="s">"Location"</span><span class="p">)</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                                <span class="kt">int</span> <span class="n">lastSlash</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">LastIndexOf</span><span class="p">(</span><span class="s">"/"</span><span class="p">);</span>
                                <span class="kt">string</span> <span class="n">transactionId</span> <span class="p">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="n">lastSlash</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Recurring Billing Id: "</span> <span class="p">+</span> <span class="n">transactionId</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                            <span class="p">{</span>
                                <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"organization_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10005</span><span class="p">,</span><span class="w">
    </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"base_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">72.34</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"shipping_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.87</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.23</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gym stuff monthly delivered."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoice_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FF7845742ARG"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"po_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What is a PO number?"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"card_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"card_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4055011111111111"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"card_expiry_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"201709"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"154 E 34th St"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fifth Floor"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10016"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adam"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Capital Inc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"job_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"President"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adam@smith.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"web_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://capitalinc.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(917) 479 1349"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5702"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"schedule_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"specific_dates_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"specific_dates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"2015-10-01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"2016-09-30"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/authonly"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>



    <span class="n">merchant</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"organization_id"</span><span class="o">=&gt;</span><span class="mi">10074</span><span class="p">,</span>
                <span class="s2">"terminal_id"</span><span class="o">=&gt;</span><span class="mi">134</span>
                <span class="p">}</span>

    <span class="c1"># bill data</span>
    <span class="n">bill</span><span class="o">=</span> <span class="p">{</span>
            <span class="s2">"base_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"shipping_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"tax_amount"</span><span class="o">=&gt;</span><span class="no">Hash</span><span class="p">[</span><span class="s2">"amount"</span> <span class="o">=&gt;</span><span class="s2">"1.00"</span><span class="p">],</span>
            <span class="s2">"note"</span><span class="o">=&gt;</span><span class="s2">"this a sample note"</span><span class="p">,</span>
            <span class="s2">"invoice_number"</span><span class="o">=&gt;</span><span class="s2">"this is an invoice"</span><span class="p">,</span>
            <span class="s2">"po_number"</span><span class="o">=&gt;</span><span class="s2">"a test po number"</span>
    <span class="p">}</span>
    <span class="c1">#Credit card data</span>
    <span class="n">card_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"card_number"</span><span class="o">=&gt;</span><span class="s2">"4055011111111111"</span><span class="p">,</span>
                <span class="s2">"card_expiry_date"</span><span class="o">=&gt;</span><span class="s2">"202012"</span><span class="p">,</span>
                <span class="s2">"cvv_data"</span><span class="o">=&gt;</span><span class="s2">"999"</span><span class="p">,</span>
                <span class="s2">"billing_address_1"</span><span class="o">=&gt;</span><span class="s2">"2350 Kerner Blvd"</span><span class="p">,</span>
                <span class="s2">"billing_address_2"</span><span class="o">=&gt;</span><span class="s2">"On the corner"</span><span class="p">,</span>
                <span class="s2">"billing_city"</span><span class="o">=&gt;</span><span class="s2">"San Rafael"</span><span class="p">,</span>
                <span class="s2">"billing_state"</span><span class="o">=&gt;</span><span class="s2">"CA"</span><span class="p">,</span>
                <span class="s2">"billing_zip"</span><span class="o">=&gt;</span><span class="s2">"99997-0003"</span>
                <span class="p">}</span>
    <span class="c1"># Customer data</span>
    <span class="n">customer</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"first_name"</span><span class="o">=&gt;</span><span class="s2">"First"</span><span class="p">,</span>
                <span class="s2">"last_name"</span><span class="o">=&gt;</span><span class="s2">"Contact"</span><span class="p">,</span>
                <span class="s2">"company_name"</span><span class="o">=&gt;</span><span class="s2">"Payhub Inc"</span><span class="p">,</span>
                <span class="s2">"job_title"</span><span class="o">=&gt;</span><span class="s2">"Software Engineer"</span><span class="p">,</span>
                <span class="s2">"email_address"</span><span class="o">=&gt;</span><span class="s2">"jhon@company.com"</span><span class="p">,</span>
                <span class="s2">"web_address"</span><span class="o">=&gt;</span><span class="s2">"http://payhub.com"</span><span class="p">,</span>
                <span class="s2">"phone_number"</span><span class="o">=&gt;</span><span class="s2">"(415) 479 1349"</span><span class="p">,</span>
                <span class="s2">"phone_ext"</span><span class="o">=&gt;</span><span class="s2">"123"</span><span class="p">,</span>
                <span class="s2">"phone_type"</span><span class="o">=&gt;</span><span class="s2">"M"</span>
                <span class="p">}</span>


    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"merchant"</span><span class="o">=&gt;</span><span class="n">merchant</span><span class="p">,</span><span class="s2">"bill"</span><span class="o">=&gt;</span><span class="n">bill</span><span class="p">,</span><span class="s2">"customer"</span><span class="o">=&gt;</span><span class="n">customer</span><span class="p">,</span><span class="s2">"card_data"</span><span class="o">=&gt;</span><span class="n">card_data</span><span class="p">}</span>

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre>

<h2 id="introduction">Introduction</h2>

<p>This topic provides information about the Recurring Bill transaction.</p>

<p>Use the recurring billing transaction when you want to periodically charge certain amount to the customer. You can use this feature for subscriptions or for any ongoing product or service you offer. You can setup a recurring billing by calling our RESTful API through an HTTP post containing a JSON.</p>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">POST</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">https://api.payhub.com/api/v2/recurring-bill</code></p>

<h2 id="elements">Elements</h2>

<h3 id="recurringbillinput">RecurringBillInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>customer</td>
<td>CustomerInput</td>
<td>Customer detail.</td>
</tr>
<tr>
<td>card_data</td>
<td>CardDataInput</td>
<td>Card data to use in the bill.</td>
</tr>
<tr>
<td>merchant</td>
<td>MerchantInput</td>
<td>Merchant detail.</td>
</tr>
<tr>
<td>bill</td>
<td>BillInput</td>
<td>Bill-related data to use in the recurring bill.</td>
</tr>
<tr>
<td>schedule</td>
<td>ScheduleInput</td>
<td>Schedule detail.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>

<h3 id="customerinput">CustomerInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>The first name of the customer.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The last name of the customer.</td>
</tr>
<tr>
<td>company_name</td>
<td>string, optional</td>
<td>The company name of the customer.</td>
</tr>
<tr>
<td>job_title</td>
<td>string, optional</td>
<td>The job title of the customer.</td>
</tr>
<tr>
<td>email_address</td>
<td>string, optional</td>
<td>The email address of the customer. <br>The email address must be syntactically correct. If email address is not specified, you must provide a phone_number to identify the customer.</td>
</tr>
<tr>
<td>web_address</td>
<td>string, optional</td>
<td>The web address of the customer. <br>The web address if specified, must be a syntactically valid web address.</td>
</tr>
<tr>
<td>phone_number</td>
<td>string, optional</td>
<td>The phone number of the customer. <br>The phone number must be syntactically correct. For example: (415) 234 5678, or 4152345678, or (415) 234-5678. <br>If phone number is not specified, you must provide an email_address to identify the customer.</td>
</tr>
<tr>
<td>phone_ext</td>
<td>string, optional</td>
<td>The phone extension number of the customer.</td>
</tr>
<tr>
<td>phone_type</td>
<td>string, optional</td>
<td>The type of the phone number: [&lsquo;H&rsquo; or &#39;W&rsquo; or &rsquo;M&rsquo;]: H (Home), W (Work), M (Mobile).</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>

<h3 id="metadata">MetaData</h3>

<p>No parameters</p>

<h3 id="carddatainput">CardDataInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>card_expiry_date</td>
<td>string</td>
<td>The card expiry date in YYYYMM format.</td>
</tr>
<tr>
<td>tokenized_card</td>
<td>string, optional</td>
<td>This is a 16 character PayHub-specific tokenized string representing the card number. <br>The value for the given customer and credit card can be obtained by examining the lastRecurringBillResponse.billingReferences.tokenizedCard by accessing the link to the bill that was successfully created. It is safer (and recommended) for the third party client to store and use this string in any future requests for the same customer. <br>This value is required if the &#39;card_number&rsquo; property is not present in the request.</td>
</tr>
<tr>
<td>card_number</td>
<td>string, optional</td>
<td>This is a 16 character card number. <br>This value is required if the &#39;tokenized_card&rsquo; property is not present in the request. <br> <strong>Note:</strong> The card number is not stored by the API in plain text - the response will contain a tokenized card number that should always be used in future requests, (for the same Customer) in place of this property.</td>
</tr>
<tr>
<td>billing_address_1</td>
<td>string, optional</td>
<td>The billing street address of the customer.</td>
</tr>
<tr>
<td>billing_address_2</td>
<td>string, optional</td>
<td>The additional billing street address of the customer.</td>
</tr>
<tr>
<td>billing_city</td>
<td>string, optional</td>
<td>The billing city of the customer.</td>
</tr>
<tr>
<td>billing_state</td>
<td>string, optional</td>
<td>The billing state Code of the customer. The codes are for the states in the USA. For example, CA, WI, NY, etc.</td>
</tr>
<tr>
<td>billing_zip</td>
<td>string, optional</td>
<td>The billing zip code of the customer. The codes are for the states in the USA. <br>The code must be either 5 digits or 5 plus four separated by a &rsquo;-&rsquo;. <br>This value is required if the Merchant has the AVS flag turned on.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent the data in the client&rsquo;s domain, which can be associated with this entity.</td>
</tr>
</tbody></table>

<h3 id="merchantinput">MerchantInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>The organization Id ([&#39;range[0-]&rsquo;]) of the merchant. <br>This Id must match the organization Id of the merchant that the passed Oauth Token is associated with.</td>
</tr>
<tr>
<td>terminal_id</td>
<td>integer</td>
<td>The Virtual Terminal Id ([&#39;range[0-]&rsquo;]) for 3rd Party API of the merchant.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>

<h3 id="billinput">BillInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tax_amount</td>
<td>TransactionAmount, optional</td>
<td>The tax amount for the transaction. <br>This value will be included in the total amount charged.</td>
</tr>
<tr>
<td>po_number</td>
<td>string, optional</td>
<td>The purchase order number for the transaction.</td>
</tr>
<tr>
<td>base_amount</td>
<td>TransactionAmount</td>
<td>The Base amount of the recurring bill. <br> The total amount charged will be the sum of this amount and (any) &#39;shipping_amount&rsquo; and &#39;tax_amount&rsquo;.</td>
</tr>
<tr>
<td>shipping_amount</td>
<td>TransactionAmount, optional</td>
<td>The shipping amount for the transaction. <br>This will be included in the total amount charged.</td>
</tr>
<tr>
<td>invoice_number</td>
<td>string, optional</td>
<td>The invoice number for the transaction.</td>
</tr>
<tr>
<td>note</td>
<td>string, optional</td>
<td>A free format note for the transaction. <br>The note will be read by the Merchant.</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain, which can be associated with this entity.</td>
</tr>
</tbody></table>

<h3 id="transactionamount">TransactionAmount</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>Number</td>
<td>The amount expressed as a decimal number with at most two decimal places (example: 1.23),</td>
</tr>
<tr>
<td>currency</td>
<td>string, optional</td>
<td>The ISO 4217 currency code for this amount. <br>[&#39;USD&rsquo;]: Currently only &#39;USD&rsquo; is accepted.</td>
</tr>
</tbody></table>

<h3 id="scheduleinput">ScheduleInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>specific_dates_schedule</td>
<td>SpecificDatesSchedule, optional</td>
<td>Required if the schedule_type is &rsquo;S&rsquo; (=&#39;Specific Dates&rsquo;).</td>
</tr>
<tr>
<td>weekly_schedule</td>
<td>WeeklySchedule, optional</td>
<td>Required if the schedule_type is &#39;W&rsquo; (=&#39;Weekly&rsquo;).</td>
</tr>
<tr>
<td>schedule_type</td>
<td>string</td>
<td>The type of schedule being set up, [&rsquo;M&rsquo; or &rsquo;D&rsquo; or &#39;Y&rsquo; or &#39;W&rsquo; or &rsquo;S&rsquo;]: &rsquo;M&rsquo; (=&#39;Monthly&rsquo;), &rsquo;D&rsquo; (=&#39;Daily&rsquo;), &#39;Y&rsquo; (=&#39;Yearly&rsquo;), &#39;W&rsquo; (=&#39;Weekly&rsquo;), S=Specific Dates.</td>
</tr>
<tr>
<td>bill_generation_interval</td>
<td>integer, optional</td>
<td>The interval between bills where the unit is dependent on the value of the schedule_type (example: if the schedule_type is &#39;W&rsquo; and this field is 3, the bill will recur every three weeks). <br>Applicable to schedule_typeof &rsquo;M&rsquo; (=&#39;Monthly&rsquo;), &rsquo;D&rsquo; (=&#39;Daily&rsquo;), &#39;Y&rsquo; (=&#39;Yearly&rsquo;), and &#39;W&rsquo; (=&#39;Weekly&rsquo;).</td>
</tr>
<tr>
<td>monthly_schedule</td>
<td>MonthlySchedule, optional</td>
<td>Required if the schedule_type is &rsquo;M&rsquo; (=&#39;Monthly&rsquo;).</td>
</tr>
<tr>
<td>schedule_start_and_end</td>
<td>ScheduleStartAndEnd, optional</td>
<td>Required if the schedule_type is not &rsquo;S&rsquo; ( not &#39;Specific Dates&rsquo;).</td>
</tr>
<tr>
<td>yearly_schedule</td>
<td>YearlySchedule, optional</td>
<td>Required if the schedule_type is &#39;Y&rsquo; (=&#39;Yearly&rsquo;).</td>
</tr>
<tr>
<td>metaData</td>
<td>MetaData, optional</td>
<td>A client-specific arbitrary (but valid) JSON string to represent data in the client&rsquo;s domain that can be associated with this entity.</td>
</tr>
</tbody></table>

<h3 id="specificdatesschedule">SpecificDatesSchedule</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>specific_dates</td>
<td>array[string]</td>
<td>An array of specific dates on which the bill should recur. The dates should be in the YYYY-MM-DD format. There must be at least one date specified and all dates must be later than today&rsquo;s date.</td>
</tr>
</tbody></table>

<h3 id="weeklyschedule">WeeklySchedule</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>weekly_bill_days</td>
<td>array[string]</td>
<td>The day(s) of week on which the weekly bill recurs. The array must have at least one entry and each entry must be the first three characters of the day name, as in &#39;SUN&rsquo;, and &#39;SAT&rsquo;.</td>
</tr>
</tbody></table>

<h3 id="monthlyschedule">MonthlySchedule</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>monthly_type</td>
<td>string</td>
<td>[&#39;O&rsquo; or &#39;E&rsquo;]: Determines the day(s) of the month on which the bill will recur. <br>Valid values are &#39;O&rsquo; (=&#39;On the&rsquo; - also specify monthly_on_the_day_of_week_in_month and the monthly_day_of_week) and &#39;E&rsquo; (=&#39;Each&rsquo; - also specify monthly_each_days).</td>
</tr>
<tr>
<td>monthly_each_days</td>
<td>array[integer], optional</td>
<td>An array of integers that must have at least one entry and each entry must be in the range between 1 and 32 where a &#39;1&rsquo; means &#39;first day of month&rsquo;, a &#39;2&rsquo; means &#39;second day of month and so on. An entry of &#39;32&rsquo; means &#39;last day of month&rsquo;. <br>This value is applicable to monthly_type of &#39;E&rsquo; (=&#39;Each&rsquo;).</td>
</tr>
<tr>
<td>monthly_on_the_day_of_week_in_month</td>
<td>integer, optional</td>
<td>A value ([&#39;range[1-5]&rsquo;]) of 1 means &#39;first of month&rsquo;, 2 means &#39;second of month&rsquo; and so on, with a value of 5 meaning &#39;last of month&rsquo;. Must be specified in combination with monthly_day_of_week which supplies the day of week (Monday, Tuesday, etc.) that this applies to. <br>This value is applicable to monthly_type of &#39;O&rsquo; (=&#39;On the&rsquo;).</td>
</tr>
<tr>
<td>monthly_day_of_week</td>
<td>integer, optional</td>
<td>The day of week ([&#39;range[1-7]&rsquo;]) on which the bill recurs, where 1 is Sunday and 7 is Saturday. <br>The value must be specified in combination with monthly_on_the_day_of_week_in_month which supplies the &#39;position&rsquo; (First, Second, etc.) of the day in the month (First Monday, Second Friday, Last Saturday, etc.). <br>This value is applicable to monthly_type of &#39;O&rsquo; (=&#39;On the&rsquo;).</td>
</tr>
</tbody></table>

<h3 id="schedulestartandend">ScheduleStartAndEnd</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>string, optional</td>
<td>The date to start the schedule in YYYY-MM-DD format. <br>The value is required if the schedule_type is &rsquo;M&rsquo; (=&#39;Monthly&rsquo;), &rsquo;D&rsquo; (=&#39;Daily&rsquo;), or &#39;W&rsquo; (=&#39;Weekly&rsquo;).</td>
</tr>
<tr>
<td>end_date</td>
<td>string, optional</td>
<td>The date to end the schedule in YYYY-MM-DD format. <br>The value is applicable to end_date_type equal to &#39;O&rsquo; (=&#39;End On date&rsquo;).</td>
</tr>
<tr>
<td>end_date_type</td>
<td>string, optional</td>
<td>Determines the date on which the schedule ends. <br>The values ([&#39;N&rsquo; or &rsquo; A&rsquo; or &rsquo; O&rsquo;]:) can be &#39;N&rsquo; (=&#39;Never&rsquo;), &#39;A&rsquo; (=&#39;After a number of bills&rsquo; - you must also specify a end_after_bill_count), or &#39;O&rsquo; (=&#39;On or no later than a specific date&rsquo; - you must also specify a end_date). If not present, then &#39;N&rsquo; (=&#39;Never&rsquo;) is assumed.</td>
</tr>
<tr>
<td>end_after_bill_count</td>
<td>integer, optional</td>
<td>The number of bills before ending the schedule. Applicable to end_date_type equal to &#39;A&rsquo; (=&#39;After a number of bills&rsquo;).</td>
</tr>
</tbody></table>

<h3 id="yearlyschedule">YearlySchedule</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>year_to_start</td>
<td>string</td>
<td>The year (in YYYY format) in which the schedule starts. <br>You must also specify yearly_bill_on_month_number and yearly_bill_on_day_of_month.</td>
</tr>
<tr>
<td>yearly_bill_on_day_of_month</td>
<td>integer</td>
<td>The month number ( [&#39;range[1-12]&rsquo;]) on which the bill will recur, where 1 is January and 12 is December. Must be specified in combination with year_to_start and yearly_bill_on_day_of_month.</td>
</tr>
<tr>
<td>yearly_bill_on_day_of_month</td>
<td>string</td>
<td>The day of the month ([&#39;range[1-31]&rsquo;]) on which the yearly bill will recur, where 1 is the 1st, 2 is the 2nd, etc. <br>If you specify a day of month that is invalid for the month specified by yearly_bill_on_month_number, then the last day of the month is used. Must be specified in combination with year_to_start and yearly_bill_on_month_number.</td>
</tr>
</tbody></table>

<h3 id="response-messages">Response Messages</h3>

<table><thead>
<tr>
<th>Code</th>
<th>Meaning</th>
<th>Sample code</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>(not returned)</td>
<td><code class="prettyprint">ResourceSupport { links (array[Link], optional) } Link { templated (boolean, optional), rel (string, optional), href (string, optional) }</code></td>
</tr>
<tr>
<td>201</td>
<td>The recurring bill was created - use the link in the response&rsquo;s &#39;Location&rsquo; Header to view the Recurring Bill.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>400</td>
<td>Bad request due to incorrect or invalid data passed.</td>
<td><code class="prettyprint">RestErrorStructure { errors ( array[RestError], optional)} RestError {   status ( string, optional) = [&#39;100&#39; or &#39;101&#39; or &#39;102&#39; or &#39;103&#39; or &#39;200&#39; or &#39;201&#39; or &#39;202&#39; or &#39;203&#39; or &#39;204&#39; or &#39;205&#39; or &#39;206&#39; or &#39;207&#39; or &#39;208&#39; or &#39;226&#39; or &#39;300&#39; or &#39;301&#39; or &#39;302&#39; or &#39;302&#39; or &#39;303&#39; or &#39;304&#39; or &#39;305&#39; or &#39;307&#39; or &#39;308&#39; or &#39;400&#39; or &#39;401&#39; or &#39;402&#39; or &#39;403&#39; or &#39;404&#39; or &#39;405&#39; or &#39;406&#39; or &#39;407&#39; or &#39;408&#39; or &#39;409&#39; or &#39;410&#39; or &#39;411&#39; or &#39;412&#39; or &#39;413&#39; or &#39;414&#39; or &#39;415&#39; or &#39;416&#39; or &#39;417&#39; or &#39;418&#39; or &#39;419&#39; or &#39;420&#39; or &#39;421&#39; or &#39;422&#39; or &#39;423&#39; or &#39;424&#39; or &#39;426&#39; or &#39;428&#39; or &#39;429&#39; or &#39;431&#39; or &#39;500&#39; or &#39;501&#39; or &#39;502&#39; or &#39;503&#39; or &#39;504&#39; or &#39;505&#39; or &#39;506&#39; or &#39;507&#39; or &#39;508&#39; or &#39;509&#39; or &#39;510&#39; or &#39;511&#39;]: The Http Status Code, code ( string, optional), location ( string, optional), reason ( string, optional), severity ( string, optional) }</code></td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized. You do not have permission to perform this operation. Make sure you entered a valid API Key at the top of the page.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden. The server does not permit you to use this URI.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>500</td>
<td>Internal server error due to encoding the data, or to a PayHub server failure. Contact PayHub.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
</tbody></table>

<h2 id="get">Get</h2>

<p>You can also send a GET  to https://api.payhub.com/api/v2/recurring-bill to list all recurring bills and associated operations in compact form.</p>

          <h1 id="recurring-bill-status">Recurring Bill Status</h1>

<h2 id="introduction">Introduction</h2>

<p>This topic provides the information about the Recurring Bill Status API. Use the Recurring Billing Status API to change the status of any recurring bill.</p>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">PATCH</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">https://api.payhub.com/api/v2/recurring-bill-status/{id}</code></p>

<h2 id="elements">Elements</h2>

<h3 id="recurringbillstatusinput">RecurringBillStatusInput</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>recurring_bill_status</td>
<td>string</td>
<td>The status of the recurring bill: [&lsquo;ACTIVE&rsquo; or &#39;PAUSED&rsquo; or &#39;COMPLETED&rsquo; or &#39;CANCELED&rsquo; or &#39;DELINQUENT&rsquo; or &#39;UNKNOWN&rsquo;]. <br>The possible values to change to are:<ul><li><strong>ACTIVE</strong>: The recurring bill will be charged on the next bill date. You can change it to ACTIVE only if it is currently PAUSED.</li><li><strong>PAUSED</strong>: The recurring bill will NOT be charged while in this state. You can change it to PAUSED only if it is currently ACTIVE. Once the bill is in PAUSE state, any bill dates that pass while a bill is paused will NOT be charged. It will be charged only when it is &#39;unpaused&rsquo; or changed it back to ACTIVE state.</li><li><strong>CANCELLED</strong>: The recurring bill will be stopped. It will not be charged again. You can change to CANCELLED only if it is currently ACTIVE or PAUSED. Once the bill is cancelled, you cannot change its status.</li></ul> <strong>Note:</strong> You cannot use the COMPLETED status to stop a recurring bill from charging in the future. You should use CANCELLED to stop a recurring bill.</td>
</tr>
</tbody></table>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
 </span><span class="s2">"recurring_bill_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="response-messages">Response Messages</h2>

<table><thead>
<tr>
<th>Code</th>
<th>Meaning</th>
<th>Sample code</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>(not returned)</td>
<td><code class="prettyprint">ResourceSupport { links (array[Link], optional) } Link { templated (boolean, optional), rel (string, optional), href (string, optional) }</code></td>
</tr>
<tr>
<td>204</td>
<td>The recurring bill status was successfully updated.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>400</td>
<td>Bad request due to incorrect or invalid data passed.</td>
<td><code class="prettyprint">RestErrorStructure { errors ( array[RestError], optional)} RestError {   status ( string, optional) = [&#39;100&#39; or &#39;101&#39; or &#39;102&#39; or &#39;103&#39; or &#39;200&#39; or &#39;201&#39; or &#39;202&#39; or &#39;203&#39; or &#39;204&#39; or &#39;205&#39; or &#39;206&#39; or &#39;207&#39; or &#39;208&#39; or &#39;226&#39; or &#39;300&#39; or &#39;301&#39; or &#39;302&#39; or &#39;302&#39; or &#39;303&#39; or &#39;304&#39; or &#39;305&#39; or &#39;307&#39; or &#39;308&#39; or &#39;400&#39; or &#39;401&#39; or &#39;402&#39; or &#39;403&#39; or &#39;404&#39; or &#39;405&#39; or &#39;406&#39; or &#39;407&#39; or &#39;408&#39; or &#39;409&#39; or &#39;410&#39; or &#39;411&#39; or &#39;412&#39; or &#39;413&#39; or &#39;414&#39; or &#39;415&#39; or &#39;416&#39; or &#39;417&#39; or &#39;418&#39; or &#39;419&#39; or &#39;420&#39; or &#39;421&#39; or &#39;422&#39; or &#39;423&#39; or &#39;424&#39; or &#39;426&#39; or &#39;428&#39; or &#39;429&#39; or &#39;431&#39; or &#39;500&#39; or &#39;501&#39; or &#39;502&#39; or &#39;503&#39; or &#39;504&#39; or &#39;505&#39; or &#39;506&#39; or &#39;507&#39; or &#39;508&#39; or &#39;509&#39; or &#39;510&#39; or &#39;511&#39;]: The Http Status Code, code ( string, optional), location ( string, optional), reason ( string, optional), severity ( string, optional) }</code></td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized. You do not have permission to perform this operation. Make sure you entered a valid API Key at the top of the page.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>403</td>
<td>Forbidden. The server does not permit you to use this URI.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
<tr>
<td>500</td>
<td>Internal server error due to encoding the data, or to a PayHub server failure. Contact PayHub.</td>
<td><code class="prettyprint">Void {}</code></td>
</tr>
</tbody></table>

          <h1 id="administration-configuration">Administration Configuration</h1>

<h2 id="introduction">Introduction</h2>

<p><strong>Now, with our API, you can see and modify your administration settings.</strong></p>

<ul>
<li><strong>General Settings.</strong></li>
<li><strong>Validated Devices.</strong></li>
<li><strong>Webhook Configuration.</strong></li>
<li><strong>Risk and Fraud Settings.</strong></li>
<li><strong>User Roles.</strong></li>
</ul>

<pre><code class="highlight shell"><span class="o">{</span>
  <span class="s2">"terminalList"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"nickName"</span>: <span class="s2">"Terminal 1 - 3rd Party AP"</span>,
      <span class="s2">"terminalType"</span>: <span class="s2">"3rd Party API"</span>,
      <span class="s2">"settlementTime"</span>: <span class="s2">"11:59 PM"</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">"nickName"</span>: <span class="s2">"Terminal 2 - VirtualHub"</span>,
      <span class="s2">"terminalType"</span>: <span class="s2">"Virtual Terminal"</span>,
      <span class="s2">"settlementTime"</span>: <span class="s2">"11:59 PM"</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"inactivityHour"</span>: <span class="s2">"60"</span>
<span class="o">}</span>
</code></pre>

<h2 id="general-settings-methods">General Settings Methods</h2>

<h3 id="1.-get-general-settings">1. get General Settings</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">GET</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">GET https://api.payhub.com/api/v2/adminSettings/generalSettings</code></p>

<h3 id="result:">Result:</h3>

<p>You will get the list of all the terminals that you have associated to your account. 
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</p>

<pre><code class="highlight shell">GET METHOD:
<span class="o">{</span>
  <span class="s2">"enforce_device_validation"</span>: <span class="s2">"false"</span>,
  <span class="s2">"devices"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"product"</span>: <span class="s2">"VT"</span>,
      <span class="s2">"nick_name"</span>: <span class="s2">"FIRST VALIDATED DEVICE"</span>,
      <span class="s2">"platform"</span>: <span class="s2">"Mac Firefox 34.0"</span>,
      <span class="s2">"details"</span>: <span class="s2">"63188494329184fc2e373f656a44f0570bd6a384"</span>,
      <span class="s2">"date_added"</span>: <span class="s2">"2015-01-13"</span>,
      <span class="s2">"device_id"</span>: 177
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>

<pre><code class="highlight shell">PATCH METHOD
<span class="o">{</span>
  <span class="s2">"enforce_device_validation"</span>: <span class="s2">"false"</span>
<span class="o">}</span>
</code></pre>

<h2 id="validated-devices-methods">Validated Devices Methods</h2>

<h3 id="1.-get-validated-devices">1. Get Validated Devices</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">GET</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">GET https://api.payhub.com/api/v2/adminSettings/validatedDevices</code></p>

<h3 id="result">Result</h3>

<p>You will get the list of all the devices that were associated to your account. 
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</p>

<h3 id="2.-patch-validated-devices">2. Patch Validated Devices</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">PATCH</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">PATCH https://api.payhub.com/api/v2/adminSettings/validatedDevices</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>enforce_device_validation</td>
<td>Boolean</td>
<td>Device Validation is an enhanced security feature that allows you to reasonably control the devices that are allowed to access your PayHub account. <br>Turning device validation ON will require users to enter a validation code when they try to access your account on a new device. The validation code is sent to the administrator&rsquo;s email address.<br> Turning device validation OFF will allow any device to access your account.</td>
</tr>
</tbody></table>

<h3 id="result">Result</h3>

<ul>
<li>A 201 code (created)
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</li>
</ul>

<pre><code class="highlight shell">GET METHOD:
<span class="o">{</span>
  <span class="s2">"webhookConfiguration"</span>: <span class="o">{</span>
    <span class="s2">"virtualHub"</span>: <span class="nb">false</span>,    
    <span class="s2">"endPoint"</span>: <span class="s2">"https://yoursite/yourcontroller/"</span>,
    <span class="s2">"batchIsActive"</span>: <span class="nb">true</span>,
    <span class="s2">"api"</span>: <span class="nb">true</span>,
    <span class="s2">"webhookActive"</span>: <span class="nb">false</span>,
    <span class="s2">"recurringBill"</span>: <span class="nb">true</span>,
    <span class="s2">"mobileHub"</span>: <span class="nb">false</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre><code class="highlight shell">PATCH METHOD
<span class="o">{</span>
    <span class="s2">"virtualHub"</span>: <span class="nb">true</span>,
    <span class="s2">"endPoint"</span>: <span class="s2">"https://yoursite/yourcontroller/"</span>,
    <span class="s2">"batchIsActive"</span>: <span class="nb">true</span>,
    <span class="s2">"api"</span>: <span class="nb">true</span>,
    <span class="s2">"webhookActive"</span>: <span class="nb">true</span>,
    <span class="s2">"recurringBill"</span>: <span class="nb">true</span>,
    <span class="s2">"mobileHub"</span>: <span class="nb">true</span>
<span class="o">}</span>
</code></pre>

<h2 id="webhook-configuration">Webhook Configuration</h2>

<h3 id="1.-get-webhook-configuration">1. Get Webhook Configuration</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">GET</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">GET https://api.payhub.com/api/v2/adminSettings/webhookConfiguration</code></p>

<h3 id="result">Result</h3>

<p>You will get the Webhook Configuration that was associated to your account. 
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</p>

<h3 id="2.-patch-webhook-configuration">2. Patch Webhook Configuration</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">PATCH</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">PATCH https://api.payhub.com/api/v2/adminSettings/webhookConfiguration</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>webhookActive</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the notifications</td>
</tr>
<tr>
<td>virtualHub</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the notifications for transactions that are coming from your Virtual Terminal</td>
</tr>
<tr>
<td>endPoint</td>
<td>String</td>
<td>Your EndPoint for receive our notifications</td>
</tr>
<tr>
<td>batchIsActive</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the notifications for Batches</td>
</tr>
<tr>
<td>api</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the notifications for transactions that are coming from your API</td>
</tr>
<tr>
<td>recurringBill</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the notifications for transactions that are coming from your Recurring bills</td>
</tr>
<tr>
<td>mobileHub</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the notifications for transactions that are coming from your Mobile Hub</td>
</tr>
</tbody></table>

<h3 id="result">Result</h3>

<ul>
<li>A 201 code (created)
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</li>
</ul>

<pre><code class="highlight shell">GET METHOD:
<span class="o">{</span>
  <span class="s2">"transaction_volume_settings"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="nb">false</span>,
    <span class="s2">"hours_trn_number_more_than"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"20"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"days_trn_amount_more_than"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"sale_trn_amount_below"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"days_trn_number_more_than"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"40"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"refund_trn_amount_above"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,    
    <span class="s2">"refund_trn_amount_below"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"sale_trn_amount_above"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"card_filtering"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="nb">false</span>
  <span class="o">}</span>,
  <span class="s2">"credit_card_security_codes"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="nb">false</span>,
    <span class="s2">"cvv_mismatch"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"email"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="nb">false</span>,
    <span class="s2">"email_address"</span>: <span class="s2">"agustinbreit@gmail.com"</span>
  <span class="o">}</span>,
  <span class="s2">"address_verification_system"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="nb">false</span>,
    <span class="s2">"avs_mismatch_street_and_zip_code"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"avs_mismatch_street"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"avs_mismatch_zip_code"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"</span><span class="nv">$20</span><span class="s2">.00"</span>,
      <span class="s2">"option"</span>: 1
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<pre><code class="highlight shell">PATCH METHOD
<span class="o">{</span>
  <span class="s2">"transaction_volume_settings"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"false"</span>,
    <span class="s2">"refund_trn_amount_below"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"hours_trn_number_more_than"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"days_trn_amount_more_than"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"sale_trn_amount_below"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"refund_trn_amount_above"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"days_trn_number_more_than"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,    
    <span class="s2">"sale_trn_amount_above"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"card_filtering"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>
  <span class="o">}</span>,
  <span class="s2">"credit_card_security_codes"</span>: <span class="o">{</span>
    <span class="s2">"cvv_mismatch"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>
  <span class="o">}</span>,
  <span class="s2">"email"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>,
    <span class="s2">"email_address"</span>: <span class="s2">"agustinbreit@gmail.com"</span>
  <span class="o">}</span>,
  <span class="s2">"address_verification_system"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>,
    <span class="s2">"avs_mismatch_street_and_zip_code"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"avs_mismatch_street"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>,
    <span class="s2">"avs_mismatch_zip_code"</span>: <span class="o">{</span>
      <span class="s2">"value"</span>: <span class="s2">"10"</span>,
      <span class="s2">"option"</span>: <span class="s2">"1"</span>
    <span class="o">}</span>    
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<h2 id="risk-and-fraud-settings">Risk and Fraud Settings</h2>

<h3 id="1.-get-risk-and-fraud-settings">1. Get Risk and Fraud Settings</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">GET</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">GET https://api.payhub.com/api/v2/adminSettings/riskFraudDetection</code></p>

<h3 id="result">Result</h3>

<p>You will get the Risk and Fraud Settings that are associated to your account. 
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</p>

<h3 id="2.-patch-risk-and-fraud-settings">2. Patch Risk and Fraud Settings</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">PATCH</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">PATCH https://api.payhub.com/api/v2/adminSettings/riskFraudDetection</code></p>

<h3 id="parameters">Parameters</h3>

<h3 id="email">Email</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the &ldquo;Copy the following email addresses on Risk/Fraud notifications&rdquo; option</td>
</tr>
<tr>
<td>email_address</td>
<td>String</td>
<td>Valid email address for Risk/Fraud notifications</td>
</tr>
</tbody></table>

<h3 id="transaction-volume-settings">Transaction Volume Settings</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>sale_trn_amount_below</td>
<td>Node</td>
<td>Set values for &ldquo;When a sales transaction amount is below&rdquo;</td>
</tr>
<tr>
<td>sale_trn_amount_above</td>
<td>Node</td>
<td>Set values for &ldquo;When a sales transaction amount is above&rdquo;</td>
</tr>
<tr>
<td>refund_trn_amount_below</td>
<td>Node</td>
<td>Set values for &ldquo;When a refund transaction amount is below&rdquo;</td>
</tr>
<tr>
<td>refund_trn_amount_above</td>
<td>Node</td>
<td>Set values for &ldquo;When a sales transaction amount is above&rdquo;</td>
</tr>
<tr>
<td>days_trn_amount_more_than</td>
<td>Node</td>
<td>Set values for &ldquo;When the day&rsquo;s transactions amount to more than&rdquo;</td>
</tr>
<tr>
<td>hours_trn_number_more_than</td>
<td>Node</td>
<td>Set values for &ldquo;When the hour&rsquo;s transactions number more than&rdquo;</td>
</tr>
<tr>
<td>days_trn_number_more_than</td>
<td>Node</td>
<td>Set values for &ldquo;WWhen the day&rsquo;s transactions number more than&rdquo;</td>
</tr>
</tbody></table>

<h3 id="card-filtering">Card filtering</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the &ldquo;Require a matching authorization code for offline transactions (made in the last 30 days).&rdquo; option</td>
</tr>
</tbody></table>

<h3 id="credit-card-security-codes">Credit Card Security Codes</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the &ldquo;Require a CVV/CCV/CID when processing manually entered (non swiped) transactions.&rdquo; option</td>
</tr>
<tr>
<td>cvv_mismatch</td>
<td>Node</td>
<td>Set values for &ldquo;Minimum Threshold&rdquo;</td>
</tr>
</tbody></table>

<h3 id="address-verification-system-(avs)">Address Verification System (AVS)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False to enable/disable the &ldquo;Require an address when processing manually entered (non swiped) transactions.&rdquo; option</td>
</tr>
<tr>
<td>avs_mismatch_street_and_zip_code</td>
<td>Node</td>
<td>Set values for &ldquo;Mismatched Street Address and Zip Code&rdquo;</td>
</tr>
<tr>
<td>avs_mismatch_street</td>
<td>Node</td>
<td>Set values for &ldquo;Mismatched Street Address&rdquo;</td>
</tr>
<tr>
<td>avs_mismatch_zip_code</td>
<td>Node</td>
<td>Set values for &ldquo;Mismatched Zip Code&rdquo;</td>
</tr>
</tbody></table>

<h3 id="options-and-values-for-each-node">Options and Values for each node</h3>

<p><strong>Note:</strong> for each node described above these two options are required.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>option</td>
<td>String</td>
<td>Posible Values are: 1, 2, and 3 <br> <ul><li> 1:Ignore this Setting</li><li>2:Process and Hold</li><li>3:Deny</li></ul></td>
</tr>
<tr>
<td>value</td>
<td>String</td>
<td>Amount</td>
</tr>
</tbody></table>

<h3 id="result">Result</h3>

<ul>
<li>A 201 code (created)
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</li>
</ul>

<p></br>
</br>
</br>
</br></p>

<pre><code class="highlight shell">GET METHOD:
<span class="o">{</span>
  <span class="s2">"transactions"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"false"</span>,
    <span class="s2">"transactionOptions"</span>: <span class="o">{</span>
      <span class="s2">"viewHostedShop"</span>: <span class="s2">"false"</span>,
      <span class="s2">"viewSubmitBatch"</span>: <span class="s2">"false"</span>,
      <span class="s2">"single"</span>: <span class="o">{</span>
        <span class="s2">"singleOptions"</span>: <span class="o">{</span>
          <span class="s2">"voidupto"</span>: <span class="s2">"false"</span>,
          <span class="s2">"sales"</span>: <span class="s2">"false"</span>,
          <span class="s2">"refund"</span>: <span class="s2">"false"</span>,
          <span class="s2">"viewTransaction"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>
      <span class="o">}</span>,
      <span class="s2">"recurringBills"</span>: <span class="o">{</span>
        <span class="s2">"recurringBillOptions"</span>: <span class="o">{</span>
          <span class="s2">"viewHostedShop"</span>: <span class="s2">"false"</span>,
          <span class="s2">"edit"</span>: <span class="s2">"false"</span>,
          <span class="s2">"delete"</span>: <span class="s2">"false"</span>,
          <span class="s2">"add"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>
      <span class="o">}</span>,
      <span class="s2">"currentBatches"</span>: <span class="s2">"false"</span>,
      <span class="s2">"txtRefundupto"</span>: <span class="s2">"0.01"</span>,
      <span class="s2">"allBatches"</span>: <span class="s2">"false"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"reports"</span>: <span class="o">{</span>
    <span class="s2">"reportOptions"</span>: <span class="o">{</span>
      <span class="s2">"standard"</span>: <span class="o">{</span>
        <span class="s2">"standardOptions"</span>: <span class="o">{</span>
          <span class="s2">"product"</span>: <span class="s2">"false"</span>,
          <span class="s2">"recurrbill"</span>: <span class="s2">"false"</span>,
          <span class="s2">"users"</span>: <span class="s2">"false"</span>,
          <span class="s2">"transaction"</span>: <span class="s2">"false"</span>,
          <span class="s2">"batch"</span>: <span class="s2">"false"</span>,
          <span class="s2">"customer"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>
      <span class="o">}</span>,
      <span class="s2">"custom"</span>: <span class="s2">"false"</span>
    <span class="o">}</span>,
    <span class="s2">"checked"</span>: <span class="s2">"false"</span>
  <span class="o">}</span>,
  <span class="s2">"help"</span>: <span class="o">{</span>
    <span class="s2">"helpOptions"</span>: <span class="o">{</span>
      <span class="s2">"tickets"</span>: <span class="o">{</span>
        <span class="s2">"ticketsOptions"</span>: <span class="o">{</span>
          <span class="s2">"edit"</span>: <span class="s2">"false"</span>,
          <span class="s2">"add"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">"checked"</span>: <span class="s2">"false"</span>
  <span class="o">}</span>,
  <span class="s2">"mobileVTAcces"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"false"</span>
  <span class="o">}</span>,
  <span class="s2">"admin"</span>: <span class="o">{</span>
    <span class="s2">"adminOptions"</span>: <span class="o">{</span>
      <span class="s2">"product"</span>: <span class="o">{</span>
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>,
        <span class="s2">"productOptions"</span>: <span class="o">{</span>
          <span class="s2">"edit"</span>: <span class="s2">"false"</span>,
          <span class="s2">"delete"</span>: <span class="s2">"false"</span>,
          <span class="s2">"bulkUpload"</span>: <span class="s2">"false"</span>,
          <span class="s2">"add"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"users"</span>: <span class="o">{</span>
        <span class="s2">"usersOptions"</span>: <span class="o">{</span>
          <span class="s2">"deleteRole"</span>: <span class="s2">"false"</span>,
          <span class="s2">"manageRole"</span>: <span class="s2">"false"</span>,
          <span class="s2">"editRole"</span>: <span class="s2">"false"</span>,
          <span class="s2">"edit"</span>: <span class="s2">"false"</span>,
          <span class="s2">"delete"</span>: <span class="s2">"false"</span>,
          <span class="s2">"addRole"</span>: <span class="s2">"false"</span>,
          <span class="s2">"add"</span>: <span class="s2">"false"</span>,
          <span class="s2">"usersEditAdmin"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>
      <span class="o">}</span>,
      <span class="s2">"hostedShopCart"</span>: <span class="s2">"false"</span>,
      <span class="s2">"riskAndFraud"</span>: <span class="o">{</span>
        <span class="s2">"riskAndFraudOptions"</span>: <span class="o">{</span>
          <span class="s2">"riskfraudSetting"</span>: <span class="s2">"false"</span>,
          <span class="s2">"riskfraudFlagTrn"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>
      <span class="o">}</span>,
      <span class="s2">"webposSetUp"</span>: <span class="s2">"false"</span>,
      <span class="s2">"general"</span>: <span class="o">{</span>
        <span class="s2">"generalOptions"</span>: <span class="o">{</span>
          <span class="s2">"validateDev"</span>: <span class="s2">"false"</span>,
          <span class="s2">"thirdParyApi"</span>: <span class="s2">"false"</span>,
          <span class="s2">"shippingTax"</span>: <span class="s2">"false"</span>,
          <span class="s2">"branding"</span>: <span class="s2">"false"</span>,
          <span class="s2">"generalSetting"</span>: <span class="s2">"false"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"false"</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">"checked"</span>: <span class="s2">"false"</span>
  <span class="o">}</span>,
  <span class="s2">"customer"</span>: <span class="o">{</span>
    <span class="s2">"customerOptions"</span>: <span class="o">{</span>
      <span class="s2">"edit"</span>: <span class="s2">"false"</span>,
      <span class="s2">"delete"</span>: <span class="s2">"false"</span>,
      <span class="s2">"view"</span>: <span class="s2">"false,
      "</span>add<span class="s2">": "</span><span class="nb">false</span><span class="s2">"
    },
    "</span>checked<span class="s2">": "</span><span class="nb">false</span><span class="s2">"
  },
  "</span>firstDefaultScreen<span class="s2">": "</span>2<span class="s2">",
  "</span>webPosAccess<span class="s2">": {
    "</span>checked<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
    "</span>webPosAccessOptions<span class="s2">": {
      "</span>admin<span class="s2">": {
        "</span>adminOptions<span class="s2">": {
          "</span>hotKey<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
          "</span>submitBatch<span class="s2">": "</span>2<span class="s2">",
          "</span>deviceList<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
          "</span>generalSettings<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
          "</span>tills<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
          "</span>display<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
          "</span>customPrompt<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
          "</span>customMessage<span class="s2">": "</span><span class="nb">false</span><span class="s2">"
        },
        "</span>checked<span class="s2">": "</span><span class="nb">false</span><span class="s2">"
      },
      "</span>quitPos<span class="s2">": "</span><span class="nb">false</span><span class="s2">",
      "</span>manualPriceChange<span class="s2">": "</span><span class="nb">false</span><span class="s2">"
    }
  },
  "</span>roleName<span class="s2">": "</span>test4<span class="s2">"
}
</span></code></pre>

<pre><code class="highlight shell">PATCH AND POST METHODS <span class="o">(</span>the same json structure is used<span class="o">)</span>
<span class="o">{</span>
  <span class="s2">"transactions"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>,
    <span class="s2">"transactionOptions"</span>: <span class="o">{</span>
      <span class="s2">"viewHostedShop"</span>: <span class="s2">"true"</span>,
      <span class="s2">"viewSubmitBatch"</span>: <span class="s2">"true"</span>,
      <span class="s2">"single"</span>: <span class="o">{</span>
        <span class="s2">"singleOptions"</span>: <span class="o">{</span>
          <span class="s2">"voidupto"</span>: <span class="s2">"true"</span>,
          <span class="s2">"sales"</span>: <span class="s2">"true"</span>,
          <span class="s2">"refund"</span>: <span class="s2">"true"</span>,
          <span class="s2">"viewTransaction"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>
      <span class="o">}</span>,
      <span class="s2">"recurringBills"</span>: <span class="o">{</span>
        <span class="s2">"recurringBillOptions"</span>: <span class="o">{</span>
          <span class="s2">"viewHostedShop"</span>: <span class="s2">"true"</span>,
          <span class="s2">"edit"</span>: <span class="s2">"true"</span>,
          <span class="s2">"delete"</span>: <span class="s2">"true"</span>,
          <span class="s2">"add"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>
      <span class="o">}</span>,
      <span class="s2">"currentBatches"</span>: <span class="s2">"true"</span>,
      <span class="s2">"txtRefundupto"</span>: <span class="s2">"0.01"</span>,
      <span class="s2">"allBatches"</span>: <span class="s2">"true"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"reports"</span>: <span class="o">{</span>
    <span class="s2">"reportOptions"</span>: <span class="o">{</span>
      <span class="s2">"standard"</span>: <span class="o">{</span>
        <span class="s2">"standardOptions"</span>: <span class="o">{</span>
          <span class="s2">"product"</span>: <span class="s2">"true"</span>,
          <span class="s2">"recurrbill"</span>: <span class="s2">"true"</span>,
          <span class="s2">"users"</span>: <span class="s2">"true"</span>,
          <span class="s2">"transaction"</span>: <span class="s2">"true"</span>,
          <span class="s2">"batch"</span>: <span class="s2">"true"</span>,
          <span class="s2">"customer"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>
      <span class="o">}</span>,
      <span class="s2">"custom"</span>: <span class="s2">"true"</span>
    <span class="o">}</span>,
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>
  <span class="o">}</span>,
  <span class="s2">"help"</span>: <span class="o">{</span>
    <span class="s2">"helpOptions"</span>: <span class="o">{</span>
      <span class="s2">"tickets"</span>: <span class="o">{</span>
        <span class="s2">"ticketsOptions"</span>: <span class="o">{</span>
          <span class="s2">"edit"</span>: <span class="s2">"true"</span>,
          <span class="s2">"add"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>
  <span class="o">}</span>,
  <span class="s2">"mobileVTAcces"</span>: <span class="o">{</span>
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>
  <span class="o">}</span>,
  <span class="s2">"admin"</span>: <span class="o">{</span>
    <span class="s2">"adminOptions"</span>: <span class="o">{</span>
      <span class="s2">"product"</span>: <span class="o">{</span>
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>,
        <span class="s2">"productOptions"</span>: <span class="o">{</span>
          <span class="s2">"edit"</span>: <span class="s2">"true"</span>,
          <span class="s2">"delete"</span>: <span class="s2">"true"</span>,
          <span class="s2">"bulkUpload"</span>: <span class="s2">"true"</span>,
          <span class="s2">"add"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"users"</span>: <span class="o">{</span>
        <span class="s2">"usersOptions"</span>: <span class="o">{</span>
          <span class="s2">"deleteRole"</span>: <span class="s2">"true"</span>,
          <span class="s2">"manageRole"</span>: <span class="s2">"true"</span>,
          <span class="s2">"editRole"</span>: <span class="s2">"true"</span>,
          <span class="s2">"edit"</span>: <span class="s2">"true"</span>,
          <span class="s2">"delete"</span>: <span class="s2">"true"</span>,
          <span class="s2">"addRole"</span>: <span class="s2">"true"</span>,
          <span class="s2">"add"</span>: <span class="s2">"true"</span>,
          <span class="s2">"usersEditAdmin"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>
      <span class="o">}</span>,
      <span class="s2">"hostedShopCart"</span>: <span class="s2">"false"</span>,
      <span class="s2">"riskAndFraud"</span>: <span class="o">{</span>
        <span class="s2">"riskAndFraudOptions"</span>: <span class="o">{</span>
          <span class="s2">"riskfraudSetting"</span>: <span class="s2">"true"</span>,
          <span class="s2">"riskfraudFlagTrn"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>
      <span class="o">}</span>,
      <span class="s2">"webposSetUp"</span>: <span class="s2">"true"</span>,
      <span class="s2">"general"</span>: <span class="o">{</span>
        <span class="s2">"generalOptions"</span>: <span class="o">{</span>
          <span class="s2">"validateDev"</span>: <span class="s2">"true"</span>,
          <span class="s2">"thirdParyApi"</span>: <span class="s2">"true"</span>,
          <span class="s2">"shippingTax"</span>: <span class="s2">"true"</span>,
          <span class="s2">"branding"</span>: <span class="s2">"true"</span>,
          <span class="s2">"generalSetting"</span>: <span class="s2">"true"</span>
        <span class="o">}</span>,
        <span class="s2">"checked"</span>: <span class="s2">"true"</span>
      <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">"checked"</span>: <span class="s2">"true"</span>
  <span class="o">}</span>,
  <span class="s2">"customer"</span>: <span class="o">{</span>
    <span class="s2">"customerOptions"</span>: <span class="o">{</span>
      <span class="s2">"edit"</span>: <span class="s2">"true"</span>,
      <span class="s2">"delete"</span>: <span class="s2">"true"</span>,
      <span class="s2">"view"</span>: <span class="s2">"true,
      "</span>add<span class="s2">": "</span><span class="nb">true</span><span class="s2">"
    },
    "</span>checked<span class="s2">": "</span><span class="nb">true</span><span class="s2">"
  },
  "</span>firstDefaultScreen<span class="s2">": "</span>2<span class="s2">",
  "</span>webPosAccess<span class="s2">": {
    "</span>checked<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
    "</span>webPosAccessOptions<span class="s2">": {
      "</span>admin<span class="s2">": {
        "</span>adminOptions<span class="s2">": {
          "</span>hotKey<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
          "</span>submitBatch<span class="s2">": "</span>2<span class="s2">",
          "</span>deviceList<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
          "</span>generalSettings<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
          "</span>tills<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
          "</span>display<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
          "</span>customPrompt<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
          "</span>customMessage<span class="s2">": "</span><span class="nb">true</span><span class="s2">"
        },
        "</span>checked<span class="s2">": "</span><span class="nb">true</span><span class="s2">"
      },
      "</span>quitPos<span class="s2">": "</span><span class="nb">true</span><span class="s2">",
      "</span>manualPriceChange<span class="s2">": "</span><span class="nb">true</span><span class="s2">"
    }
  },
  "</span>roleName<span class="s2">": "</span>test4<span class="s2">"
}
</span></code></pre>

<h2 id="role-settings">Role Settings</h2>

<h3 id="1.-get-all-user-roles">1. Get All user roles</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">GET</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">GET https://api.payhub.com/api/v2/userRole/roles</code></p>

<h3 id="result">Result</h3>

<p>You will get the list of the rol names that are associated to your account. 
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</p>

<h3 id="2.-get-user-role-by-id">2. Get user role by Id</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">GET</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">GET https://api.payhub.com/api/v2/userRole/roles/{id}</code></p>

<h3 id="result">Result</h3>

<p>You will get all the settings for that particular role. 
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</p>

<h3 id="3.-patch-risk-and-fraud-settings">3. Patch Risk and Fraud Settings</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">PATCH</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">PATCH https://api.payhub.com/api/v2/userRole/roles/update/{id}</code></p>

<h3 id="general-structure">General Structure</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>roleName</td>
<td>String</td>
<td>the role name</td>
</tr>
<tr>
<td>firstDefaultScreen</td>
<td>Numeric String</td>
<td>The first default screen that will be showed after you login <br>Allowed values are: 1,2, and 3 <br><ul><li>1: Home</li><li>2: Process a Card</li><li>3: Reports</li></ul></td>
</tr>
<tr>
<td>transactions</td>
<td>NODE</td>
<td>Json Node that allows you to set permissions related to transactions</td>
</tr>
<tr>
<td>reports</td>
<td>NODE</td>
<td>Json Node that allows you to set permissions related to reports</td>
</tr>
<tr>
<td>help</td>
<td>NODE</td>
<td>Json Node that allows you to set permissions related to help options and tickets</td>
</tr>
<tr>
<td>mobileVTAcces</td>
<td>NODE</td>
<td>Json Node that allows you to set permissions related to you mobile vt access</td>
</tr>
<tr>
<td>admin</td>
<td>NODE</td>
<td>Json Node that allows you to set permissions related to other administration settings</td>
</tr>
<tr>
<td>customer</td>
<td>NODE</td>
<td>Json Node that allows you to set permissions related to customers</td>
</tr>
<tr>
<td>webPosAccess</td>
<td>NODE</td>
<td>Json Node that allows you to set permissions related to your webposs access</td>
</tr>
</tbody></table>

<h3 id="parameters">Parameters</h3>

<h3 id="transactions">transactions</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>transactionOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="transactionoptions-node">transactionOptions Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>viewHostedShop</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>viewSubmitBatch</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>currentBatches</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>allBatches</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>txtRefundupto</td>
<td>Numeric String</td>
<td>Enter a numeric value for this option, any other String will not be accepted</td>
</tr>
<tr>
<td>single</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
<tr>
<td>recurringBills</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="single-node">Single Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>singleOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="single-options-node">Single Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>voidupto</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>sales</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>refund</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>viewTransaction</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="recurringbills-node">RecurringBills Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>recurringBillOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="recurringbills-options-node">RecurringBills Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>viewHostedShop</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>edit</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>delete</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>add</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="reports">Reports</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>reportOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="reports-options-node">Reports Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>custom</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>standard</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="standard-node">Standard Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>standardOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="standard-options-node">Standard Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>product</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>recurrbill</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>users</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>transaction</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>batch</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>customer</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="mobilevt-access">MobileVT Access</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="help">Help</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>helpOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="help-options-node">Help Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tickets</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="tickets-node">Tickets Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>ticketsOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="tickets-options-node">Tickets Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>edit</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>add</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="admin-settings">Admin Settings</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>adminOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="admin-options-node">Admin Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>product</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
<tr>
<td>users</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
<tr>
<td>hostedShopCart</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>riskAndFraud</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
<tr>
<td>webposSetUp</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>general</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="product-node">Product Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>productOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="product-options-node">Product Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>edit</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>delete</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>bulkUpload</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>add</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="users-node">Users Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>usersOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="user-options-node">User Options Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>deleteRole</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>manageRole</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>editRole</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>addRole</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>edit</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>delete</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>add</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>usersEditAdmin</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="risk-and-fraud-node">Risk and Fraud Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>riskAndFraudOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="risk-and-fraud-options">Risk and Fraud Options</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>riskfraudSetting</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>riskfraudFlagTrn</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="general-node">General Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>generalOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="general-options-node">General Options node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>validateDev</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>thirdParyApi</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>shippingTax</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>branding</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>generalSetting</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="customer-node">Customer Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>customerOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="customer-options-node">Customer Options node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>edit</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>delete</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>view</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>add</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="webpos-access-node">WebPos Access Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>webPosAccessOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="webpos-access-options-node">WebPos Access Options node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>admin</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
<tr>
<td>quitPos</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>manualPriceChange</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>add</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="admin-node">Admin Node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>checked</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>adminOptions</td>
<td>NODE</td>
<td>Json Node Described above</td>
</tr>
</tbody></table>

<h3 id="admin-options-node">Admin Options node</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>hotKey</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>submitBatch</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>deviceList</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>generalSettings</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>tills</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>display</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>customPrompt</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
<tr>
<td>customMessage</td>
<td>Boolean</td>
<td>Set it to True/False</td>
</tr>
</tbody></table>

<h3 id="result">Result</h3>

<ul>
<li>A 201 code (created)
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</li>
</ul>

<h3 id="4.-post-risk-and-fraud-settings">4. Post Risk and Fraud Settings</h3>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">POST</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">POST https://api.payhub.com/api/v2/userRole/roles/create</code></p>

<h3 id="result">Result</h3>

<ul>
<li>A 201 code (created)
<strong>Note:</strong> You will need to use the Oauth token in the header request. For more information, see the OAUTH section.</li>
</ul>

          <h1 id="customers">Customers</h1>

<h2 id="linking-customers">Linking Customers</h2>

<p>PayHub automatically identifies customers that have processed with the merchant before then associates the transaction or recurring billing schedule with the corresponding customer. This relationship is used when reporting on merchants and processing new transactions so you can reference the customerID instead of providing the full customer details.
Then processing new transaction the email address is checked first for customer accounts, so that any transaction run which includes an email address will be associated with the existing account that uses that email address, or if none exists, it will create a new customer account based on that email address and associate the transaction with this account.
PayHub uses the phone number as the secondary key for customer accounts, so that any transaction in which a phone number was included AND NO email address was provided, the transaction will be associated with the existing account that uses that phone number, or if none exists, it will create a new customer account based on that phone number and associate the transaction with this account.
When both an email address and a phone number are present the system will use the email address to determine which account to associate the transaction with using the logic described above.</p>

          <h1 id="transaction-report">Transaction Report</h1>

<pre><code class="highlight java">
<span class="kn">package</span> <span class="n">transactions</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.Header</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpPost</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.entity.StringEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.DefaultHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpConnectionParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.params.HttpParams</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Transactions</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">findTransactions</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultHttpClient</span><span class="o">();</span>
      <span class="n">HttpParams</span> <span class="n">params</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getParams</span><span class="o">();</span>
      <span class="n">HttpConnectionParams</span><span class="o">.</span><span class="na">setConnectionTimeout</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>

      <span class="n">JSONObject</span> <span class="n">jsonRequestObject</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">();</span>
      <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.payhub.com/api/v2/report/transactionReport"</span><span class="o">;</span>

      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"batchIdFrom"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"batchIdTo"</span><span class="o">,</span> <span class="s">"10"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"transactionType"</span><span class="o">,</span> <span class="s">"Sale"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"responseCode"</span><span class="o">,</span> <span class="s">"00"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amountFrom"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amountTo"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">,</span> <span class="s">"First"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"lastName"</span><span class="o">,</span> <span class="s">"Contact"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phoneNumber"</span><span class="o">,</span> <span class="s">"(415) 479 1349"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"jhon@company.com"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"trnDateFrom"</span><span class="o">,</span> <span class="s">"2015-06-06 00:00:00"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"trnDateTo"</span><span class="o">,</span> <span class="s">"2015-07-07 23:59:59"</span><span class="o">);</span>
      <span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cardType"</span><span class="o">,</span> <span class="s">"Visa"</span><span class="o">);</span>


      <span class="n">HttpPost</span> <span class="n">postCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpPost</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="o">);</span><span class="c1">//You put your token here</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

      <span class="n">StringEntity</span> <span class="n">se</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringEntity</span><span class="o">(</span><span class="n">jsonRequestObject</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">postCreate</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">se</span><span class="o">);</span>
      <span class="n">HttpResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">postCreate</span><span class="o">);</span> <span class="c1">//You return this response and work with it</span>

      <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="s">" "</span><span class="o">;</span>
      <span class="n">JSONObject</span> <span class="n">jsonResponseObject</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="kt">int</span> <span class="n">statusCode</span> <span class="o">=</span> <span class="n">responseDataRequest</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
      <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">statusCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">statusCode</span> <span class="o">&lt;</span> <span class="mi">400</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">responseDataRequest</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
                <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
                <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span> 
                    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span> 
                <span class="o">}</span>
                    <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>      
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="n">BufferedReader</span> <span class="n">er</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">responseDataRequest</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
                <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                     <span class="k">while</span><span class="o">((</span><span class="n">c</span> <span class="o">=</span> <span class="n">er</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>                          
                          <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span><span class="n">c</span><span class="o">);</span>
                     <span class="o">}</span>                      

                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// TODO Auto-generated catch block</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="o">}</span>  


    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">JSONException</span> <span class="n">e</span><span class="o">){</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre>

<pre><code class="highlight php"><span class="cp">&lt;?php</span>
  <span class="nv">$processed</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
  <span class="nv">$ERROR_MESSAGE</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

  <span class="c1">//Defining the Web Service URL
</span>  <span class="nv">$WsURL</span><span class="o">=</span><span class="s2">"https://api.payhub.com/api/v2/report/transactionReport"</span><span class="p">;</span>


  <span class="nv">$batchIdFrom</span><span class="o">=</span> <span class="s2">"5"</span><span class="p">;</span>
  <span class="nv">$batchIdTo</span><span class="o">=</span> <span class="s2">"10"</span><span class="p">;</span>
  <span class="nv">$transactionType</span><span class="o">=</span> <span class="s2">"Sale"</span><span class="p">;</span>
  <span class="nv">$responseCode</span><span class="o">=</span> <span class="s2">"00"</span><span class="p">;</span>
  <span class="nv">$amountFrom</span><span class="o">=</span> <span class="s2">"1"</span><span class="p">;</span>
  <span class="nv">$amountTo</span><span class="o">=</span> <span class="s2">"2"</span><span class="p">;</span>
  <span class="nv">$firstName</span><span class="o">=</span> <span class="s2">"First"</span><span class="p">;</span>
  <span class="nv">$lastName</span><span class="o">=</span> <span class="s2">"Contact"</span><span class="p">;</span>
  <span class="nv">$phoneNumber</span><span class="o">=</span> <span class="s2">"(415) 479 1349"</span><span class="p">;</span>
  <span class="nv">$email</span><span class="o">=</span> <span class="s2">"jhon@company.com"</span><span class="p">;</span>
  <span class="nv">$trnDateFrom</span><span class="o">=</span> <span class="s2">"2015-06-06 00:00:00"</span><span class="p">;</span>
  <span class="nv">$trnDateTo</span><span class="o">=</span> <span class="s2">"2015-07-07 23:59:59"</span><span class="p">;</span>
  <span class="nv">$cardType</span><span class="o">=</span> <span class="s2">"Visa"</span><span class="p">;</span>


  <span class="c1">//Convert data to array to send it to the WS as JSON format
</span>  <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="nv">$data</span><span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"batchIdFrom"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$batchIdFrom</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"batchIdTo"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$batchIdTo</span><span class="s2">"</span><span class="p">,</span>
                  <span class="s2">"transactionType"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$transactionType</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"responseCode"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$responseCode</span><span class="s2">"</span><span class="p">,</span>
                  <span class="s2">"amountFrom"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$amountFrom</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"amountTo"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$amountTo</span><span class="s2">"</span><span class="p">,</span>
                  <span class="s2">"firstName"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$firstName</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"lastName"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$lastName</span><span class="s2">"</span><span class="p">,</span>
                  <span class="s2">"phoneNumber"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$phoneNumber</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"email"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$email</span><span class="s2">"</span><span class="p">,</span>
                  <span class="s2">"trnDateFrom"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$trnDateFrom</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"trnDateTo"</span> <span class="o">=&gt;</span> <span class="s2">"</span><span class="nv">$trnDateTo</span><span class="s2">"</span><span class="p">,</span><span class="s2">"cardType"</span><span class="o">=&gt;</span><span class="s2">"</span><span class="nv">$cardType</span><span class="s2">"</span><span class="p">);</span>
  <span class="c1">//Convert data from Array to JSON
</span>  <span class="nv">$data_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>

  <span class="c1">//Creating a CURL object to access the WS
</span>  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
  <span class="c1">//Setting the address to connect to
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$WsURL</span><span class="p">);</span>
  <span class="c1">//Setting HTTP method. For a new transaction we need to use POST
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"POST"</span><span class="p">);</span>
  <span class="c1">//Setting data in JSON format
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$data_string</span><span class="p">);</span>
  <span class="c1">//Setting the proper header.
</span>  <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
    <span class="s1">'Accept: application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="c1">//Set to return the response header, this is to analyze the result and the transaction ID
</span>  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

  <span class="c1">//execute connection to the Web Service
</span>  <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="c1">// get some data from the response
</span>  <span class="nv">$httpcode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
  <span class="nv">$header_size</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HEADER_SIZE</span><span class="p">);</span>
  <span class="c1">//Get the header as string.
</span>  <span class="nv">$header</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$header_size</span><span class="p">);</span>
  <span class="c1">//close connection to the Web Service
</span>  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

  <span class="c1">//Obtain the data from the sale recently created
</span>  <span class="k">if</span> <span class="p">(</span><span class="nv">$httpcode</span><span class="o">==</span><span class="mi">201</span><span class="p">){</span>
    <span class="c1">//find the url of the sale (Location header in the response)
</span>    <span class="nb">preg_match</span><span class="p">(</span><span class="s2">"!</span><span class="se">\r\n</span><span class="s2">(?:Location): *(.*?) *</span><span class="se">\r\n</span><span class="s2">!"</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
    <span class="c1">//$url contains the URL to GET the data from the Web Service
</span>    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">//Once we get the transaction ID we will query for the information of the last transaction
</span>    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="c1">//Setting HTTP method. To get a transaction response we need to use GET
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CUSTOMREQUEST</span><span class="p">,</span> <span class="s2">"GET"</span><span class="p">);</span>
    <span class="c1">//Setting the proper header.
</span>    <span class="c1">//Setting the oauth_token to access the WS with the proper authorization
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Authorization: Bearer '</span><span class="o">.</span><span class="nv">$oauth_token</span><span class="p">));</span>
    <span class="c1">//Store the response as a variable and not showing the content as echo $variable
</span>    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="c1">//execute connection to the Web Service
</span>    <span class="nv">$response_json</span><span class="o">=</span><span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//close connection to the Web Service
</span>    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="c1">//show result (standard JSON), parse it, process it, etc..
</span>    <span class="k">echo</span> <span class="nv">$response_json</span><span class="p">;</span>
    <span class="c1">// now you could parse the json object to array if you preffer: $obj = json_decode($response_json);
</span>    <span class="nv">$array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response_json</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//There was an error with the WS
</span>  <span class="k">else</span><span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Error creating the "</span><span class="o">.</span><span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$trans_type</span><span class="p">)</span><span class="o">.</span><span class="s2">": RESPONSE MESSAGE"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
  <span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>

<pre><code class="highlight csharp"><span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PayHubSamples</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Transactions</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">findTransactions</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">var</span> <span class="n">request</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"https://api.payhub.com/api/v2/report/transactionReport"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"text/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>

                <span class="n">var</span> <span class="n">transaction</span> <span class="p">=</span> <span class="k">new</span>
                <span class="p">{</span>
                    <span class="n">batchIdFrom</span><span class="p">=</span> <span class="s">"5"</span><span class="p">,</span>
                    <span class="n">batchIdTo</span><span class="p">=</span> <span class="s">"10"</span><span class="p">,</span>
                    <span class="n">transactionType</span><span class="p">=</span> <span class="s">"Sale"</span><span class="p">,</span>
                    <span class="n">responseCode</span><span class="p">=</span> <span class="s">"00"</span><span class="p">,</span>
                    <span class="n">amountFrom</span><span class="p">=</span> <span class="s">"1"</span><span class="p">,</span>
                    <span class="n">amountTo</span><span class="p">=</span> <span class="s">"2"</span><span class="p">,</span>
                    <span class="n">firstName</span><span class="p">=</span> <span class="s">"First"</span><span class="p">,</span>
                    <span class="n">lastName</span><span class="p">=</span> <span class="s">"Contact"</span><span class="p">,</span>
                    <span class="n">phoneNumber</span><span class="p">=</span> <span class="s">"(415) 479 1349"</span><span class="p">,</span>
                    <span class="n">email</span><span class="p">=</span> <span class="s">"jhon@company.com"</span><span class="p">,</span>
                    <span class="n">trnDateFrom</span><span class="p">=</span> <span class="s">"2015-06-06 00:00:00"</span><span class="p">,</span>
                    <span class="n">trnDateTo</span><span class="p">=</span> <span class="s">"2015-07-07 23:59:59"</span><span class="p">,</span>
                    <span class="n">cardType</span><span class="p">=</span> <span class="s">"Visa"</span>
                <span class="p">};</span>

                <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span>

                <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">,</span> <span class="s">"Bearer dfd4f12a-79af-4825-8dba-db27342c8491"</span><span class="p">);</span>
                <span class="n">request</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
                <span class="n">request</span><span class="p">.</span><span class="n">Accept</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">streamWriter</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">()))</span>
                <span class="p">{</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Flush</span><span class="p">();</span>
                    <span class="n">streamWriter</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                <span class="p">}</span>

                 <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">var</span> <span class="n">response</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">request</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nSending 'Put' request to URL"</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Response Code : "</span> <span class="p">+</span> <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span> <span class="p">==</span> <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                            <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                        <span class="p">{</span>
                            <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="n">WebException</span> <span class="n">wex</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">errorResponse</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">wex</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span><span class="c1">//You return wex.Response instead
</span>                        <span class="p">{</span>
                            <span class="k">using</span> <span class="p">(</span><span class="n">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">errorResponse</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                            <span class="p">{</span>
                                <span class="n">result</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="k">return</span> <span class="n">result</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<pre><code class="highlight ruby">
    <span class="nb">require</span> <span class="s1">'uri'</span>
    <span class="nb">require</span> <span class="s1">'net/http'</span>
    <span class="nb">require</span> <span class="s1">'json'</span>

    <span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.payhub.com/api/v2/report/transactionReport"</span><span class="p">)</span>

    <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>

    <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"accept"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer 2a5d6a73-d294-4fba-bfba-957a4948d4a3'</span>
    <span class="n">request</span><span class="p">[</span><span class="s2">"cache-control"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'no-cache'</span>

    <span class="n">informationToSend</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"batchIdFrom"</span><span class="o">=&gt;</span> <span class="s2">"5"</span><span class="p">,</span>
                         <span class="s2">"batchIdTo"</span><span class="o">=&gt;</span> <span class="s2">"10"</span><span class="p">,</span>
                         <span class="s2">"transactionType"</span><span class="o">=&gt;</span> <span class="s2">"Sale"</span><span class="p">,</span>
                         <span class="s2">"responseCode"</span><span class="o">=&gt;</span> <span class="s2">"00"</span><span class="p">,</span>
                         <span class="s2">"amountFrom"</span><span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
                         <span class="s2">"amountTo"</span><span class="o">=&gt;</span> <span class="s2">"2"</span><span class="p">,</span>
                         <span class="s2">"firstName"</span><span class="o">=&gt;</span> <span class="s2">"First"</span><span class="p">,</span>
                         <span class="s2">"lastName"</span><span class="o">=&gt;</span> <span class="s2">"Contact"</span><span class="p">,</span>
                         <span class="s2">"phoneNumber"</span><span class="o">=&gt;</span> <span class="s2">"(415) 479 1349"</span><span class="p">,</span>
                         <span class="s2">"email"</span><span class="o">=&gt;</span> <span class="s2">"jhon@company.com"</span><span class="p">,</span>
                         <span class="s2">"trnDateFrom"</span><span class="o">=&gt;</span> <span class="s2">"2015-06-06 00:00:00"</span><span class="p">,</span>
                         <span class="s2">"trnDateTo"</span><span class="o">=&gt;</span> <span class="s2">"2015-07-07 23:59:59"</span><span class="p">,</span>
                         <span class="s2">"cardType"</span><span class="o">=&gt;</span> <span class="s2">"Visa"</span>
                         <span class="p">}</span>                         

    <span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span><span class="n">informationToSend</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre>

<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"batchIdFrom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"batchIdTo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sale"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amountFrom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amountTo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"First"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Contact"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(415) 479 1349"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jhon@company.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trnDateFrom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-06-06 00:00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trnDateTo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-07 23:59:59"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cardType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="introduction">Introduction</h2>

<p>This API allows the merchant to search for transactions filtering by a wide range of optional parameters.</p>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">PATCH</code></p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">webservice URL/api/v2/search/transactionReport</code></p>

<h3 id="required-headers">Required Headers</h3>

<ul>
<li><strong>Content-Type</strong>: application/json</li>
<li><strong>Accept</strong>: application/json</li>
<li><strong>Authorization</strong>: Bearer {auth_token}</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>All the parameters are optional, they can be sent in no particular order. If one of the parameters is incorrect the server will return an error.</p>

<p>The parameters are case sensitive.</p>

<p>Below is an explanation of the parameters.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>batchIdFrom, batchIdTo</td>
<td>Allows the merchant to look for transactions where the <strong>batchId</strong> is between the batchIdFrom and batchIdTo. <br>You can also use any one of the two parameters. In that case, the result will be the transactions with the batchId greater than <strong>batchIdFrom</strong>, or the batchId less than <strong>batchIdTo</strong>.</td>
</tr>
<tr>
<td>transactionType</td>
<td>Allows the merchant to look for transactions where the transaction type is any one of the following:<ul><li>Void</li><li>Sale</li><li>Refund</li><li>Verify</li></ul></td>
</tr>
<tr>
<td>responseCode</td>
<td>Allows the merchant to look for transactions where the response code is equal to a specific code. For example, the code “00” means a successful transaction.</td>
</tr>
<tr>
<td>amountFrom, amountTo</td>
<td>Allows the merchant to look for transactions where the amount of the transaction is between the <strong>amountFrom</strong> and <strong>amountTo</strong>. <br>You can use any one of the two parameters. In that case, the result will be the transactions with the amount greater than <strong>amountFrom</strong>, or the amount less than <strong>amountTo</strong>.</td>
</tr>
<tr>
<td>firstName</td>
<td>Allows the merchant to look for transactions where the customer’s first name contains the value of the parameter.</td>
</tr>
<tr>
<td>lastName</td>
<td>Allows the merchant to look for transactions where the customer’s first name contains the value of the parameter.</td>
</tr>
<tr>
<td>phoneNumber</td>
<td>Allows the merchant to look for transactions where the customer’s phone number contains the value of the parameter.</td>
</tr>
<tr>
<td>email</td>
<td>This parameter allows the merchant to look for transactions where the customer’s email address contains the value of the parameter.</td>
</tr>
<tr>
<td>trnDateFrom, trnDateTo</td>
<td>Allows the merchant to look for transactions where the date of the transaction is between the trnDateFrom and trnDateTo. <br>You can use any one of the two parameters. In that case, the result will be the transactions with the date later than the trnDateFrom, or the date earlier than trnDateTo.<br>Format: “yyyy-mm-dd hh:mm:ss”.</td>
</tr>
<tr>
<td>cardType</td>
<td>This parameter allows the merchant to look for transactions where the card type matches the value of the parameter. <br>For instance: MasterCard, Visa.</td>
</tr>
<tr>
<td>cardLast4Digits</td>
<td>Allows the merchant to look for transactions where the credit card’s last four digits matches the value of the parameter. <br>Format: “XXXX”.</td>
</tr>
<tr>
<td>cardToken</td>
<td>Allows the merchant to look for transactions where the credit card’s token matches the value of the parameter. <br>Format: “XXXXXXXXXXXXXXXX”.</td>
</tr>
<tr>
<td>authAmountFrom, authAmountTo</td>
<td>Allows the merchant to look for transactions where the authorized amount of the transaction is between the authAmountFrom and authAmountTo. <br>You can use any one of the two parameters. In that case the result will be the transactions with the authorization amount is greater than <strong>authAmountFrom</strong>, or the authorization amount less than <strong>authAmountTo</strong>.</td>
</tr>
<tr>
<td>swiped</td>
<td>Allows the merchant to look for transactions that where performed with a swiper device. <br>Valid values: true, false</td>
</tr>
<tr>
<td>source</td>
<td>Allows the merchant to look for transactions where the source matches the value of the parameter. <br>For instance: “3rd Party API”</td>
</tr>
<tr>
<td>note</td>
<td>Allows the merchant to look for transactions where the note matches the value of the parameter.</td>
</tr>
<tr>
<td>transactionStatus</td>
<td>Allows the merchant to look for transactions where the transaction status matches the value of the parameter. <br>For instance: “Approved”</td>
</tr>
<tr>
<td>recurringBillId</td>
<td>Allows the merchant to look for transactions that were scheduled.</td>
</tr>
</tbody></table>

<h2 id="result-data">Result Data</h2>
<pre><code class="highlight shell"><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"amount"</span>: <span class="s2">"99.25"</span>,
    <span class="s2">"authAmount"</span>: <span class="s2">"99.25"</span>,
    <span class="s2">"batchID"</span>: <span class="s2">"1302"</span>,
    <span class="s2">"cardLast4Digits"</span>: <span class="s2">"XXXXXXXXXXXX8888"</span>,
    <span class="s2">"cardToken"</span>: <span class="s2">"9999000000001838"</span>,
    <span class="s2">"cardType"</span>: <span class="s2">"Visa"</span>,
    <span class="s2">"customerName"</span>: <span class="s2">"Joe Tester"</span>,
    <span class="s2">"email"</span>: <span class="s2">"lsun@payhub.com"</span>,
    <span class="s2">"isCaptured"</span>: <span class="s2">"False"</span>,
    <span class="s2">"note"</span>: <span class="s2">""</span>,
    <span class="s2">"phoneNumber"</span>: <span class="s2">"(917) 823-4567"</span>,
    <span class="s2">"recurringBillId"</span>: <span class="s2">"2108"</span>,
    <span class="s2">"refundedBy"</span>: <span class="s2">"0"</span>,
    <span class="s2">"responseCode"</span>: <span class="s2">"00"</span>,
    <span class="s2">"responseText"</span>: <span class="s2">"NO  MATCH"</span>,
    <span class="s2">"source"</span>: <span class="s2">"Recurring"</span>,
    <span class="s2">"swiped"</span>: <span class="s2">"true"</span>,
    <span class="s2">"transactionDate"</span>: <span class="s2">"2015-02-15 01:10:19"</span>,
    <span class="s2">"transactionID"</span>: <span class="s2">"180628"</span>,
    <span class="s2">"transactionStatus"</span>: <span class="s2">"Approved"</span>,
    <span class="s2">"transactionType"</span>: <span class="s2">"Sale"</span>,
    <span class="s2">"voidedBy"</span>: <span class="s2">"0"</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"amount"</span>: <span class="s2">"99.25"</span>,
    <span class="s2">"authAmount"</span>: <span class="s2">"99.25"</span>,
    <span class="s2">"batchID"</span>: <span class="s2">"1302"</span>,
    <span class="s2">"cardLast4Digits"</span>: <span class="s2">"XXXXXXXXXXXX8888"</span>,
    <span class="s2">"cardToken"</span>: <span class="s2">"9999000000001838"</span>,
    <span class="s2">"cardType"</span>: <span class="s2">"Visa"</span>,
    <span class="s2">"customerName"</span>: <span class="s2">"Joe Tester"</span>,
    <span class="s2">"email"</span>: <span class="s2">"lsun@payhub.com"</span>,
    <span class="s2">"isCaptured"</span>: <span class="s2">"False"</span>,
    <span class="s2">"note"</span>: <span class="s2">""</span>,
    <span class="s2">"phoneNumber"</span>: <span class="s2">"(917) 823-4567"</span>,
    <span class="s2">"recurringBillId"</span>: <span class="s2">"2109"</span>,
    <span class="s2">"refundedBy"</span>: <span class="s2">"0"</span>,
    <span class="s2">"responseCode"</span>: <span class="s2">"00"</span>,
    <span class="s2">"responseText"</span>: <span class="s2">"NO  MATCH"</span>,
    <span class="s2">"source"</span>: <span class="s2">"Recurring"</span>,
    <span class="s2">"swiped"</span>: <span class="s2">"true"</span>,
    <span class="s2">"transactionDate"</span>: <span class="s2">"2015-02-15 01:10:21"</span>,
    <span class="s2">"transactionID"</span>: <span class="s2">"180629"</span>,
    <span class="s2">"transactionStatus"</span>: <span class="s2">"Approved"</span>,
    <span class="s2">"transactionType"</span>: <span class="s2">"Sale"</span>,
    <span class="s2">"voidedBy"</span>: <span class="s2">"0"</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre>

<p>The result data is an array of objects in JSON format.</p>

          <h1 id="payhub-webhook">PayHub Webhook</h1>

<h2 id="configuration-process">Configuration Process</h2>

<p><strong>With this new service you can receive a notification in two cases:</strong></p>

<ul>
<li><strong>for each transaction in your account.</strong></li>
<li><strong>when a batch was settled.</strong></li>
</ul>

<p>Go to your Merchant Administration and select <code class="prettyprint">Webhook Configuration</code>.</p>

<p><img src="images/webhook-admin.png" /></p>

<p>There, you will see your current webhook configuration.</p>

<p>From this page, you can enter your website url and select those services for which you would like to receive notifications. 
Also, once that the webhook is configured, you can disable or enable it at any time.</p>

<h2 id="services">Services</h2>

<h3 id="transaction-services">Transaction Services</h3>

<ul>
<li>VirtualHub</li>
<li>MobileHub</li>
<li>Recurring Billing</li>
<li>API</li>
</ul>

<h3 id="batch-service">Batch Service</h3>

<ul>
<li>Batch</li>
</ul>

<h2 id="requirements">Requirements</h2>

<ul>
<li>The endpoint validation only allows HTTPS.</li>
<li>The controller for your endpoint must be implemented with a POST method.</li>
<li>The controller for your endpoint must be set to accept JSON.</li>
</ul>

<p><img src="images/webhook-admin-config.png" /></p>

<p>After you have saved your configuration (by selecting the green &ldquo;Update&rdquo; button), our service will send you a notification for each event that occurs on your account to the endpoint that you have indicated.</p>

<h2 id="events">Events</h2>

<p>There are two kinds of events: transactions and settled batches.</p>

<h2 id="transaction-message-from-webhook-to-your-endpoint">Transaction Message from Webhook to your endpoint</h2>

<h3 id="the-json-message-is-as-follows:">The JSON message is as follows:</h3>
<pre><code class="highlight shell">    <span class="o">{</span>
        <span class="s2">"endpoint"</span>: <span class="s2">"https://yoursite.com/your_controller/"</span>,
        <span class="s2">"eventType"</span>: <span class="s2">"transaction"</span>,
        <span class="s2">"event"</span>: <span class="o">{</span>
            <span class="s2">"type"</span>: <span class="o">{</span>
                <span class="s2">"transaction"</span>: <span class="o">{</span>
                    <span class="s2">"transactionType"</span>: <span class="s2">"Sale"</span>,
                    <span class="s2">"recurringBillId"</span>: <span class="s2">""</span>,
                    <span class="s2">"responseText"</span>: <span class="s2">"VER UNAVAILABLE"</span>,
                    <span class="s2">"source"</span>: <span class="s2">"3rd Party API"</span>,
                    <span class="s2">"cardObscured"</span>: <span class="s2">"XXXXXXXXXXXX4507"</span>,
                    <span class="s2">"orgId"</span>: <span class="s2">"10002"</span>,
                    <span class="s2">"transactionId"</span>: <span class="s2">"721"</span>,
                    <span class="s2">"responseCode"</span>: <span class="s2">"00"</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>

<h3 id="fields-meaning">Fields Meaning</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>endpoint</td>
<td>String</td>
<td>Your site endpoint to receive the notifications</td>
</tr>
<tr>
<td>eventType</td>
<td>String</td>
<td>In this case the type is always &ldquo;transaction&rdquo;</td>
</tr>
<tr>
<td>batch_settled</td>
<td>Object</td>
<td>JSON object with batch information</td>
</tr>
<tr>
<td>transaction</td>
<td>String</td>
<td>Possible values: <br><ul><li> &ldquo;Sale&rdquo; </li><li> &ldquo;Authorization Only&rdquo; </li><li> &ldquo;Offline&rdquo; </li> <li>&ldquo;Void&rdquo;</li><li>&ldquo;Refund&rdquo;</li></ul></td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td>Possible values: <br><ul><li>&ldquo;Virtual Terminal&rdquo;</li><li>&ldquo;3rd Party API&rdquo;</li><li>&ldquo;Recurring&rdquo;</li><li>&ldquo;Mobile VT&rdquo;</li></ul></td>
</tr>
<tr>
<td>orgId</td>
<td>String</td>
<td>String</td>
</tr>
<tr>
<td>transactionId</td>
<td>String</td>
<td>The transaction id.</td>
</tr>
<tr>
<td>recurringBillId</td>
<td>String</td>
<td>The recurring bill id if the transaction was scheduled.</td>
</tr>
<tr>
<td>cardObscured</td>
<td>String</td>
<td>the obscured card entered for the transaction.</td>
</tr>
<tr>
<td>responseText</td>
<td>String</td>
<td>A descriptive text of the transaction result.</td>
</tr>
<tr>
<td>responseCode</td>
<td>String</td>
<td>The code for the transaction result.</td>
</tr>
</tbody></table>

<h2 id="batch-message-from-webhook-to-your-endpoint">Batch Message from Webhook to your endpoint</h2>

<h3 id="the-json-message-is-at-follows:">The JSON message is at follows:</h3>
<pre><code class="highlight shell">
    <span class="o">{</span>
        <span class="s2">"endpoint"</span>: <span class="s2">"https://yoursite.com/your_controller/"</span>,
        <span class="s2">"eventType"</span>: <span class="s2">"batch_settled"</span>,
        <span class="s2">"event"</span>: <span class="o">{</span>
            <span class="s2">"type"</span>: <span class="o">{</span>
                <span class="s2">"batch_settled"</span>: <span class="o">{</span>
                    <span class="s2">"date"</span>: <span class="s2">"Thu Oct 29 11:23:11 ART 2015"</span>,
                    <span class="s2">"batch_id"</span>: <span class="s2">"102"</span>,
                    <span class="s2">"net_total"</span>: <span class="s2">"15"</span>,
                    <span class="s2">"terminal"</span>: <span class="s2">"Virtual Hub"</span>,
                    <span class="s2">"trans_count"</span>: <span class="s2">"15"</span>,
                    <span class="s2">"status"</span>: <span class="s2">"Settled"</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

</code></pre>

<h3 id="fields-meaning">Fields Meaning</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>endpoint</td>
<td>String</td>
<td>Your site endpoint to receive the notifications</td>
</tr>
<tr>
<td>eventType</td>
<td>String</td>
<td>In this case the type is always &ldquo;batch_settled&rdquo;</td>
</tr>
<tr>
<td>batch_settled</td>
<td>Object</td>
<td>JSON object with batch information</td>
</tr>
<tr>
<td>date</td>
<td>String</td>
<td>Date.</td>
</tr>
<tr>
<td>batch_id</td>
<td>String</td>
<td>The batch id.</td>
</tr>
<tr>
<td>net_total</td>
<td>String</td>
<td>The total amount of money</td>
</tr>
<tr>
<td>terminal</td>
<td>String</td>
<td>The terminal name.</td>
</tr>
<tr>
<td>trans_count</td>
<td>String</td>
<td>The number of transaction that were settled on the batch.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>The batch status .</td>
</tr>
</tbody></table>

          <h1 id="how-to-test">How to Test</h1>

<p>To run test transactions, simply set the &ldquo;mode&rdquo; parameter to &ldquo;demo&rdquo; and all transactions will automatically be routed through our test system. When in demo mode, the &ldquo;orgid&rdquo;, &ldquo;username&rdquo;, &ldquo;password&rdquo;, and &ldquo;tid&rdquo; fields are optional. </p>

<h2 id="use-the-following-test-data-to-run-test-transactions:">Use the following test data to run test transactions:</h2>

<h3 id="test-data">Test Data</h3>

<table><thead>
<tr>
<th>Card Type</th>
<th>Card #</th>
<th>Card CVV</th>
<th>Transaction Amount</th>
<th>Expected Result</th>
</tr>
</thead><tbody>
<tr>
<td>Visa</td>
<td>4012881888818888</td>
<td>999</td>
<td>10.00</td>
<td>Success</td>
</tr>
<tr>
<td>Visa</td>
<td>4266841082854082</td>
<td>999</td>
<td>0.01</td>
<td>Fail</td>
</tr>
<tr>
<td>MasterCard</td>
<td>5466410004374507</td>
<td>998</td>
<td>10.00</td>
<td>Success</td>
</tr>
<tr>
<td>MasterCard</td>
<td>5454545454545454</td>
<td>998</td>
<td>0.20</td>
<td>Fail</td>
</tr>
<tr>
<td>American Express</td>
<td>371449635398431</td>
<td>9997</td>
<td>10.00</td>
<td>Success</td>
</tr>
<tr>
<td>American Express</td>
<td>371449635398431</td>
<td>9997</td>
<td>0.20</td>
<td>Fail</td>
</tr>
<tr>
<td>Discover</td>
<td>6011000990156527</td>
<td>996</td>
<td>10.00</td>
<td>Success</td>
</tr>
</tbody></table>

<aside class="notice">
The expiration date used can be any time in the future. 
To test AVS, just provide any valid address or zip information with the request and you will get a successful AVS response. To test for a failed CVV code, use a different CVV than what is specified in the table above.
</aside>

          <h1 id="response-codes">Response Codes</h1>

<table><thead>
<tr>
<th>Response Code</th>
<th>Response Text</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>00</td>
<td>Approval</td>
<td>Successful - Approved and completed</td>
</tr>
<tr>
<td>01</td>
<td>Call</td>
<td>Failed - Refer to issuer</td>
</tr>
<tr>
<td>02</td>
<td>Call</td>
<td>Failed - Refer to issuer-Special condition</td>
</tr>
<tr>
<td>03</td>
<td>Term ID Error No Merchant</td>
<td>Failed - Invalid Merchant ID</td>
</tr>
<tr>
<td>04</td>
<td>Hold-call or Pick Up Card</td>
<td>Failed - Pick up card (no fraud)</td>
</tr>
<tr>
<td>05</td>
<td>Decline</td>
<td>Failed - Do not honor</td>
</tr>
<tr>
<td>06</td>
<td>Error XXXX</td>
<td>Failed - General error</td>
</tr>
<tr>
<td>06*</td>
<td>(Check Service Custom Text)</td>
<td>Failed - Error response text from check service</td>
</tr>
<tr>
<td>07</td>
<td>Hold-call or Pick Up Card</td>
<td>Failed - Pick up card, special condition (fraud account)</td>
</tr>
<tr>
<td>08</td>
<td>Approval</td>
<td>Successful - Honor MasterCard with ID</td>
</tr>
<tr>
<td>10</td>
<td>Partial Approval</td>
<td>Failed - PayHub does not support partial approvals.</td>
</tr>
<tr>
<td>11</td>
<td>Approval</td>
<td>Successful - VIP approval</td>
</tr>
<tr>
<td>12</td>
<td>Invalid Trans</td>
<td>Failed - Invalid transaction</td>
</tr>
<tr>
<td>13</td>
<td>Amount Error</td>
<td>Failed - Invalid amount</td>
</tr>
<tr>
<td>14</td>
<td>Card No. Error</td>
<td>Failed - Invalid card number</td>
</tr>
<tr>
<td>15</td>
<td>No such Issuer</td>
<td>Failed - No such issuer</td>
</tr>
<tr>
<td>19</td>
<td>RE Enter</td>
<td>Failed - Re-enter transaction</td>
</tr>
<tr>
<td>21</td>
<td>No Action Taken</td>
<td>Failed - Unable to back out transaction</td>
</tr>
<tr>
<td>28</td>
<td>No Reply</td>
<td>Failed - File is temporarily unavailable</td>
</tr>
<tr>
<td>34</td>
<td>Transaction Cancelled</td>
<td>Failed - MasterCard use only, Transaction Cancelled; Fraud Concern (Used in reversal requests only)</td>
</tr>
<tr>
<td>39</td>
<td>No Credit Acct</td>
<td>Failed - No credit account</td>
</tr>
<tr>
<td>41</td>
<td>Hold-call or Pick Up Card</td>
<td>Failed - Lost card, pick up (fraud account)</td>
</tr>
<tr>
<td>43</td>
<td>Hold-call or Pick Up Card</td>
<td>Failed - Stolen card, pick up (fraud account)</td>
</tr>
<tr>
<td>51</td>
<td>Decline</td>
<td>Failed - Insufficient funds</td>
</tr>
<tr>
<td>52</td>
<td>No Check Account</td>
<td>Failed - No checking account</td>
</tr>
<tr>
<td>53</td>
<td>No Save Account</td>
<td>Failed - No savings account</td>
</tr>
<tr>
<td>54</td>
<td>Expired Card</td>
<td>Failed - Expired card</td>
</tr>
<tr>
<td>55</td>
<td>Wrong PIN</td>
<td>Failed - Incorrect PIN</td>
</tr>
<tr>
<td>57</td>
<td>Serv not allowed</td>
<td>Failed - Transaction not permitted-Card</td>
</tr>
<tr>
<td>58</td>
<td>Serv not allowed</td>
<td>Failed - Transaction not permitted-Terminal</td>
</tr>
<tr>
<td>59</td>
<td>Serv not allowed</td>
<td>Failed - Transaction not permitted-Merchant</td>
</tr>
<tr>
<td>61</td>
<td>Declined</td>
<td>Failed - Exceeds withdrawal limit</td>
</tr>
<tr>
<td>62</td>
<td>Declined</td>
<td>Failed - Invalid service code, restricted</td>
</tr>
<tr>
<td>63</td>
<td>Sec Violation</td>
<td>Failed - Security violation</td>
</tr>
<tr>
<td>65</td>
<td>Declined</td>
<td>Failed - Activity limit exceeded</td>
</tr>
<tr>
<td>75</td>
<td>PIN Exceeded</td>
<td>Failed - PIN tried exceeded</td>
</tr>
<tr>
<td>76</td>
<td>Unsolicated Reversal</td>
<td>Failed - Unable to locate, no match</td>
</tr>
<tr>
<td>77</td>
<td>No Action Taken</td>
<td>Failed - Inconsistent data, reversed, or repeat</td>
</tr>
<tr>
<td>78</td>
<td>No Account</td>
<td>Failed - No account</td>
</tr>
<tr>
<td>79</td>
<td>Already Reversed</td>
<td>Failed - Already reversed at switch</td>
</tr>
<tr>
<td>80</td>
<td>Date Error</td>
<td>Failed - Invalid date</td>
</tr>
<tr>
<td>81</td>
<td>Encryption Error</td>
<td>Failed - Cryptographic error</td>
</tr>
<tr>
<td>82</td>
<td>Incorrect CVV</td>
<td>Failed - CVV data is not correct</td>
</tr>
<tr>
<td>83</td>
<td>Cannot Verify PIN</td>
<td>Failed - Cannot verify PIN</td>
</tr>
<tr>
<td>85</td>
<td>Card OK</td>
<td>Successful - No reason to decline</td>
</tr>
<tr>
<td>86</td>
<td>Cannot Verify PIN</td>
<td>Failed - Cannot verify PIN</td>
</tr>
<tr>
<td>91</td>
<td>No Reply</td>
<td>Failed - Issuer or switch is unavailable</td>
</tr>
<tr>
<td>92</td>
<td>Invalid Routing</td>
<td>Failed - Destination not found</td>
</tr>
<tr>
<td>93</td>
<td>Decline</td>
<td>Failed - Violation, cannot complete</td>
</tr>
<tr>
<td>94</td>
<td>Duplicate Trans</td>
<td>Failed - Unable to locate, no match</td>
</tr>
<tr>
<td>96</td>
<td>System Error</td>
<td>Failed - System malfunction</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>00</td>
<td>VALID_OPERATION</td>
</tr>
<tr>
<td>02</td>
<td>CARD_NUMBER_MISSING_CODE</td>
</tr>
<tr>
<td>1009</td>
<td>INVALID_REFERENCE_NUMBER</td>
</tr>
<tr>
<td>4006</td>
<td>INVALID_MERCHANT</td>
</tr>
<tr>
<td>4007</td>
<td>INVALID_TERMINAL</td>
</tr>
<tr>
<td>4008</td>
<td>INVALID_USER_NAME</td>
</tr>
<tr>
<td>4009</td>
<td>INVALID_USER_PASSWORD</td>
</tr>
<tr>
<td>4010</td>
<td>INVALID_RECORD_FORMAT</td>
</tr>
<tr>
<td>4011</td>
<td>INACTIVE_TERMINAL</td>
</tr>
<tr>
<td>4012</td>
<td>INVALID_AUTHENTICATION</td>
</tr>
<tr>
<td>4013</td>
<td>INVALID_TRANSACTION_CD</td>
</tr>
<tr>
<td>4014</td>
<td>INVALID_OFFLINE_APPROVAL_CD</td>
</tr>
<tr>
<td>4015</td>
<td>INVALID_CARDHOLDER_ID_CODE</td>
</tr>
<tr>
<td>4016</td>
<td>INVALID_CARD_HOLDER_ID_DATA</td>
</tr>
<tr>
<td>4017</td>
<td>INVALID_ACCOUNT_DATA_SOURCE</td>
</tr>
<tr>
<td>4018</td>
<td>INVALID_CUSTOMER_DATA_FIELD</td>
</tr>
<tr>
<td>4019</td>
<td>INVALID_CVV_CODE</td>
</tr>
<tr>
<td>4020</td>
<td>INVALID_CVV_DATA</td>
</tr>
<tr>
<td>4021</td>
<td>INVALID_TRANSACTION_AMOUNT</td>
</tr>
<tr>
<td>4022</td>
<td>INVALID_CARD_NUMBER</td>
</tr>
<tr>
<td>4023</td>
<td>INVALID_BATCH_ID</td>
</tr>
<tr>
<td>4024</td>
<td>INVALID_TRANSACTION_ID</td>
</tr>
<tr>
<td>4025</td>
<td>INVALID_CARD_EXPIRY_DATE</td>
</tr>
<tr>
<td>4026</td>
<td>INVALID_AVS_DATA_FLAG</td>
</tr>
<tr>
<td>4027</td>
<td>INVALID_CUSTOMER_ID</td>
</tr>
<tr>
<td>4028</td>
<td>INVALID_CUSTOMER_WEB</td>
</tr>
<tr>
<td>4029</td>
<td>INVALID_CUSTOMER_EMAIL_ID</td>
</tr>
<tr>
<td>4030</td>
<td>INVALID_CUSTOMER_BILLING_ADD_ZIP</td>
</tr>
<tr>
<td>4031</td>
<td>INVALID_CUSTOMER_SHIPPING_ADD_ZIP</td>
</tr>
<tr>
<td>4032</td>
<td>INACTIVE_MERCHANT</td>
</tr>
<tr>
<td>4033</td>
<td>INVALID_TERMINAL_ORIGIN</td>
</tr>
<tr>
<td>4034</td>
<td>INVALID_CARD_DATA_FOR_DEBIT</td>
</tr>
<tr>
<td>4035</td>
<td>INVALID_TRANSACTION_CODE_FOR_DEBIT</td>
</tr>
<tr>
<td>4036</td>
<td>INVALID_CUSTOMER_ADDRESS</td>
</tr>
<tr>
<td>4037</td>
<td>INVALID_CUSTOMER_COMPANY_NAME</td>
</tr>
<tr>
<td>4038</td>
<td>INVALID_CUSTOMER_DATA</td>
</tr>
<tr>
<td>4039</td>
<td>INVALID_TRANSACTION_NOTE</td>
</tr>
<tr>
<td>4040</td>
<td>CARD_NOT_SUPPORT_CODE</td>
</tr>
<tr>
<td>4041</td>
<td>CVV_REQUIRED_CODE</td>
</tr>
<tr>
<td>4042</td>
<td>AVS_REQUIRED_CODE</td>
</tr>
<tr>
<td>4043</td>
<td>CARD_REQUIRED_CODE</td>
</tr>
<tr>
<td>4044</td>
<td>EXPIRY_REQUIRED_CODE</td>
</tr>
<tr>
<td>4045</td>
<td>TRACK_DATA_REQUIRED_CODE</td>
</tr>
<tr>
<td>4046</td>
<td>CARD_TOKEN_GENRATION_FAILED_CODE</td>
</tr>
<tr>
<td>4047</td>
<td>PAYMENT_TYPE_REQUIRED_CODE</td>
</tr>
<tr>
<td>4048</td>
<td>TRANSACTION_TYPE_REQUIRED_CODE</td>
</tr>
<tr>
<td>4049</td>
<td>TRANSACTION_ID_REQUIRED_CODE</td>
</tr>
<tr>
<td>4050</td>
<td>BATCH_ID_REQUIRED_CODE</td>
</tr>
<tr>
<td>4051</td>
<td>TERMINAL_ID_REQUIRED_CODE</td>
</tr>
<tr>
<td>4052</td>
<td>ORGANIZATION_REQUIRED_CODE</td>
</tr>
<tr>
<td>4053</td>
<td>BATCH_TRANSACTION_NOT_FOUND_CODE</td>
</tr>
<tr>
<td>4054</td>
<td>ALREADY_SETTLED_BATCH_CODE</td>
</tr>
<tr>
<td>4055</td>
<td>DUPLICATE_BATCH_CODE</td>
</tr>
<tr>
<td>4056</td>
<td>BATCH_SETTLED_SUCCESSFULLY_CODE</td>
</tr>
<tr>
<td>4057</td>
<td>BATCH_SETTLEMENT_FAILD_CODE</td>
</tr>
<tr>
<td>4058</td>
<td>BATCH_REJECTED_CODE</td>
</tr>
<tr>
<td>4059</td>
<td>NETWORK_UNAVAILABLE_CODE</td>
</tr>
<tr>
<td>4060</td>
<td>UNABLE_TO_BUILT_REQUEST_CODE</td>
</tr>
<tr>
<td>4061</td>
<td>RECORD_NOT_FOUND_CODE</td>
</tr>
<tr>
<td>4062</td>
<td>RECURRING_SAVED_CODE</td>
</tr>
<tr>
<td>4063</td>
<td>RECURRING_SAVING_FAILED_CODE</td>
</tr>
<tr>
<td>4064</td>
<td>RECURRING_UPDATION_CODE</td>
</tr>
<tr>
<td>4065</td>
<td>RECURRING_UPDATION_FAILED_CODE</td>
</tr>
<tr>
<td>4066</td>
<td>RECURRING_STATUS_CHANGED_SUCCESSFULLY</td>
</tr>
<tr>
<td>4067</td>
<td>RECURRING_STATUS_CHANGING_FAILED</td>
</tr>
<tr>
<td>4068</td>
<td>INVALID_TRANSACTION_ID_CODE</td>
</tr>
<tr>
<td>4069</td>
<td>TRANSACTION_ALREADY_VOIDED_CODE</td>
</tr>
<tr>
<td>4070</td>
<td>CARD_TYPE_REQUIRED_CODE</td>
</tr>
<tr>
<td>4071</td>
<td>INVALID_BATCH_NO_CODE</td>
</tr>
<tr>
<td>4072</td>
<td>TRANSACTION_ALREADY_REFUNDED_CODE</td>
</tr>
<tr>
<td>4073</td>
<td>UNABLE_TO_VOID_CODE</td>
</tr>
<tr>
<td>4074</td>
<td>UNABLE_TO_REFUND_CODE</td>
</tr>
<tr>
<td>4075</td>
<td>UNABLE_TO_CAPTURE_CODE</td>
</tr>
<tr>
<td>4076</td>
<td>CAPTURED_TRANSACTION_SENT_CODE</td>
</tr>
<tr>
<td>4077</td>
<td>CAPTURED_TRANSACTION_FAILED_CODE</td>
</tr>
<tr>
<td>4078</td>
<td>INVALID_INVOICE_NUMBER</td>
</tr>
<tr>
<td>4080</td>
<td>INVALID_BILL_TYPE_CODE</td>
</tr>
<tr>
<td>4081</td>
<td>INVALID_BILL_GENERATION_SPAN_CODE</td>
</tr>
<tr>
<td>4082</td>
<td>INVALID_END_DATE_TYPE_CODE</td>
</tr>
<tr>
<td>4083</td>
<td>INVALID_END_BILL_COUNT_CODE</td>
</tr>
<tr>
<td>4084</td>
<td>INVALID_END_BILL_DATE_CODE</td>
</tr>
<tr>
<td>4085</td>
<td>INVALID_WEEK_DAYS_CODE</td>
</tr>
<tr>
<td>4086</td>
<td>INVALID_MONTHLY_TYPE_CODE</td>
</tr>
<tr>
<td>4087</td>
<td>INVALID_MONTHLY_WEEK_DAYS_CODE</td>
</tr>
<tr>
<td>4088</td>
<td>INVALID_MONTHLY_DAYS_POSSION_CODE</td>
</tr>
<tr>
<td>4089</td>
<td>INVALID_MONTHLY_DAYS_CODE</td>
</tr>
<tr>
<td>4090</td>
<td>INVALID_START_DATE_CODE</td>
</tr>
<tr>
<td>4091</td>
<td>INVALID_SPECIFIC_DATES_CODE</td>
</tr>
<tr>
<td>4092</td>
<td>SPECIFIC_SAME_DATES_CODE</td>
</tr>
<tr>
<td>4093</td>
<td>INVALID_RECURRING_DATA_CODE</td>
</tr>
<tr>
<td>4094</td>
<td>END_BILL_DATE_BEFORE_START_CODE</td>
</tr>
<tr>
<td>4095</td>
<td>CARD_HOLDER_DATA_REQUIRED_CODE</td>
</tr>
<tr>
<td>4096</td>
<td>CARD_HOLDER_CODE_REQUIRED_CODE</td>
</tr>
<tr>
<td>4097</td>
<td>INVALID_STATUS_CODE</td>
</tr>
<tr>
<td>4098</td>
<td>UNABLE_TO_CHANGE_STATUS</td>
</tr>
<tr>
<td>4099</td>
<td>CARD_VALIDATION_FAILED_CODE</td>
</tr>
<tr>
<td>4100</td>
<td>RECURRING_CIS_FAILED_CODE</td>
</tr>
<tr>
<td>4101</td>
<td>UNABLE_BUILT_RECURRING_FILTER__CODE</td>
</tr>
<tr>
<td>4103</td>
<td>UNABLE_TO_BUILT_NEXT_BILL_CODE</td>
</tr>
<tr>
<td>4501</td>
<td>INVALID_PHONE_TYPE</td>
</tr>
<tr>
<td>4502</td>
<td>INVALID_PHONE_NUMBER</td>
</tr>
<tr>
<td>4503</td>
<td>INVALID_ZIP_CODE</td>
</tr>
<tr>
<td>4504</td>
<td>INVALID_STATE_CODE</td>
</tr>
<tr>
<td>4505</td>
<td>INVALID_INTERVAL_TYPE</td>
</tr>
<tr>
<td>4506</td>
<td>INVALID_END_DATE</td>
</tr>
<tr>
<td>4507</td>
<td>INVALID_BILL_WEEKLY_DAYS</td>
</tr>
<tr>
<td>4508</td>
<td>INVALID_YEAR_MONTH_DAYS</td>
</tr>
<tr>
<td>4509</td>
<td>INVALID_YEAR_BILL_ON_MONTH_NO</td>
</tr>
<tr>
<td>4510</td>
<td>INVALID_MONTHLY_BILL_TYPE</td>
</tr>
<tr>
<td>4511</td>
<td>INVALID_MDAYS_POSITION</td>
</tr>
<tr>
<td>4512</td>
<td>INVALID_MDAYS</td>
</tr>
<tr>
<td>4513</td>
<td>INVALID_MDAY_EACH_POSITIONS</td>
</tr>
<tr>
<td>4514</td>
<td>INCONSISTENT_SCHEDULE_FIELDS</td>
</tr>
<tr>
<td>4515</td>
<td>ACCOUNT_IS_NOT_ADMINISTRATOR</td>
</tr>
<tr>
<td>4516</td>
<td>INCONSISTENT_CARD_DATA_FIELDS</td>
</tr>
<tr>
<td>4517</td>
<td>WRONG_OAUTH_TOKEN_FOR_MERCHANT</td>
</tr>
<tr>
<td>4518</td>
<td>NO_MERCHANT_ACCOUNT_FOR_OUTH_TOKEN_FOR_MERCHANT</td>
</tr>
<tr>
<td>4519</td>
<td>NO_SETUP_ACCOUNT_FOR_OUTH_TOKEN_FOR_MERCHANT</td>
</tr>
<tr>
<td>4520</td>
<td>NO_VT_CLIENT_ACCOUNT_FOR_OUTH_TOKEN_FOR_MERCHANT</td>
</tr>
<tr>
<td>4521</td>
<td>INVALID_CURRENCY_CODE</td>
</tr>
<tr>
<td>4522</td>
<td>INVALID_RECURRING_BILL_STATUS_CHANGE_CODE</td>
</tr>
<tr>
<td>4523</td>
<td>INCONSISTENT_CURRENCIES</td>
</tr>
<tr>
<td>4524</td>
<td>MISSING_PROPERTY_CODE</td>
</tr>
<tr>
<td>4525</td>
<td>INCONSISTENT_CUSTOMER_DATA_CODE</td>
</tr>
<tr>
<td>4526</td>
<td>DUPLICATE_DEVELOPER_CODE</td>
</tr>
<tr>
<td>9989</td>
<td>METHOD_REQUEST_BODY_VALIDATION_ERROR_CODE</td>
</tr>
<tr>
<td>9990</td>
<td>HTTP_NOT_READABLE_EXCEPTION_CODE</td>
</tr>
<tr>
<td>9991</td>
<td>JSONPARSE_EXCEPTION_CODE</td>
</tr>
<tr>
<td>9992</td>
<td>MAPPING_EXCEPTION_CODE</td>
</tr>
<tr>
<td>9993</td>
<td>MEDIA_TYPE_NOT_SUPPORTED_CODE</td>
</tr>
<tr>
<td>9994</td>
<td>METHOD_NOT_SUPPORTED_CODE</td>
</tr>
<tr>
<td>9995</td>
<td>PAGE_NOT_FOUND_ERROR_CODE</td>
</tr>
<tr>
<td>9996</td>
<td>ACCESS_DENIED_ERROR_CODE</td>
</tr>
<tr>
<td>9997</td>
<td>JSON_SYNTAX_ERROR_CODE</td>
</tr>
<tr>
<td>9998</td>
<td>NOT_FOUND_ERROR_CODE</td>
</tr>
<tr>
<td>9999</td>
<td>INTERNAL_SERVER_ERROR_CODE</td>
</tr>
</tbody></table>

            <h1 id="safyer-boarding-settlement">Safyer Boarding-Settlement</h1>

            <h1 id="authentication">Authentication</h1>

<h2 id="how-we-use-oauth-2.0-to-assure-security">How we Use OAuth 2.0 to Assure Security</h2>

<p><strong><code class="prettyprint">Oauth 2.0</code></strong> is an industry-standard, and widely accepted, authentication and authorization mechanism for providing third party applications and clients secure access to a user&rsquo;s resources hosted service providers.</p>

<p>Typically, the third party (or client) is granted access to a user&rsquo;s resources hosted by a service provider, using a unique token generated by the service provider at the time the user authorizes the client access to their resources. Think of the situation where you authorize a web site to register you using your identity hosted on Facebook (you click the &lsquo;log in with Facebook&rsquo; button on the web site and authorize the site to access your information on Facebook)..    </p>

<p>The Safyer RESTful Web Services currently uses OAuth 2.0 with:</p>

<ul>
<li><p>You as the Client</p></li>
<li><p>And SignaPay as the Service Provider</p></li>
</ul>

<p>As a new third party integrator, you will be assigned a unique token that you will use when requesting access to resources from the Service Provider.</p>

<p>Currently you can obtain this token by contacting your relationship manager.</p>

<aside class="notice">
Once you have your token, <strong>it is very important that you treat this as you would a user and password</strong>: never reveal it to anyone other than authorized developers, and never reference it in publicly available source code such as publicly exposed JavaScript or HTML pages.
</aside>

<h2 id="using-your-oauth-2.0-token-in-calls-to-safyer-restful-web-services">Using Your OAuth 2.0 Token in calls to Safyer RESTful Web Services</h2>

<p>Once you have the token, you can use it to authenticate your application to the Safyer RESTful Web Service by using the OAuth 2.0 standard HTTP Authorization Header structured as in this example:</p>

<p><strong>Header Field Name</strong>: Authorization</p>

<p><strong>Header Value</strong>: Your-token-here</p>

            <h1 id="merchant-method">Merchant Method</h1>

<h2 id="introduction">Introduction</h2>

<p>This topic provides you the information about Merchant method that you can use to board a merchant to Safyer using the Safyer Web Service.</p>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">POST</code></p>

<p>Using this method, you can board a merchant associated with a previously generated Frictionless Link. The frictionless link will be generated by the Office and linked to a sales representative and pricing structure using the Safyer UI.</p>

<h3 id="endpoint-(url-to-call)">Endpoint (URL to Call)</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/merchant</code></p>

<h3 id="enhanced-merchant-validation">Enhanced Merchant Validation</h3>

<p>When posting a merchant, we confirm that the following fields contain real data:
* Routing Number
* Phone Number
* Email
* Address</p>

<p>As these fields go beyond basic validation, it is recommended that you handle the responses from Safyer in a user friendly way. If you would like to test the validation on these fields, you can use the following test values to return an error response that has matched basic validation, but has been identified as dummy data.</p>

<h2 id="parameters">Parameters</h2>
<pre><code class="highlight shell"><span class="o">{</span>
    <span class="s2">"merchantInformation"</span>: <span class="o">{</span>
        <span class="s2">"quickID"</span>: <span class="s2">"W3Rg6CjtyIfasvdT/bCYRL6Opyg=="</span>,
        <span class="s2">"legalFirstName"</span>: <span class="s2">"John"</span>,
        <span class="s2">"legalLastName"</span>: <span class="s2">"Smith"</span>,
        <span class="s2">"email"</span>: <span class="s2">"john.smith@email.com"</span>,
        <span class="s2">"phone"</span>: <span class="s2">"0123456789"</span>,
        <span class="s2">"businessName"</span>: <span class="s2">"Test"</span>,
        <span class="s2">"dbaName"</span>: <span class="s2">"Test DBA"</span>,
        <span class="s2">"website"</span>: <span class="s2">"www.test.com"</span>,
        <span class="s2">"taxID"</span>: <span class="s2">"123456789"</span>,
        <span class="s2">"npo"</span>: <span class="s2">"0"</span>,
        <span class="s2">"businessType"</span>: <span class="s2">"1"</span>,
        <span class="s2">"businessCategory"</span>: <span class="s2">"3357"</span>,
        <span class="s2">"otherBusinessDesc"</span>: <span class="s2">""</span>,
        <span class="s2">"estimatedRevenue"</span>: <span class="s2">"8000.00"</span>,
        <span class="s2">"bankRouting"</span>: <span class="s2">"034560015"</span>,
        <span class="s2">"bankDDA"</span>: <span class="s2">"123456789"</span>,
        <span class="s2">"address1"</span>: <span class="s2">"Test av 2230"</span>,
        <span class="s2">"address2"</span>: <span class="s2">""</span>,
        <span class="s2">"zip"</span>: <span class="s2">"12345"</span>,
        <span class="s2">"dbaAddress1"</span>: <span class="s2">"Test av 1010"</span>,
        <span class="s2">"dbaAddress2"</span>: <span class="s2">""</span>,
        <span class="s2">"dbaZip"</span>: <span class="s2">"12233"</span>,
        <span class="s2">"dob"</span>: <span class="s2">"07-09-1985"</span>,
        <span class="s2">"ssn"</span>: <span class="s2">"123456789"</span>,
        <span class="s2">"ip"</span>: <span class="s2">"181.23.198.26"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quickId</td>
<td>string (1 - 50 characters)</td>
<td>Associates an application with pricing and a sales rep.<br>Obtained when setting up a frictionless link using the Safyer UI</td>
</tr>
<tr>
<td>legalFirstName</td>
<td>string (1 - 30 characters)</td>
<td>The given first name of the merchant.</td>
</tr>
<tr>
<td>legalLastName</td>
<td>string (1 - 30 characters)</td>
<td>The given last name of the merchant.</td>
</tr>
<tr>
<td>email</td>
<td>string (7 - 50 characters)</td>
<td>The email address of the merchant.</td>
</tr>
<tr>
<td>phone</td>
<td>numeric (10 digits)</td>
<td>The phone number of the merchant.</td>
</tr>
<tr>
<td>businessName</td>
<td>string (1 - 25 characters)</td>
<td>The legal business name of the merchant.</td>
</tr>
<tr>
<td>dbaName</td>
<td>string (1 - 25 characters)</td>
<td>The name the merchant is Doing Business As (DBA).</td>
</tr>
<tr>
<td>website</td>
<td>string, optional (1 - 40 characters)</td>
<td>The website address of the merchant.</td>
</tr>
<tr>
<td>taxID</td>
<td>numeric, optional (10 digits)</td>
<td>The Tax Identification Number of the merchant.</td>
</tr>
<tr>
<td>npo</td>
<td>bit (1 digit)</td>
<td>Indicates whether the Tax ID provided belongs to a Non-Profit Organization. Only value 0 or 1.</td>
</tr>
<tr>
<td>businessType</td>
<td>numeric (1 - 2 digits)</td>
<td>The type of business. See Business Types.</td>
</tr>
<tr>
<td>businessCategory</td>
<td>numeric (4 digits)</td>
<td>The business category. See Business Categories.</td>
</tr>
<tr>
<td>otherBusinessDesc</td>
<td>string (1 - 50 characters)</td>
<td>If the businessCategory is 0000, you must specify the name of the business category.</td>
</tr>
<tr>
<td>estimatedRevenue</td>
<td>numeric (1 - 11 digits)</td>
<td>The estimated monthly credit card sales of the merchant. The sale must be greater or equal to 0.</td>
</tr>
<tr>
<td>bankRouting</td>
<td>numeric (9 digits)</td>
<td>The routing number of the bank account of the merchant. The number must match with an existing bank routing number.</td>
</tr>
<tr>
<td>bankDDA</td>
<td>numeric (1 - 30 digits)</td>
<td>The bank account number of the merchant.</td>
</tr>
<tr>
<td>dbaAddress1</td>
<td>numeric (1 - 50 digits)</td>
<td>The merchant&rsquo;s DBA street address.</td>
</tr>
<tr>
<td>dbaAddress2</td>
<td>numeric (1 - 50 digits)</td>
<td>The merchant&rsquo;s DBA suite or apartment number.</td>
</tr>
<tr>
<td>dbazip</td>
<td>numeric (5 digits)</td>
<td>The merchant&rsquo;s DBA zip code. <br>The zip code will be used to determine the City and State of the merchant. The Address and Zip will be validated against the USPS list of valid addresses.</td>
</tr>
<tr>
<td>address1</td>
<td>string (1 - 50 digits)</td>
<td>The street address of the merchant.</td>
</tr>
<tr>
<td>address2</td>
<td>string, optional (1 - 50 digits)</td>
<td>The suite or apartment number of the merchant.</td>
</tr>
<tr>
<td>Zip</td>
<td>numeric (5 digits)</td>
<td>The zip code will be used to determine the city and state of the merchant. The address and zip will be validated against the USPS list of valid addresses.</td>
</tr>
<tr>
<td>dob</td>
<td>date (mm-dd-yyyy)</td>
<td>The data of birth of the merchant. The merchant must be above 18 years old.</td>
</tr>
<tr>
<td>ssn</td>
<td>string (1 - 50 digits)</td>
<td>The Social Security Number of the merchant.</td>
</tr>
<tr>
<td>ip</td>
<td>Alphanumeric YYY.XXX.XXX.XXX</td>
<td>The IP address of the system from where the merchant is submitting the application. <ul><li>YYY: Number between 1 - 223</li><li>XXX: Number between 0 - 255</li></ul></td>
</tr>
</tbody></table>

<h3 id="request-method:">Request Method:</h3>

<p><code class="prettyprint">GET</code></p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/merchant/{{mid}}</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mid</td>
<td>Text</td>
<td>A string that identifies a single merchant. This field is returned after successfully posting a merchant.</td>
</tr>
</tbody></table>

<h2 id="business-categories">Business Categories</h2>

<table><thead>
<tr>
<th style="text-align: center">BUSINESS TYPE</th>
<th style="text-align: center">BUSINESS CATEGORY</th>
<th>DESCRIPTION</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">All</td>
<td style="text-align: center">0000</td>
<td>OTHER (indicate name &ldquo;otherBusinessDesc&rdquo; in JSON)</td>
</tr>
<tr>
<td style="text-align: center">1</td>
<td style="text-align: center">3357</td>
<td>HERTZ CORPORATION</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3366</td>
<td>BUDGET RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3387</td>
<td>ALAMO RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3388</td>
<td>AUTO EUROPE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3389</td>
<td>AVIS RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3390</td>
<td>DOLLAR RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3393</td>
<td>NATIONAL CAR RENTAL</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3395</td>
<td>THRIFTY RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3398</td>
<td>ECONO-CAR RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3405</td>
<td>ENTERPRISE RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3409</td>
<td>GENERAL RENT-A-CAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7512</td>
<td>AUTO RENTALS &amp; LEASING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7513</td>
<td>TRUCK AND UTILITY TRAILER RENTALS</td>
</tr>
<tr>
<td style="text-align: center">2</td>
<td style="text-align: center">3670</td>
<td>ARCADE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7841</td>
<td>VIDEO TAPE RENTAL STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7929</td>
<td>BANDS, ORCHESTRAS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7932</td>
<td>BILLARD AND POOL ESTABLISHMENTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7933</td>
<td>BOWLING ALLEYS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7991</td>
<td>TOURIST ATTRACTIONS &amp; EXHIBITS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7993</td>
<td>VIDEO AMUSEMENT GAME SUPPLIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7994</td>
<td>VIDEO GAME ARCADES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7996</td>
<td>AMUSEMENT PARKS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7998</td>
<td>AQUARIUMS, SEAQUARIUMS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7999</td>
<td>AMUSEMENT &amp; RECREATION SERVICES</td>
</tr>
<tr>
<td style="text-align: center">3</td>
<td style="text-align: center">5021</td>
<td>COMMERCIAL FURNITURE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5712</td>
<td>FURNITURE,HOME FURNISHINGS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5719</td>
<td>MISCELLANEOUS HOME FURNISHING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5932</td>
<td>ANTIQUE SHOPS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5937</td>
<td>ANTIQUE REPRODUCTIONS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5971</td>
<td>ART DEALERS &amp; GALLERIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7641</td>
<td>REUPHOLSTERY &amp; FURNITURE REPAIR</td>
</tr>
<tr>
<td style="text-align: center">4</td>
<td style="text-align: center">5462</td>
<td>BAKERIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5811</td>
<td>CATERERS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5812</td>
<td>EATING PLACES, RESTAURANTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5813</td>
<td>DRINKING PLACES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5814</td>
<td>QUICK RESTAURANT</td>
</tr>
<tr>
<td style="text-align: center">5</td>
<td style="text-align: center">5013</td>
<td>MOTOR VEHICLE SUPPPLIES &amp; NEW PARTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5172</td>
<td>PETROLEUM&amp;PETROLEUM PRODUCTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5521</td>
<td>USED-AUTOMOBILE AND TRUCK DEALERS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5532</td>
<td>AUTOMOTIVE TIRE STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5533</td>
<td>AUTOMOTIVE PARTS,ACCESSORIES STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5541</td>
<td>SERVICE STATIONS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5571</td>
<td>MOTORCYCLE DEALERS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7531</td>
<td>AUTOMOTIVE TOP AND BODY REPAIR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7535</td>
<td>PAINT SHOPS-AUTOMOTIVE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7538</td>
<td>AUTOMOTIVE REPAIR SHOPS-NON-DEALER</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7542</td>
<td>CAR WASHES</td>
</tr>
<tr>
<td style="text-align: center">7</td>
<td style="text-align: center">8211</td>
<td>ELEMENTARY &amp; SECONDARY SCHOOLS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8220</td>
<td>COLLEGES, UNIVERSITIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8249</td>
<td>VOCATIONAL &amp; TRADE SCHOOLS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8299</td>
<td>SCHOOLS &amp; EDUCATIONAL SVCS</td>
</tr>
<tr>
<td style="text-align: center">8</td>
<td style="text-align: center">0752</td>
<td>ANIMAL SPECIALTY SERVICE EXCEPT VET</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">0780</td>
<td>LANDSCAPING, HORTICULTURAL SERVICES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">0782</td>
<td>LAWN AND GARDEN SERVICES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">1520</td>
<td>GENERAL CONTRACTORS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">1711</td>
<td>PLUMBING HEATING AND AIR CONDITIONING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">1731</td>
<td>ELECTRICAL CONTRACTORS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">1750</td>
<td>CARPENTRY</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">1761</td>
<td>ROOFING &amp; SIDING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">1799</td>
<td>SPECIAL TRADE CONTRACTORS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">4121</td>
<td>TAXICABS/LIMOUSINES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">4215</td>
<td>COURIER SERVICES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">4812</td>
<td>TELEPHONE SERVICE/EQUIPMENT-NON-UTIL</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">4816</td>
<td>INFORMATION SERVICES-via COMPUTER NE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5045</td>
<td>COMPUTERS,PERIPHERAL EQUIP,SFTWRE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5065</td>
<td>ELECTRICAL PARTS AND EQUIPMENT</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5713</td>
<td>FLOOR COVERING STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5734</td>
<td>COMPUTER SOFTWARE SHOPS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5968</td>
<td>CONTINUITY/SUBSCRIPTION MERCH.</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">6300</td>
<td>INSURANCE SALES AND UNDERWRITING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">6513</td>
<td>Property Rental Services</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7210</td>
<td>LAUNDRY, CLEANING, &amp; GARMENT SERVICE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7217</td>
<td>CARPET AND UPHOLSTERY CLEANING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7261</td>
<td>FUNERAL SERVICE &amp; CREMATORIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7276</td>
<td>TAX PREPARATION SERVICE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7277</td>
<td>COUNSELING SERVICE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7299</td>
<td>MISCELLANEOUS PERSONAL SERVICES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7311</td>
<td>ADVERTISING SERVICES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7333</td>
<td>COMMERCIAL PHOTOGRAPHY</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7349</td>
<td>CLEANING &amp; MAINTENANCE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7372</td>
<td>COMPUTER AND DATA PROCESSING SERVICE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7379</td>
<td>COMPUTER MAINT,REPAIR,SRVS NOT CLASS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7392</td>
<td>MANAGEMENT, CONSULTING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7394</td>
<td>EQUIPMENT RENTAL &amp; LEASING SERVICES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7399</td>
<td>BUSINESS SERVICES, NOT ELSEWHERE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7623</td>
<td>AIR CONDITIONING &amp; REFRIGERATION REP</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7629</td>
<td>ELECTRICAL &amp; SMALL APPLIANCE REPAIR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7911</td>
<td>DANCE STUDIOS, SCHOOLS AND HALLS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7991</td>
<td>PHYSICAL FITNESS FACILITIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7997</td>
<td>MEMBERSHIP SPORTS AND REC CLUBS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8111</td>
<td>LEGAL SERVICES, ATTORNEYS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8398</td>
<td>CHARITABLE &amp; SOCIAL SERVICE ORGANIZA</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8651</td>
<td>POLITICAL ORGANIZATIONS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8699</td>
<td>MEMBERSHIP ORGANIZATIONS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8931</td>
<td>ACCOUNTANTS, AUDITORS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8999</td>
<td>PROFESSIONAL SEVICES, NOT ELSEWHERE</td>
</tr>
<tr>
<td style="text-align: center">9</td>
<td style="text-align: center">5311</td>
<td>DEPARTMENT STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5611</td>
<td>MEN&rsquo;S &amp; BOYS&#39;CLOTHING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5621</td>
<td>WOMEN&rsquo;S READY-TO-WEAR STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5631</td>
<td>WOMEN&rsquo;S ACCESSORY &amp; SPECIALTY SHOPS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5641</td>
<td>CHILDREN&rsquo;S AND INFANTS&rsquo; WEAR</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5651</td>
<td>FAMILY CLOTHING STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5661</td>
<td>SHOE STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5691</td>
<td>MEN&rsquo;S WOMEN&rsquo;S CLOTHING STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5699</td>
<td>MISCELLANEOUS APPAREL &amp; ACCESSORY</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7296</td>
<td>CLOTHING-RENTAL, COSTUMES</td>
</tr>
<tr>
<td style="text-align: center">10</td>
<td style="text-align: center">0742</td>
<td>VETERINARY SERVICES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5047</td>
<td>MED/DENTAL/OPHTHALMIC HOSP EQ&amp;SU</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8011</td>
<td>OFFICES AND CLINICS OF DOCTORS OF MEDICINE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8021</td>
<td>DENTISTS, ORTHODONTISTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8031</td>
<td>OSTEOPATHS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8041</td>
<td>CHIROPRACTORS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8042</td>
<td>OPTOMETRISTS, OPHTHALMOLOGISTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8043</td>
<td>OPTICIANS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8049</td>
<td>CHIROPODISTS, PODIATRISTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8062</td>
<td>HOSPITALS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8071</td>
<td>MEDICAL &amp; DENTAL LABORATORIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">8099</td>
<td>MEDICAL SERVICES &amp; HEALTH PRACTITION</td>
</tr>
<tr>
<td style="text-align: center">11</td>
<td style="text-align: center">2741</td>
<td>MISCELLANEOUS PUBLISHING &amp; PRINTING</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5094</td>
<td>PRECIOUS STONES,METALS,WATCHES,JEWEL</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5192</td>
<td>BOOKS,PERIODICALS,&amp;NEWSPAPERS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5193</td>
<td>FLORIST SUPPLIES,NURSERY STK,FLOWERS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5251</td>
<td>HARDWARE STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5331</td>
<td>VARIETY STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5399</td>
<td>MISCELLANEOUS GENERAL MERCHANDISE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5411</td>
<td>GROCERY STORES,SUPERMARKETS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5499</td>
<td>MISCELLANEOUS FOOD STORES-SPECIALTY</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5655</td>
<td>SPORTS APPAREL, RIDING APPAREL STORE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5732</td>
<td>RADIO,TELEVISION, &amp; STERO</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5733</td>
<td>MUSIC STORES, MUSICAL INSTRUMENTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5912</td>
<td>DRUG STORES &amp; PHARMACIES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5921</td>
<td>LIQUOR STORE</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5941</td>
<td>SPORTING GOODS STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5944</td>
<td>JEWELRY STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5946</td>
<td>CAMERA &amp; PHOTOGRAPHIC SUPPLY</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5947</td>
<td>GIFT, CARD, NOVELTY</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5977</td>
<td>COSMETIC STORES</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5993</td>
<td>CIGAR STORES AND STANDS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5995</td>
<td>PET SHOPS, PET FOODS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5999</td>
<td>MISCELLANEOUS AND SPECIALTY RETAIL</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7032</td>
<td>SPORTING &amp; RECREATIONAL CAMPS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7216</td>
<td>DRY CLEANERS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7221</td>
<td>PHOTOGRAPHIC STUDIOS-PORTRAITS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7230</td>
<td>BEAUTY SHOPS, BARBER SHOPS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7298</td>
<td>HEALTH &amp; BEAUTH SPAS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7699</td>
<td>MISCELLANEOUS REPAIR SHOPS</td>
</tr>
<tr>
<td style="text-align: center">12</td>
<td style="text-align: center">3501</td>
<td>HOLIDAY INNS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3502</td>
<td>BEST WESTERN</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3503</td>
<td>SHERATON</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3504</td>
<td>HILTON HOTELS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3509</td>
<td>MARRIOTT</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3510</td>
<td>DAYS INNS OF AMERICA</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3513</td>
<td>WESTIN HOTELS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3535</td>
<td>HILTON INTERNATIONAL</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3562</td>
<td>COMFORT INN</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3665</td>
<td>HAMPTON INN</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3687</td>
<td>CLARION HOTEL</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3690</td>
<td>COURTYARD BY MARRIOTT</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">3700</td>
<td>MOTEL 6</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">5992</td>
<td>FLORISTS</td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center">7011</td>
<td>HOTELS, MOTELS, &amp; RESORTS</td>
</tr>
<tr>
<td style="text-align: center">13</td>
<td style="text-align: center">4511</td>
<td>AIRLINES</td>
</tr>
</tbody></table>

Business Types</h2>

<table><thead>
<tr>
<th>Business Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>Auto Rental</td>
</tr>
<tr>
<td>2</td>
<td>Entertainment</td>
</tr>
<tr>
<td>3</td>
<td>Furniture</td>
</tr>
<tr>
<td>4</td>
<td>Restaurants</td>
</tr>
<tr>
<td>5</td>
<td>Automotive</td>
</tr>
<tr>
<td>7</td>
<td>schools</td>
</tr>
<tr>
<td>8</td>
<td>Services</td>
</tr>
<tr>
<td>9</td>
<td>Clothing</td>
</tr>
<tr>
<td>10</td>
<td>Medical</td>
</tr>
<tr>
<td>11</td>
<td>Miscellaneous</td>
</tr>
<tr>
<td>12</td>
<td>Lodging</td>
</tr>
<tr>
<td>13</td>
<td>Travel</td>
</tr>
</tbody></table>

            <h1 id="reporting-methods">Reporting Methods</h1>

<h2 id="available-resources">Available Resources</h2>

<p>The Safyer Web Service provides the following resources to report on merchant activity.</p>

<table><thead>
<tr>
<th>Resource</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>batchReport</td>
<td>POST</td>
</tr>
<tr>
<td>batch</td>
<td>GET</td>
</tr>
<tr>
<td>transaction</td>
<td>GET</td>
</tr>
<tr>
<td>depositReport</td>
<td>POST</td>
</tr>
<tr>
<td>deposit</td>
<td>GET</td>
</tr>
<tr>
<td>statementReport</td>
<td>POST</td>
</tr>
<tr>
<td>chargebackReport</td>
<td>POST</td>
</tr>
</tbody></table>

<h3 id="batchreport">batchReport</h3>
<pre><code class="highlight shell"><span class="o">{</span>
    <span class="s2">"BatchReport"</span>: <span class="o">{</span>
        <span class="s2">"mid"</span>: <span class="s2">"7620000000000002"</span>,
        <span class="s2">"dateCreateFrom"</span>: <span class="s2">"03-23-2015"</span>,
        <span class="s2">"dateCreateTo"</span>: <span class="s2">"04-13-2015"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>Retrieves information from all transactions of a Merchant for a specific date range. The date range cannot be greater than 30 days. The response will include the IdBatch element, which can be referenced using the GET batch method.</p>

<h3 id="request-method:">Request Method:</h3>

<p>POST</p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/batchReport</code></p>

<h3 id="parameters">Parameters</h3>

<p>All these parameters are in a JSON:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mid</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>dateCreateFrom</td>
<td>Date, Optional</td>
<td>Format mm-dd-yyyy</td>
</tr>
<tr>
<td>dateCreateTo</td>
<td>Date, Optional</td>
<td>Format mm-dd-yyyy</td>
</tr>
</tbody></table>

<h2 id="batch">batch</h2>

<p>Retrieves information from all transactions for a Batch ID (for a specific day and Merchant). The response will include the transactionId element which can be referenced using the GET transaction method.</p>

<h3 id="request-method:">Request Method:</h3>

<p>GET</p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/batch/{{batchId}}</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iBatch</td>
<td>Numeric</td>
<td>A number that identifies a single batch.<br><strong>Note:</strong> The idBatch element can be found using the POST batchReport method.</td>
</tr>
</tbody></table>

<h2 id="transaction">transaction</h2>

<p>Retrieves all information of a specific transaction.</p>

<h3 id="request-method:">Request Method:</h3>

<p>GET</p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/transaction/{{transactionId}}</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>idTransaction</td>
<td>Numeric</td>
<td>A number that identifies a single transaction.<br><strong>Note:</strong> The idTransaction element can be found using the GET batch method.</td>
</tr>
</tbody></table>

<h2 id="depositreport">depositReport</h2>
<pre><code class="highlight shell"><span class="o">{</span>
    <span class="s2">"Deposit"</span>: <span class="o">{</span>
        <span class="s2">"mid"</span>: <span class="s2">"7620000000000002"</span>,
        <span class="s2">"dateFrom"</span>: <span class="s2">"03-23-2015"</span>,
        <span class="s2">"dateTo"</span>: <span class="s2">"04-13-2015"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>Retrieves information from all deposits of a Merchant, between a range of dates. The response will include the idDeposit element, which can be referenced using the GET deposit method.</p>

<h3 id="request-method:">Request Method:</h3>

<p>POST</p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/depositReport</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mid</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>dateFrom</td>
<td>date, optional</td>
<td>Format mm-dd-yyyy.</td>
</tr>
<tr>
<td>dateTo</td>
<td>date, optional</td>
<td>Format mm-dd-yyyy.</td>
</tr>
</tbody></table>

<p><strong>Notes:</strong></p>

<ul>
<li>If the date range is greater than 31 days or if you omit the dateTo element, the results returned will be 31 days from the dateFrom element.</li>
<li>If you omit the dateFrom element, the web service will assume a dateFrom of 31 days prior to the dateFrom value.</li>
<li>If you do not indicate the date range, the web service will return deposits from the current date.</li>
</ul>

<h2 id="deposit">deposit</h2>

<p>Retrieves all information of a specific deposit.</p>

<h3 id="request-method:">Request Method:</h3>

<p>GET</p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/deposit/{{depositId}}</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iDeposit</td>
<td>numeric</td>
<td>A number that identifies a single transaction.<br><strong>Note:</strong> The idDeposit element can be found using the POST depositReport method.</td>
</tr>
</tbody></table>

<h2 id="statementreport">statementReport</h2>
<pre><code class="highlight shell">    <span class="o">{</span>
       <span class="s2">"Statement"</span>: <span class="o">{</span>
            <span class="s2">"mid"</span>: <span class="s2">"7620000000000002"</span>,
            <span class="s2">"stmtMonth"</span>: <span class="s2">"2"</span>,
            <span class="s2">"stmtYearSt"</span>: <span class="s2">"2015"</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>

<p>Returns the Merchant Statement XML for a specific month and year. This XML is received from the merchant&rsquo;s processor and relayed as it is.</p>

<h3 id="request-method:">Request Method:</h3>

<p>POST</p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/statementReport</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mid</td>
<td>string</td>
<td>The number of a merchant.</td>
</tr>
<tr>
<td>stmtMonth</td>
<td>numeric</td>
<td>A number between 1 and 12.</td>
</tr>
<tr>
<td>stmtYear</td>
<td>numeric</td>
<td>A number between 0000 and 9999.</td>
</tr>
</tbody></table>

<h2 id="chargebackreport">chargebackReport</h2>
<pre><code class="highlight shell"><span class="o">{</span>
    <span class="s2">"Chargeback"</span>: <span class="o">{</span>
        <span class="s2">"mid"</span>: <span class="s2">"7620000000000002"</span>,
        <span class="s2">"transactionDateFrom"</span>: <span class="s2">""</span>,
        <span class="s2">"transactionDateTo"</span>: <span class="s2">""</span>,
        <span class="s2">"receivedDateFrom"</span>: <span class="s2">""</span>,
        <span class="s2">"receivedDateTo"</span>: <span class="s2">""</span>,
        <span class="s2">"cardNumLast4"</span>: <span class="s2">""</span>,
        <span class="s2">"authorizationCode"</span>: <span class="s2">""</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>Returns information, the chargebacks for the specified merchant.</p>

<h3 id="request-method:">Request Method:</h3>

<p><code class="prettyprint">POST</code></p>

<h3 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h3>

<p><code class="prettyprint">https://ws.safyer.com/api/v1/chargeback</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mid</td>
<td>string</td>
<td>The number of a merchant.</td>
</tr>
<tr>
<td>transactionDateFrom</td>
<td>date, optional</td>
<td>Format mm-dd-yyyy.</td>
</tr>
<tr>
<td>transactionDateTo</td>
<td>date, optional</td>
<td>Format mm-dd-yyyy.</td>
</tr>
<tr>
<td>receivedDateFrom</td>
<td>date, optional</td>
<td>Format mm-dd-yyyy.</td>
</tr>
<tr>
<td>receivedDateTo</td>
<td>date, optional</td>
<td>Format mm-dd-yyyy.</td>
</tr>
<tr>
<td>cardNumlast4</td>
<td>numeric, optional</td>
<td>A number between 0000 and 9999.</td>
</tr>
<tr>
<td>authorizationCode</td>
<td>string, optional</td>
<td>A string of 6 characters.</td>
</tr>
</tbody></table>

<p><strong>Note:</strong> The processor does not provide a unique number that can be used to tie the chargeback to the original transaction.</p>

            <h1 id="reserve-funding">Reserve Funding</h1>

<p>This method you can use to board a Reserve Funding to Safyer using the Safyer Web Service.</p>

<h2 id="request-method">Request Method</h2>

<h3 id="post">POST</h3>

<h2 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h2>

<p><a href="https://ws.safyer.com/api/v1/reserveFunding">https://ws.safyer.com/api/v1/reserveFunding</a></p>

<h2 id="parameters">Parameters</h2>

<p>All fields are required unless indicated otherwise. All these parameters are in a JSON.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>mid</strong></td>
<td>Numeric</td>
<td>A number that identifies a Merchant.</td>
</tr>
<tr>
<td><strong>dda</strong></td>
<td>Numeric <br>(1 -30 digits)</td>
<td>The bank account number of the merchant.</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td>Numeric <br>(9 digits)</td>
<td>The routing number of the bank account of the merchant.<br>The number must match with an existing bank routing number.</td>
</tr>
<tr>
<td><strong>transferAmount</strong></td>
<td>Numeric <br>( 2 decimals)</td>
<td>Transfer amount.</td>
</tr>
</tbody></table>

<h2 id="example-json">Example JSON</h2>
<pre><code class="highlight shell">    <span class="o">{</span>
     <span class="s2">"ReserveFunding"</span>: <span class="o">{</span>
         <span class="s2">"mid"</span>: <span class="s2">"76200045009254219"</span>,
         <span class="s2">"dda"</span>: <span class="s2">"123456789"</span>,
         <span class="s2">"routing"</span>: <span class="s2">"034560015"</span>,
         <span class="s2">"transferAmount"</span>: <span class="s2">"128.23"</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>

<h2 id="request-method">Request Method</h2>

<h3 id="get">GET</h3>

<h2 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h2>

<p><a href="https://ws.safyer.com/api/v1/reserveFunding/{{reserveFundingId}}">https://ws.safyer.com/api/v1/reserveFunding/ {{reserveFundingId}}</a></p>

<h2 id="parameters">Parameters</h2>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>reserveFundingId</td>
<td>Numeric</td>
<td>A number that identifies a Reserve Funding.</td>
</tr>
</tbody></table>

            <h1 id="reserve-funding-report">Reserve Funding Report</h1>

<p>Retrieves information from a Reserve Funding for a Merchant ID or/and a specific Date Range.</p>

<h2 id="request-method">Request Method</h2>

<h3 id="post">POST</h3>

<h2 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h2>

<p><a href="https://ws.safyer.com/api/v1/reserveFundingReport">https://ws.safyer.com/api/v1/reserveFundingReport</a></p>

<h2 id="parameters">Parameters</h2>

<p>All these parameters are in a JSON:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mid</td>
<td>String</td>
<td>A number that identifies a Merchant.</td>
</tr>
<tr>
<td>dateCreateFrom</td>
<td>Date, Optional</td>
<td>Format mm-dd-yyyy</td>
</tr>
<tr>
<td>dateCreateTo</td>
<td>Date, Optional</td>
<td>Format mm-dd-yyyy</td>
</tr>
</tbody></table>

<h2 id="example-json">Example JSON</h2>
<pre><code class="highlight shell"><span class="o">{</span>
     <span class="s2">"ReserveFunding"</span>: <span class="o">{</span>
         <span class="s2">"mid"</span>: <span class="s2">"7620000000000002"</span>,
         <span class="s2">"dateCreateFrom"</span>: <span class="s2">"03-23-2015"</span>,
         <span class="s2">"dateCreateTo"</span>: <span class="s2">"04-13-2015"</span>
         <span class="o">}</span>
 <span class="o">}</span>
</code></pre>

            <h1 id="boarding-webhook">Boarding Webhook</h1>

<h2 id="introduction">Introduction</h2>

<p>This topic provides the information about the web service that you need to create to receive requests from the Boarding WebHook. Using this WebHook, you can make your system aware of the PayHub login credentials whenever a merchant is boarded through a Frictionless Application.</p>

<p>Refer the information in this topic as the Request and Response format specification for the Boarding Webhook, which runs and queries the system for new merchants that have been boarded to PayHub.</p>

<h3 id="request-method">Request Method</h3>

<p><code class="prettyprint">POST</code></p>

<h3 id="end-point-url">End Point URL</h3>

<p>Specified by the Sales Office in the Manage Frictionless Links section.</p>

<h2 id="request-elements-(from-safyer)">Request Elements (from Safyer)</h2>

<p>All fields are required unless indicated otherwise</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>internalID</td>
<td>string, 5 - 20 digits</td>
<td>The unique system identifier for the merchant issued by Safyer.</td>
</tr>
<tr>
<td>mid</td>
<td>string, 5 - 20 digits</td>
<td>The unique Merchant Identification Number (MID) issued by the processor.</td>
</tr>
<tr>
<td>detail</td>
<td>string, optional, (0 - 100 characters)</td>
<td>A string of data sent by the Sales Office in the query string.</td>
</tr>
<tr>
<td>payHub_OrgID</td>
<td>string, 1 - 11 numbers</td>
<td>The unique system identifier for the merchant issued by PayHub.</td>
</tr>
<tr>
<td>payHub_UserID</td>
<td>string, 8 - 20 characters</td>
<td>The username generated for the default PayHub user.</td>
</tr>
<tr>
<td>payHub_Password</td>
<td>string, 5 - 20 characters</td>
<td>The password generated for the default PayHub user.</td>
</tr>
<tr>
<td>payHub_AuthToken</td>
<td>string, optional, 0 - 100 characters</td>
<td>The OAuth Token used to authenticate the PayHub v2 API.</td>
</tr>
<tr>
<td>termID</td>
<td>string, 4 - 20 characters</td>
<td>The terminal number associated with the PayHub account.</td>
</tr>
</tbody></table>

<h2 id="response-elements-(to-safyer)">Response Elements (to Safyer)</h2>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>string, 1 digit</td>
<td>The response code returned in the response.<br><ul><li>0: ‘Success’</li><li>1: ‘Error’</li></ul></td>
</tr>
<tr>
<td>msg</td>
<td>string, 2 - 5 characters</td>
<td>If code is 0 then msg is ‘OK’. Otherwise, msg is ‘ERROR’.</td>
</tr>
</tbody></table>

<pre style="float: left;background-color: rgb(234, 242, 246);color: black;text-shadow: 0px 1px 2px rgba(0,0,0,0);">
<code class="highlight xml"><span class="cp" style="color: black;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="nt" style="color: black;">&lt;Response&gt;</span>
    <span class="nt" style="color: black;">&lt;code&gt;0</span><span class="nt" style="color: black;">&lt;/code&gt;</span> <span class="nt" style="color: black;">Successfully</span>
    <span class="nt" style="color: black;">&lt;msg&gt;OK</span><span class="nt" style="color: black;">&lt;/msg&gt;</span>
<span class="nt" style="color: black;">&lt;/Response&gt;</span>
</code>
</pre>

            <h1 id="reserve-balance">Reserve Balance</h1>

<p>Retrieves information from a balance for a Merchant.</p>

<h2 id="request-method">Request Method</h2>

<h3 id="get">GET</h3>

<h2 id="endpoint-(url-to-call):">Endpoint (URL to Call):</h2>

<p><a href="https://ws.safyer.com/api/v1/reserveBalance/{{merchantId}}">https://ws.safyer.com/api/v1/reserveBalance/ {{merchantId}}</a></p>

<h2 id="parameters">Parameters</h2>

<p>All these parameters are in a JSON:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchantId</td>
<td>Numeric</td>
<td>A number that identifies a Merchant.</td>
</tr>
</tbody></table>

            <h1 id="chargeback-webhook">Chargeback Webhook</h1>

<p>This topic provides the information about the web service that you need to create to receive requests from Chargebacks.</p>

<h2 id="request-method:">Request Method:</h2>

<h3 id="post">POST</h3>

<h2 id="end-point-url">End Point URL</h2>

<p>Speciefied by the Sales Office in My Office Admin - MyOffice</p>

<h2 id="request-elements-(from-safyer)">Request Elements (from Safyer)</h2>

<aside class='warning'>All fields are required unless indicated otherwise</aside>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>internalID</td>
<td>String 5 - 20 digits</td>
<td>The unique system identifier for the merchant issued by Safyer.</td>
</tr>
<tr>
<td>mid</td>
<td>String 5 - 20 digits</td>
<td>The unique Merchant Identification Number (MID) issued by the processor.</td>
</tr>
<tr>
<td>amount</td>
<td>String <br> money</td>
<td>Chargeback amount.</td>
</tr>
<tr>
<td>AuthorizationCode</td>
<td>String 1 - 6 characters</td>
<td>Chargeback authorization code.</td>
</tr>
<tr>
<td>CardNumLast4</td>
<td>String 4 digits</td>
<td>Card number, last four.</td>
</tr>
<tr>
<td>CardType</td>
<td>String 4 - 16 characters</td>
<td>Card name.<br> Possible values:<ul><li>Visa</li><li>MasterCard</li><li>American Express</li><li>Not defined</li></td>
</tr>
<tr>
<td>ChReasonCode</td>
<td>String 1 - 5 characters</td>
<td></td>
</tr>
<tr>
<td>ReceivedDate</td>
<td>Date <br> Date format:(MM-dd-yyyy)</td>
<td>Date of Chargeback received.</td>
</tr>
<tr>
<td>TransactionDate</td>
<td>Date<br>Date format:(MM-dd-yyyy)</td>
<td>Date of Chargebacks transaction</td>
</tr>
</tbody></table>

<h2 id="response-elements-(to-safyer)">Response Elements (to Safyer)</h2>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>String<br>1 digit</td>
<td>The response code returned in the response.<br><ul><li> 0: Success</li><li>1: Error</li></ul></td>
</tr>
<tr>
<td>msg</td>
<td>String 2 - 5 characters</td>
<td>If code is 0 then msg is &lsquo;OK&rsquo;. Otherwise, msg is &#39;ERROR&rsquo;</td>
</tr>
</tbody></table>

            <h1 id="merchant-status-change-webhook">Merchant Status Change Webhook</h1>

<p>This topic provides the information about the web service that you need to create to receive requests from Chargebacks.</p>

<h2 id="request-method:">Request Method:</h2>

<h3 id="post">POST</h3>

<h2 id="end-point-url">End Point URL</h2>

<p>Speciefied by the Sales Office in My Office Admin - MyOffice</p>

<h2 id="request-elements-(from-safyer)">Request Elements (from Safyer)</h2>

<aside class='warning'>All fields are required unless indicated otherwise</aside>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>internalID</td>
<td>String 5 - 20 digits</td>
<td>The unique system identifier for the merchant issued by Safyer.</td>
</tr>
<tr>
<td>mid</td>
<td>String 5 - 20 digits</td>
<td>The unique Merchant Identification Number (MID) issued by the processor.</td>
</tr>
<tr>
<td>statusFrom</td>
<td>String  6 - 30 characters</td>
<td><br>Old state.<br>Visa/Mastercard status.<br> Possible values:<br><ul><li>Approved</li><li>Closed</li><li>Closed with Fees</li><li>Declined</li><li>Not Submitted</li><li>Pending</li><li>Pre-Approved</li><li>Pre-Approved First Transaction</li><li>Submitted</li><li>Withdrawn</li></td>
</tr>
<tr>
<td>statusTo</td>
<td>String 6 - 30 characters</td>
<td><br>New state.<br>Visa/Mastercard status.<br> Possible values:<br><ul><li>Approved</li><li>Closed</li><li>Closed with Fees</li><li>Declined</li><li>Not Submitted</li><li>Pending</li><li>Pre-Approved</li><li>Pre-Approved First Transaction</li><li>Submitted</li><li>Withdrawn</li></td>
</tr>
<tr>
<td>statusDateChange</td>
<td>Date Date format<br> (MM-dd-yyyy)</td>
<td>Date of change state.</td>
</tr>
<tr>
<td>userName</td>
<td>String 6 - 30 characters</td>
<td>User name that produced the status change.</td>
</tr>
</tbody></table>

<h2 id="response-elements-(to-safyer)">Response Elements (to Safyer)</h2>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>String<br>1 digit</td>
<td>The response code returned in the response.<br><ul><li> 0: Success</li><li>1: Error</li></ul></td>
</tr>
<tr>
<td>msg</td>
<td>String 2 - 5 characters</td>
<td>If code is 0 then msg is &lsquo;OK&rsquo;. Otherwise, msg is &#39;ERROR&rsquo;</td>
</tr>
</tbody></table>

<h2 id="response-examples">Response Examples</h2>

<pre style="float: left;background-color: rgb(234, 242, 246);color: black;text-shadow: 0px 1px 2px rgba(0,0,0,0);">
<code class="highlight xml"><span class="cp" style="color: black;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="nt" style="color: black;">&lt;Response&gt;</span>
    <span class="nt" style="color: black;">&lt;code&gt;0</span><span class="nt" style="color: black;">&lt;/code&gt;</span> <span class="nt" style="color: black;">Successfully</span>
    <span class="nt" style="color: black;">&lt;msg&gt;OK</span><span class="nt" style="color: black;">&lt;/msg&gt;</span>
<span class="nt" style="color: black;">&lt;/Response&gt;</span>

<span class="cp" style="color: black;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="nt" style="color: black;">&lt;Response&gt;</span>
    <span class="nt" style="color: black;">&lt;code&gt;1</span><span class="nt" style="color: black;">&lt;/code&gt;</span> <span class="nt" style="color: black;">Error</span>
    <span class="nt" style="color: black;">&lt;msg&gt;Error</span><span class="nt" style="color: black;">&lt;/msg&gt;</span>
<span class="nt" style="color: black;">&lt;/Response&gt;</span>

</code>
</pre>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="csharp">CSharp</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="json">Json</a>
          </div>
      </div>
    </div>
  </body>
</html>
