# Authentication

## Using OAuth 2.0 Access Tokens to Access your Merchants' Resources
<aside>This document is in progress as of 03/13/2015. This line will be removed when complete - please see text in bolded-italic font that needs to be addressed before we can publish....</aside>

## Introduction
The purpose of this document is to provide you with information on how you can get started using PayHub RESTful Web Services to access certain resources associated with a Merchant's PayHUb account. PayHub's RESTfulWeb Services allow you and your applications to act on a Merchant's behalf to do useful things like:

- Create a Sale transaction (POST a sale resource).
- Create a Void transaction (POST a void resource).
- Create a Refund transaction (POST a refund resource).
- Create a Recurring Bill (POST a recurring-bill resource).
- Update the status of a Recurring Bill, (PATCH the recurring-bill-status property of a RecurringBill resource).
- Retrieve the schedule(s) you used to create a Recurring Bill (GET one or more schedule
resources).
- Retrieve your Merchants' Customer information (GET one or more customer resources), for those
Customers that you have historically created through using the service when you posted a Sale or a Recurring Bill.
- Retrieve information about the Merchants whose resources you have historically managed (GET one or more merchant resources).
- Retrieve your Merchants' tokenized Card Data (GET one or more carddata resources), for the Sales or a Recurring Bills you have historically created.
- Retrieve the bill-related data, such as transaction amount, (GET one or more bill resources), for the Sales or a Recurring Bills you have historically created.
- Attach your own arbitrary JSON data to most of the resources you have created (PUT
metadata 'forResource')
- Perform certain specialized search queries on the resources you have created.
- Supply parameters to control paging and sorting (ascending or descending on a top level
property) on GETs that return multiple resources.
- Query the endpoint we provide and use the hypermedia-linked feature to discover resources from within your client application.
- Obtain, store, and use PayHub's unique numeric identifiers for certain resources such as Customer Id and Recurring Bill Id.

## How we Use OAuth 2.0 to Assure Security
Oauth 2.0 is an industry-standard, and widely accepted, authentication and authorization mechanism for providing third party applications and clients secure access to a user's resources hosted service providers.

Typically, the third party (or client) is granted access to a user's resources hosted by a service provider, using a unique token generated by the service provider at the time the user authorizes the client access to their resources. Think of the situation where you authorize a web site to register you using your identity hosted on Facebook (you click the 'log in with Facebook' button on the web site and authorize the site to access your information on Facebook).

The PayHub RESTful Web Services currently uses OAuth 2.0 with:

- You as the Client
- Merchants as the Users (who has an account at PayHub)
- And PayHub as the Service Provider

You can think of the OAuth 2.0 token as linking the Client to the Merchant via the PayHub Service.

As a new third party integrator, you will be assigned a unique 'Client Id' that you will use when requesting access to a Merchant's resources.

We are current working on a way for you to automatically obtain an OAuth 2.0 Token for a Merchant without the need for the Merchant or PayHub Support to first visit the PayHub Virtual Terminal to generate the token for your Client Id.

Once you have your token, it is very important that you treat this as you would a user and password: never reveal it to anyone other than authorized developers, and never reference it in publicly available source code such as publicly exposed JavaScript or HTML pages.

## Using Your OAuth 2.0 Token in calls to PayHub RESTful Web Services
Once you have the token, you can use it to authenticate your application to the PayHub RESTful Web Service by using the OAuth 2.0 standard HTTP Authorization Header structured as in this example:

<code>
Header Field Name: Authorization<br>
Header Value: Bearer [your-token-here]
</code>

It is important to note that, although this token authorizes you to invoke the PayHub Restful Web Services on behalf of a particular Merchant:

1. You will also need to know the Merchant's unique Organization Id and 3rd Party Terminal Id when you POST a Recurring Bill and a Sale. You should have been supplied with this information when you received the token.
2. You can use any of your valid OAuth 2.0 Tokens when performing GETs to your Merchants' PayHub resources. A GET will retrieve all resources of the requested type (for example Customer) regardless of Merchant. You can filter by Merchant by using the
supplied findByMerchantOrganizationId search functions.
￼
￼
